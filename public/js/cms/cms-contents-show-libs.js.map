{"version":3,"sources":["select2.min.js","summernote-lite.js","tagsinput.js","bootstrap-datepicker.min.js","bootstrap-clockpicker.min.js","bootstrap-form-validation.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cms-contents-show-libs.js","sourcesContent":["/*! Select2 4.0.5 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c=\"undefined\"!=typeof window?require(\"jquery\"):require(\"jquery\")(b)),a(c),c}:a(jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return v.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=b&&b.split(\"/\"),p=t.map,q=p&&p[\"*\"]||{};if(a){for(a=a.split(\"/\"),g=a.length-1,t.nodeIdCompat&&x.test(a[g])&&(a[g]=a[g].replace(x,\"\")),\".\"===a[0].charAt(0)&&o&&(n=o.slice(0,o.length-1),a=n.concat(a)),k=0;k<a.length;k++)if(\".\"===(m=a[k]))a.splice(k,1),k-=1;else if(\"..\"===m){if(0===k||1===k&&\"..\"===a[2]||\"..\"===a[k-1])continue;k>0&&(a.splice(k-1,2),k-=2)}a=a.join(\"/\")}if((o||q)&&p){for(c=a.split(\"/\"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join(\"/\"),o)for(l=o.length;l>0;l-=1)if((e=p[o.slice(0,l).join(\"/\")])&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join(\"/\"))}return a}function g(a,c){return function(){var d=w.call(arguments,0);return\"string\"!=typeof d[0]&&1===d.length&&d.push(null),o.apply(b,d.concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){r[a]=b}}function j(a){if(e(s,a)){var c=s[a];delete s[a],u[a]=!0,n.apply(b,c)}if(!e(r,a)&&!e(u,a))throw new Error(\"No \"+a);return r[a]}function k(a){var b,c=a?a.indexOf(\"!\"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return a?k(a):[]}function m(a){return function(){return t&&t.config&&t.config[a]||{}}}var n,o,p,q,r={},s={},t={},u={},v=Object.prototype.hasOwnProperty,w=[].slice,x=/\\.js$/;p=function(a,b){var c,d=k(a),e=d[0],g=b[1];return a=d[1],e&&(e=f(e,g),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(g)):f(a,g):(a=f(a,g),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+\"!\"+a:a,n:a,pr:e,p:c}},q={require:function(a){return g(a)},exports:function(a){var b=r[a];return void 0!==b?b:r[a]={}},module:function(a){return{id:a,uri:\"\",exports:r[a],config:m(a)}}},n=function(a,c,d,f){var h,k,m,n,o,t,v,w=[],x=typeof d;if(f=f||a,t=l(f),\"undefined\"===x||\"function\"===x){for(c=!c.length&&d.length?[\"require\",\"exports\",\"module\"]:c,o=0;o<c.length;o+=1)if(n=p(c[o],t),\"require\"===(k=n.f))w[o]=q.require(a);else if(\"exports\"===k)w[o]=q.exports(a),v=!0;else if(\"module\"===k)h=w[o]=q.module(a);else if(e(r,k)||e(s,k)||e(u,k))w[o]=j(k);else{if(!n.p)throw new Error(a+\" missing \"+k);n.p.load(n.n,g(f,!0),i(k),{}),w[o]=r[k]}m=d?d.apply(r[a],w):void 0,a&&(h&&h.exports!==b&&h.exports!==r[a]?r[a]=h.exports:m===b&&v||(r[a]=m))}else a&&(r[a]=d)},a=c=o=function(a,c,d,e,f){if(\"string\"==typeof a)return q[a]?q[a](c):j(p(a,l(c)).f);if(!a.splice){if(t=a,t.deps&&o(t.deps,t.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},\"function\"==typeof d&&(d=e,e=f),e?n(b,a,c,d):setTimeout(function(){n(b,a,c,d)},4),o},o.config=function(a){return o(a)},a._defined=r,d=function(a,b,c){if(\"string\"!=typeof a)throw new Error(\"See almond README: incorrect module build, no module name\");b.splice||(c=b,b=[]),e(r,a)||e(s,a)||(s[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define(\"almond\",function(){}),b.define(\"jquery\",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error(\"Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page.\"),b}),b.define(\"select2/utils\",[\"jquery\"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){\"function\"==typeof b[d]&&(\"constructor\"!==d&&c.push(d))}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),c[0]._type=a,a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),\"*\"in this.listeners&&this.invoke(this.listeners[\"*\"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b=\"\",c=0;c<a;c++){b+=Math.floor(36*Math.random()).toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split(\"-\"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||\"hidden\"!==f&&\"visible\"!==f)&&(\"scroll\"===e||\"scroll\"===f||(d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth))},c.escapeMarkup=function(a){var b={\"\\\\\":\"&#92;\",\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#47;\"};return\"string\"!=typeof a?a:String(a).replace(/[&<>\"'\\/\\\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if(\"1.7\"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define(\"select2/results\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class=\"select2-results__options\" role=\"tree\"></ul>');return this.options.get(\"multiple\")&&b.attr(\"aria-multiselectable\",\"true\"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get(\"escapeMarkup\");this.clear(),this.hideLoading();var d=a('<li role=\"treeitem\" aria-live=\"assertive\" class=\"select2-results__option\"></li>'),e=this.options.get(\"translations\").get(b.message);d.append(c(e(b.args))),d[0].className+=\" select2-results__message\",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(\".select2-results__message\").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger(\"results:message\",{message:\"noResults\"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){b.find(\".select2-results\").append(a)},c.prototype.sort=function(a){return this.options.get(\"sorter\")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(\".select2-results__option[aria-selected]\"),b=a.filter(\"[aria-selected=true]\");b.length>0?b.first().trigger(\"mouseenter\"):a.first().trigger(\"mouseenter\"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()});b.$results.find(\".select2-results__option[aria-selected]\").each(function(){var b=a(this),c=a.data(this,\"data\"),e=\"\"+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr(\"aria-selected\",\"true\"):b.attr(\"aria-selected\",\"false\")})})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get(\"translations\").get(\"searching\"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=\" loading-results\",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(\".loading-results\").remove()},c.prototype.option=function(b){var c=document.createElement(\"li\");c.className=\"select2-results__option\";var d={role:\"treeitem\",\"aria-selected\":\"false\"};b.disabled&&(delete d[\"aria-selected\"],d[\"aria-disabled\"]=\"true\"),null==b.id&&delete d[\"aria-selected\"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role=\"group\",d[\"aria-label\"]=b.text,delete d[\"aria-selected\"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement(\"strong\");h.className=\"select2-results__group\";a(h);this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a(\"<ul></ul>\",{class:\"select2-results__options select2-results__options--nested\"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,\"data\",b),c},c.prototype.bind=function(b,c){var d=this,e=b.id+\"-results\";this.$results.attr(\"id\",e),b.on(\"results:all\",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"results:append\",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on(\"query\",function(a){d.hideMessages(),d.showLoading(a)}),b.on(\"select\",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"unselect\",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on(\"open\",function(){d.$results.attr(\"aria-expanded\",\"true\"),d.$results.attr(\"aria-hidden\",\"false\"),d.setClasses(),d.ensureHighlightVisible()}),b.on(\"close\",function(){d.$results.attr(\"aria-expanded\",\"false\"),d.$results.attr(\"aria-hidden\",\"true\"),d.$results.removeAttr(\"aria-activedescendant\")}),b.on(\"results:toggle\",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger(\"mouseup\")}),b.on(\"results:select\",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data(\"data\");\"true\"==a.attr(\"aria-selected\")?d.trigger(\"close\",{}):d.trigger(\"select\",{data:b})}}),b.on(\"results:previous\",function(){var a=d.getHighlightedResults(),b=d.$results.find(\"[aria-selected]\"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger(\"mouseenter\");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);0===e?d.$results.scrollTop(0):h-g<0&&d.$results.scrollTop(i)}}),b.on(\"results:next\",function(){var a=d.getHighlightedResults(),b=d.$results.find(\"[aria-selected]\"),c=b.index(a),e=c+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger(\"mouseenter\");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):h>g&&d.$results.scrollTop(i)}}),b.on(\"results:focus\",function(a){a.element.addClass(\"select2-results__option--highlighted\")}),b.on(\"results:message\",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on(\"mousewheel\",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on(\"mouseup\",\".select2-results__option[aria-selected]\",function(b){var c=a(this),e=c.data(\"data\");if(\"true\"===c.attr(\"aria-selected\"))return void(d.options.get(\"multiple\")?d.trigger(\"unselect\",{originalEvent:b,data:e}):d.trigger(\"close\",{}));d.trigger(\"select\",{originalEvent:b,data:e})}),this.$results.on(\"mouseenter\",\".select2-results__option[aria-selected]\",function(b){var c=a(this).data(\"data\");d.getHighlightedResults().removeClass(\"select2-results__option--highlighted\"),d.trigger(\"results:focus\",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(\".select2-results__option--highlighted\")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find(\"[aria-selected]\"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get(\"templateResult\"),e=this.options.get(\"escapeMarkup\"),f=d(b,c);null==f?c.style.display=\"none\":\"string\"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define(\"select2/keys\",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define(\"select2/selection/base\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class=\"select2-selection\" role=\"combobox\"  aria-haspopup=\"true\" aria-expanded=\"false\"></span>');return this._tabindex=0,null!=this.$element.data(\"old-tabindex\")?this._tabindex=this.$element.data(\"old-tabindex\"):null!=this.$element.attr(\"tabindex\")&&(this._tabindex=this.$element.attr(\"tabindex\")),b.attr(\"title\",this.$element.attr(\"title\")),b.attr(\"tabindex\",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a,b){var d=this,e=(a.id,a.id+\"-results\");this.container=a,this.$selection.on(\"focus\",function(a){d.trigger(\"focus\",a)}),this.$selection.on(\"blur\",function(a){d._handleBlur(a)}),this.$selection.on(\"keydown\",function(a){d.trigger(\"keypress\",a),a.which===c.SPACE&&a.preventDefault()}),a.on(\"results:focus\",function(a){d.$selection.attr(\"aria-activedescendant\",a.data._resultId)}),a.on(\"selection:update\",function(a){d.update(a.data)}),a.on(\"open\",function(){d.$selection.attr(\"aria-expanded\",\"true\"),d.$selection.attr(\"aria-owns\",e),d._attachCloseHandler(a)}),a.on(\"close\",function(){d.$selection.attr(\"aria-expanded\",\"false\"),d.$selection.removeAttr(\"aria-activedescendant\"),d.$selection.removeAttr(\"aria-owns\"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on(\"enable\",function(){d.$selection.attr(\"tabindex\",d._tabindex)}),a.on(\"disable\",function(){d.$selection.attr(\"tabindex\",\"-1\")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger(\"blur\",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on(\"mousedown.select2.\"+b.id,function(b){var c=a(b.target),d=c.closest(\".select2\");a(\".select2.select2-container--open\").each(function(){var b=a(this);this!=d[0]&&b.data(\"element\").select2(\"close\")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off(\"mousedown.select2.\"+b.id)},d.prototype.position=function(a,b){b.find(\".selection\").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error(\"The `update` method must be defined in child classes.\")},d}),b.define(\"select2/selection/single\",[\"jquery\",\"./base\",\"../utils\",\"../keys\"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass(\"select2-selection--single\"),a.html('<span class=\"select2-selection__rendered\"></span><span class=\"select2-selection__arrow\" role=\"presentation\"><b role=\"presentation\"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+\"-container\";this.$selection.find(\".select2-selection__rendered\").attr(\"id\",d),this.$selection.attr(\"aria-labelledby\",d),this.$selection.on(\"mousedown\",function(a){1===a.which&&c.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"focus\",function(a){}),this.$selection.on(\"blur\",function(a){}),a.on(\"focus\",function(b){a.isOpen()||c.$selection.focus()}),a.on(\"selection:update\",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},e.prototype.display=function(a,b){var c=this.options.get(\"templateSelection\");return this.options.get(\"escapeMarkup\")(c(a,b))},e.prototype.selectionContainer=function(){return a(\"<span></span>\")},e.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.$selection.find(\".select2-selection__rendered\"),d=this.display(b,c);c.empty().append(d),c.prop(\"title\",b.title||b.text)},e}),b.define(\"select2/selection/multiple\",[\"jquery\",\"./base\",\"../utils\"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass(\"select2-selection--multiple\"),a.html('<ul class=\"select2-selection__rendered\"></ul>'),a},d.prototype.bind=function(b,c){var e=this;d.__super__.bind.apply(this,arguments),this.$selection.on(\"click\",function(a){e.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"click\",\".select2-selection__choice__remove\",function(b){if(!e.options.get(\"disabled\")){var c=a(this),d=c.parent(),f=d.data(\"data\");e.trigger(\"unselect\",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},d.prototype.display=function(a,b){var c=this.options.get(\"templateSelection\");return this.options.get(\"escapeMarkup\")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class=\"select2-selection__choice\"><span class=\"select2-selection__choice__remove\" role=\"presentation\">&times;</span></li>')},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop(\"title\",e.title||e.text),f.data(\"data\",e),b.push(f)}var h=this.$selection.find(\".select2-selection__rendered\");c.appendMany(h,b)}},d}),b.define(\"select2/selection/placeholder\",[\"../utils\"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass(\"select2-selection__placeholder\").removeClass(\"select2-selection__choice\"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id;if(b.length>1||c)return a.call(this,b);this.clear();var d=this.createPlaceholder(this.placeholder);this.$selection.find(\".select2-selection__rendered\").append(d)},b}),b.define(\"select2/selection/allowClear\",[\"jquery\",\"../keys\"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get(\"debug\")&&window.console&&console.error&&console.error(\"Select2: The `allowClear` option should be used in combination with the `placeholder` option.\"),this.$selection.on(\"mousedown\",\".select2-selection__clear\",function(a){d._handleClear(a)}),b.on(\"keypress\",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get(\"disabled\")){var c=this.$selection.find(\".select2-selection__clear\");if(0!==c.length){b.stopPropagation();for(var d=c.data(\"data\"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger(\"unselect\",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger(\"change\"),this.trigger(\"toggle\",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||c.which!=b.DELETE&&c.which!=b.BACKSPACE||this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(\".select2-selection__placeholder\").length>0||0===c.length)){var d=a('<span class=\"select2-selection__clear\">&times;</span>');d.data(\"data\",c),this.$selection.find(\".select2-selection__rendered\").prepend(d)}},c}),b.define(\"select2/selection/search\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class=\"select2-search select2-search--inline\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\" spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" /></li>');this.$searchContainer=c,this.$search=c.find(\"input\");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on(\"open\",function(){e.$search.trigger(\"focus\")}),b.on(\"close\",function(){e.$search.val(\"\"),e.$search.removeAttr(\"aria-activedescendant\"),e.$search.trigger(\"focus\")}),b.on(\"enable\",function(){e.$search.prop(\"disabled\",!1),e._transferTabIndex()}),b.on(\"disable\",function(){e.$search.prop(\"disabled\",!0)}),b.on(\"focus\",function(a){e.$search.trigger(\"focus\")}),b.on(\"results:focus\",function(a){e.$search.attr(\"aria-activedescendant\",a.id)}),this.$selection.on(\"focusin\",\".select2-search--inline\",function(a){e.trigger(\"focus\",a)}),this.$selection.on(\"focusout\",\".select2-search--inline\",function(a){e._handleBlur(a)}),this.$selection.on(\"keydown\",\".select2-search--inline\",function(a){if(a.stopPropagation(),e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&\"\"===e.$search.val()){var b=e.$searchContainer.prev(\".select2-selection__choice\");if(b.length>0){var d=b.data(\"data\");e.searchRemoveChoice(d),a.preventDefault()}}});var f=document.documentMode,g=f&&f<=11;this.$selection.on(\"input.searchcheck\",\".select2-search--inline\",function(a){if(g)return void e.$selection.off(\"input.search input.searchcheck\");e.$selection.off(\"keyup.search\")}),this.$selection.on(\"keyup.search input.search\",\".select2-search--inline\",function(a){if(g&&\"input\"===a.type)return void e.$selection.off(\"input.search input.searchcheck\");var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)})},d.prototype._transferTabIndex=function(a){this.$search.attr(\"tabindex\",this.$selection.attr(\"tabindex\")),this.$selection.attr(\"tabindex\",\"-1\")},d.prototype.createPlaceholder=function(a,b){this.$search.attr(\"placeholder\",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr(\"placeholder\",\"\"),a.call(this,b),this.$selection.find(\".select2-selection__rendered\").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger(\"query\",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger(\"unselect\",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css(\"width\",\"25px\");var a=\"\";if(\"\"!==this.$search.attr(\"placeholder\"))a=this.$selection.find(\".select2-selection__rendered\").innerWidth();else{a=.75*(this.$search.val().length+1)+\"em\"}this.$search.css(\"width\",a)},d}),b.define(\"select2/selection/eventRelay\",[\"jquery\"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=[\"open\",\"opening\",\"close\",\"closing\",\"select\",\"selecting\",\"unselect\",\"unselecting\"],g=[\"opening\",\"closing\",\"selecting\",\"unselecting\"];b.call(this,c,d),c.on(\"*\",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event(\"select2:\"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define(\"select2/translation\",[\"jquery\",\"require\"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define(\"select2/diacritics\",[],function(){return{\"Ⓐ\":\"A\",\"Ａ\":\"A\",\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ầ\":\"A\",\"Ấ\":\"A\",\"Ẫ\":\"A\",\"Ẩ\":\"A\",\"Ã\":\"A\",\"Ā\":\"A\",\"Ă\":\"A\",\"Ằ\":\"A\",\"Ắ\":\"A\",\"Ẵ\":\"A\",\"Ẳ\":\"A\",\"Ȧ\":\"A\",\"Ǡ\":\"A\",\"Ä\":\"A\",\"Ǟ\":\"A\",\"Ả\":\"A\",\"Å\":\"A\",\"Ǻ\":\"A\",\"Ǎ\":\"A\",\"Ȁ\":\"A\",\"Ȃ\":\"A\",\"Ạ\":\"A\",\"Ậ\":\"A\",\"Ặ\":\"A\",\"Ḁ\":\"A\",\"Ą\":\"A\",\"Ⱥ\":\"A\",\"Ɐ\":\"A\",\"Ꜳ\":\"AA\",\"Æ\":\"AE\",\"Ǽ\":\"AE\",\"Ǣ\":\"AE\",\"Ꜵ\":\"AO\",\"Ꜷ\":\"AU\",\"Ꜹ\":\"AV\",\"Ꜻ\":\"AV\",\"Ꜽ\":\"AY\",\"Ⓑ\":\"B\",\"Ｂ\":\"B\",\"Ḃ\":\"B\",\"Ḅ\":\"B\",\"Ḇ\":\"B\",\"Ƀ\":\"B\",\"Ƃ\":\"B\",\"Ɓ\":\"B\",\"Ⓒ\":\"C\",\"Ｃ\":\"C\",\"Ć\":\"C\",\"Ĉ\":\"C\",\"Ċ\":\"C\",\"Č\":\"C\",\"Ç\":\"C\",\"Ḉ\":\"C\",\"Ƈ\":\"C\",\"Ȼ\":\"C\",\"Ꜿ\":\"C\",\"Ⓓ\":\"D\",\"Ｄ\":\"D\",\"Ḋ\":\"D\",\"Ď\":\"D\",\"Ḍ\":\"D\",\"Ḑ\":\"D\",\"Ḓ\":\"D\",\"Ḏ\":\"D\",\"Đ\":\"D\",\"Ƌ\":\"D\",\"Ɗ\":\"D\",\"Ɖ\":\"D\",\"Ꝺ\":\"D\",\"Ǳ\":\"DZ\",\"Ǆ\":\"DZ\",\"ǲ\":\"Dz\",\"ǅ\":\"Dz\",\"Ⓔ\":\"E\",\"Ｅ\":\"E\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ề\":\"E\",\"Ế\":\"E\",\"Ễ\":\"E\",\"Ể\":\"E\",\"Ẽ\":\"E\",\"Ē\":\"E\",\"Ḕ\":\"E\",\"Ḗ\":\"E\",\"Ĕ\":\"E\",\"Ė\":\"E\",\"Ë\":\"E\",\"Ẻ\":\"E\",\"Ě\":\"E\",\"Ȅ\":\"E\",\"Ȇ\":\"E\",\"Ẹ\":\"E\",\"Ệ\":\"E\",\"Ȩ\":\"E\",\"Ḝ\":\"E\",\"Ę\":\"E\",\"Ḙ\":\"E\",\"Ḛ\":\"E\",\"Ɛ\":\"E\",\"Ǝ\":\"E\",\"Ⓕ\":\"F\",\"Ｆ\":\"F\",\"Ḟ\":\"F\",\"Ƒ\":\"F\",\"Ꝼ\":\"F\",\"Ⓖ\":\"G\",\"Ｇ\":\"G\",\"Ǵ\":\"G\",\"Ĝ\":\"G\",\"Ḡ\":\"G\",\"Ğ\":\"G\",\"Ġ\":\"G\",\"Ǧ\":\"G\",\"Ģ\":\"G\",\"Ǥ\":\"G\",\"Ɠ\":\"G\",\"Ꞡ\":\"G\",\"Ᵹ\":\"G\",\"Ꝿ\":\"G\",\"Ⓗ\":\"H\",\"Ｈ\":\"H\",\"Ĥ\":\"H\",\"Ḣ\":\"H\",\"Ḧ\":\"H\",\"Ȟ\":\"H\",\"Ḥ\":\"H\",\"Ḩ\":\"H\",\"Ḫ\":\"H\",\"Ħ\":\"H\",\"Ⱨ\":\"H\",\"Ⱶ\":\"H\",\"Ɥ\":\"H\",\"Ⓘ\":\"I\",\"Ｉ\":\"I\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ĩ\":\"I\",\"Ī\":\"I\",\"Ĭ\":\"I\",\"İ\":\"I\",\"Ï\":\"I\",\"Ḯ\":\"I\",\"Ỉ\":\"I\",\"Ǐ\":\"I\",\"Ȉ\":\"I\",\"Ȋ\":\"I\",\"Ị\":\"I\",\"Į\":\"I\",\"Ḭ\":\"I\",\"Ɨ\":\"I\",\"Ⓙ\":\"J\",\"Ｊ\":\"J\",\"Ĵ\":\"J\",\"Ɉ\":\"J\",\"Ⓚ\":\"K\",\"Ｋ\":\"K\",\"Ḱ\":\"K\",\"Ǩ\":\"K\",\"Ḳ\":\"K\",\"Ķ\":\"K\",\"Ḵ\":\"K\",\"Ƙ\":\"K\",\"Ⱪ\":\"K\",\"Ꝁ\":\"K\",\"Ꝃ\":\"K\",\"Ꝅ\":\"K\",\"Ꞣ\":\"K\",\"Ⓛ\":\"L\",\"Ｌ\":\"L\",\"Ŀ\":\"L\",\"Ĺ\":\"L\",\"Ľ\":\"L\",\"Ḷ\":\"L\",\"Ḹ\":\"L\",\"Ļ\":\"L\",\"Ḽ\":\"L\",\"Ḻ\":\"L\",\"Ł\":\"L\",\"Ƚ\":\"L\",\"Ɫ\":\"L\",\"Ⱡ\":\"L\",\"Ꝉ\":\"L\",\"Ꝇ\":\"L\",\"Ꞁ\":\"L\",\"Ǉ\":\"LJ\",\"ǈ\":\"Lj\",\"Ⓜ\":\"M\",\"Ｍ\":\"M\",\"Ḿ\":\"M\",\"Ṁ\":\"M\",\"Ṃ\":\"M\",\"Ɱ\":\"M\",\"Ɯ\":\"M\",\"Ⓝ\":\"N\",\"Ｎ\":\"N\",\"Ǹ\":\"N\",\"Ń\":\"N\",\"Ñ\":\"N\",\"Ṅ\":\"N\",\"Ň\":\"N\",\"Ṇ\":\"N\",\"Ņ\":\"N\",\"Ṋ\":\"N\",\"Ṉ\":\"N\",\"Ƞ\":\"N\",\"Ɲ\":\"N\",\"Ꞑ\":\"N\",\"Ꞥ\":\"N\",\"Ǌ\":\"NJ\",\"ǋ\":\"Nj\",\"Ⓞ\":\"O\",\"Ｏ\":\"O\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Ồ\":\"O\",\"Ố\":\"O\",\"Ỗ\":\"O\",\"Ổ\":\"O\",\"Õ\":\"O\",\"Ṍ\":\"O\",\"Ȭ\":\"O\",\"Ṏ\":\"O\",\"Ō\":\"O\",\"Ṑ\":\"O\",\"Ṓ\":\"O\",\"Ŏ\":\"O\",\"Ȯ\":\"O\",\"Ȱ\":\"O\",\"Ö\":\"O\",\"Ȫ\":\"O\",\"Ỏ\":\"O\",\"Ő\":\"O\",\"Ǒ\":\"O\",\"Ȍ\":\"O\",\"Ȏ\":\"O\",\"Ơ\":\"O\",\"Ờ\":\"O\",\"Ớ\":\"O\",\"Ỡ\":\"O\",\"Ở\":\"O\",\"Ợ\":\"O\",\"Ọ\":\"O\",\"Ộ\":\"O\",\"Ǫ\":\"O\",\"Ǭ\":\"O\",\"Ø\":\"O\",\"Ǿ\":\"O\",\"Ɔ\":\"O\",\"Ɵ\":\"O\",\"Ꝋ\":\"O\",\"Ꝍ\":\"O\",\"Ƣ\":\"OI\",\"Ꝏ\":\"OO\",\"Ȣ\":\"OU\",\"Ⓟ\":\"P\",\"Ｐ\":\"P\",\"Ṕ\":\"P\",\"Ṗ\":\"P\",\"Ƥ\":\"P\",\"Ᵽ\":\"P\",\"Ꝑ\":\"P\",\"Ꝓ\":\"P\",\"Ꝕ\":\"P\",\"Ⓠ\":\"Q\",\"Ｑ\":\"Q\",\"Ꝗ\":\"Q\",\"Ꝙ\":\"Q\",\"Ɋ\":\"Q\",\"Ⓡ\":\"R\",\"Ｒ\":\"R\",\"Ŕ\":\"R\",\"Ṙ\":\"R\",\"Ř\":\"R\",\"Ȑ\":\"R\",\"Ȓ\":\"R\",\"Ṛ\":\"R\",\"Ṝ\":\"R\",\"Ŗ\":\"R\",\"Ṟ\":\"R\",\"Ɍ\":\"R\",\"Ɽ\":\"R\",\"Ꝛ\":\"R\",\"Ꞧ\":\"R\",\"Ꞃ\":\"R\",\"Ⓢ\":\"S\",\"Ｓ\":\"S\",\"ẞ\":\"S\",\"Ś\":\"S\",\"Ṥ\":\"S\",\"Ŝ\":\"S\",\"Ṡ\":\"S\",\"Š\":\"S\",\"Ṧ\":\"S\",\"Ṣ\":\"S\",\"Ṩ\":\"S\",\"Ș\":\"S\",\"Ş\":\"S\",\"Ȿ\":\"S\",\"Ꞩ\":\"S\",\"Ꞅ\":\"S\",\"Ⓣ\":\"T\",\"Ｔ\":\"T\",\"Ṫ\":\"T\",\"Ť\":\"T\",\"Ṭ\":\"T\",\"Ț\":\"T\",\"Ţ\":\"T\",\"Ṱ\":\"T\",\"Ṯ\":\"T\",\"Ŧ\":\"T\",\"Ƭ\":\"T\",\"Ʈ\":\"T\",\"Ⱦ\":\"T\",\"Ꞇ\":\"T\",\"Ꜩ\":\"TZ\",\"Ⓤ\":\"U\",\"Ｕ\":\"U\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ũ\":\"U\",\"Ṹ\":\"U\",\"Ū\":\"U\",\"Ṻ\":\"U\",\"Ŭ\":\"U\",\"Ü\":\"U\",\"Ǜ\":\"U\",\"Ǘ\":\"U\",\"Ǖ\":\"U\",\"Ǚ\":\"U\",\"Ủ\":\"U\",\"Ů\":\"U\",\"Ű\":\"U\",\"Ǔ\":\"U\",\"Ȕ\":\"U\",\"Ȗ\":\"U\",\"Ư\":\"U\",\"Ừ\":\"U\",\"Ứ\":\"U\",\"Ữ\":\"U\",\"Ử\":\"U\",\"Ự\":\"U\",\"Ụ\":\"U\",\"Ṳ\":\"U\",\"Ų\":\"U\",\"Ṷ\":\"U\",\"Ṵ\":\"U\",\"Ʉ\":\"U\",\"Ⓥ\":\"V\",\"Ｖ\":\"V\",\"Ṽ\":\"V\",\"Ṿ\":\"V\",\"Ʋ\":\"V\",\"Ꝟ\":\"V\",\"Ʌ\":\"V\",\"Ꝡ\":\"VY\",\"Ⓦ\":\"W\",\"Ｗ\":\"W\",\"Ẁ\":\"W\",\"Ẃ\":\"W\",\"Ŵ\":\"W\",\"Ẇ\":\"W\",\"Ẅ\":\"W\",\"Ẉ\":\"W\",\"Ⱳ\":\"W\",\"Ⓧ\":\"X\",\"Ｘ\":\"X\",\"Ẋ\":\"X\",\"Ẍ\":\"X\",\"Ⓨ\":\"Y\",\"Ｙ\":\"Y\",\"Ỳ\":\"Y\",\"Ý\":\"Y\",\"Ŷ\":\"Y\",\"Ỹ\":\"Y\",\"Ȳ\":\"Y\",\"Ẏ\":\"Y\",\"Ÿ\":\"Y\",\"Ỷ\":\"Y\",\"Ỵ\":\"Y\",\"Ƴ\":\"Y\",\"Ɏ\":\"Y\",\"Ỿ\":\"Y\",\"Ⓩ\":\"Z\",\"Ｚ\":\"Z\",\"Ź\":\"Z\",\"Ẑ\":\"Z\",\"Ż\":\"Z\",\"Ž\":\"Z\",\"Ẓ\":\"Z\",\"Ẕ\":\"Z\",\"Ƶ\":\"Z\",\"Ȥ\":\"Z\",\"Ɀ\":\"Z\",\"Ⱬ\":\"Z\",\"Ꝣ\":\"Z\",\"ⓐ\":\"a\",\"ａ\":\"a\",\"ẚ\":\"a\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ầ\":\"a\",\"ấ\":\"a\",\"ẫ\":\"a\",\"ẩ\":\"a\",\"ã\":\"a\",\"ā\":\"a\",\"ă\":\"a\",\"ằ\":\"a\",\"ắ\":\"a\",\"ẵ\":\"a\",\"ẳ\":\"a\",\"ȧ\":\"a\",\"ǡ\":\"a\",\"ä\":\"a\",\"ǟ\":\"a\",\"ả\":\"a\",\"å\":\"a\",\"ǻ\":\"a\",\"ǎ\":\"a\",\"ȁ\":\"a\",\"ȃ\":\"a\",\"ạ\":\"a\",\"ậ\":\"a\",\"ặ\":\"a\",\"ḁ\":\"a\",\"ą\":\"a\",\"ⱥ\":\"a\",\"ɐ\":\"a\",\"ꜳ\":\"aa\",\"æ\":\"ae\",\"ǽ\":\"ae\",\"ǣ\":\"ae\",\"ꜵ\":\"ao\",\"ꜷ\":\"au\",\"ꜹ\":\"av\",\"ꜻ\":\"av\",\"ꜽ\":\"ay\",\"ⓑ\":\"b\",\"ｂ\":\"b\",\"ḃ\":\"b\",\"ḅ\":\"b\",\"ḇ\":\"b\",\"ƀ\":\"b\",\"ƃ\":\"b\",\"ɓ\":\"b\",\"ⓒ\":\"c\",\"ｃ\":\"c\",\"ć\":\"c\",\"ĉ\":\"c\",\"ċ\":\"c\",\"č\":\"c\",\"ç\":\"c\",\"ḉ\":\"c\",\"ƈ\":\"c\",\"ȼ\":\"c\",\"ꜿ\":\"c\",\"ↄ\":\"c\",\"ⓓ\":\"d\",\"ｄ\":\"d\",\"ḋ\":\"d\",\"ď\":\"d\",\"ḍ\":\"d\",\"ḑ\":\"d\",\"ḓ\":\"d\",\"ḏ\":\"d\",\"đ\":\"d\",\"ƌ\":\"d\",\"ɖ\":\"d\",\"ɗ\":\"d\",\"ꝺ\":\"d\",\"ǳ\":\"dz\",\"ǆ\":\"dz\",\"ⓔ\":\"e\",\"ｅ\":\"e\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ề\":\"e\",\"ế\":\"e\",\"ễ\":\"e\",\"ể\":\"e\",\"ẽ\":\"e\",\"ē\":\"e\",\"ḕ\":\"e\",\"ḗ\":\"e\",\"ĕ\":\"e\",\"ė\":\"e\",\"ë\":\"e\",\"ẻ\":\"e\",\"ě\":\"e\",\"ȅ\":\"e\",\"ȇ\":\"e\",\"ẹ\":\"e\",\"ệ\":\"e\",\"ȩ\":\"e\",\"ḝ\":\"e\",\"ę\":\"e\",\"ḙ\":\"e\",\"ḛ\":\"e\",\"ɇ\":\"e\",\"ɛ\":\"e\",\"ǝ\":\"e\",\"ⓕ\":\"f\",\"ｆ\":\"f\",\"ḟ\":\"f\",\"ƒ\":\"f\",\"ꝼ\":\"f\",\"ⓖ\":\"g\",\"ｇ\":\"g\",\"ǵ\":\"g\",\"ĝ\":\"g\",\"ḡ\":\"g\",\"ğ\":\"g\",\"ġ\":\"g\",\"ǧ\":\"g\",\"ģ\":\"g\",\"ǥ\":\"g\",\"ɠ\":\"g\",\"ꞡ\":\"g\",\"ᵹ\":\"g\",\"ꝿ\":\"g\",\"ⓗ\":\"h\",\"ｈ\":\"h\",\"ĥ\":\"h\",\"ḣ\":\"h\",\"ḧ\":\"h\",\"ȟ\":\"h\",\"ḥ\":\"h\",\"ḩ\":\"h\",\"ḫ\":\"h\",\"ẖ\":\"h\",\"ħ\":\"h\",\"ⱨ\":\"h\",\"ⱶ\":\"h\",\"ɥ\":\"h\",\"ƕ\":\"hv\",\"ⓘ\":\"i\",\"ｉ\":\"i\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ĩ\":\"i\",\"ī\":\"i\",\"ĭ\":\"i\",\"ï\":\"i\",\"ḯ\":\"i\",\"ỉ\":\"i\",\"ǐ\":\"i\",\"ȉ\":\"i\",\"ȋ\":\"i\",\"ị\":\"i\",\"į\":\"i\",\"ḭ\":\"i\",\"ɨ\":\"i\",\"ı\":\"i\",\"ⓙ\":\"j\",\"ｊ\":\"j\",\"ĵ\":\"j\",\"ǰ\":\"j\",\"ɉ\":\"j\",\"ⓚ\":\"k\",\"ｋ\":\"k\",\"ḱ\":\"k\",\"ǩ\":\"k\",\"ḳ\":\"k\",\"ķ\":\"k\",\"ḵ\":\"k\",\"ƙ\":\"k\",\"ⱪ\":\"k\",\"ꝁ\":\"k\",\"ꝃ\":\"k\",\"ꝅ\":\"k\",\"ꞣ\":\"k\",\"ⓛ\":\"l\",\"ｌ\":\"l\",\"ŀ\":\"l\",\"ĺ\":\"l\",\"ľ\":\"l\",\"ḷ\":\"l\",\"ḹ\":\"l\",\"ļ\":\"l\",\"ḽ\":\"l\",\"ḻ\":\"l\",\"ſ\":\"l\",\"ł\":\"l\",\"ƚ\":\"l\",\"ɫ\":\"l\",\"ⱡ\":\"l\",\"ꝉ\":\"l\",\"ꞁ\":\"l\",\"ꝇ\":\"l\",\"ǉ\":\"lj\",\"ⓜ\":\"m\",\"ｍ\":\"m\",\"ḿ\":\"m\",\"ṁ\":\"m\",\"ṃ\":\"m\",\"ɱ\":\"m\",\"ɯ\":\"m\",\"ⓝ\":\"n\",\"ｎ\":\"n\",\"ǹ\":\"n\",\"ń\":\"n\",\"ñ\":\"n\",\"ṅ\":\"n\",\"ň\":\"n\",\"ṇ\":\"n\",\"ņ\":\"n\",\"ṋ\":\"n\",\"ṉ\":\"n\",\"ƞ\":\"n\",\"ɲ\":\"n\",\"ŉ\":\"n\",\"ꞑ\":\"n\",\"ꞥ\":\"n\",\"ǌ\":\"nj\",\"ⓞ\":\"o\",\"ｏ\":\"o\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"ồ\":\"o\",\"ố\":\"o\",\"ỗ\":\"o\",\"ổ\":\"o\",\"õ\":\"o\",\"ṍ\":\"o\",\"ȭ\":\"o\",\"ṏ\":\"o\",\"ō\":\"o\",\"ṑ\":\"o\",\"ṓ\":\"o\",\"ŏ\":\"o\",\"ȯ\":\"o\",\"ȱ\":\"o\",\"ö\":\"o\",\"ȫ\":\"o\",\"ỏ\":\"o\",\"ő\":\"o\",\"ǒ\":\"o\",\"ȍ\":\"o\",\"ȏ\":\"o\",\"ơ\":\"o\",\"ờ\":\"o\",\"ớ\":\"o\",\"ỡ\":\"o\",\"ở\":\"o\",\"ợ\":\"o\",\"ọ\":\"o\",\"ộ\":\"o\",\"ǫ\":\"o\",\"ǭ\":\"o\",\"ø\":\"o\",\"ǿ\":\"o\",\"ɔ\":\"o\",\"ꝋ\":\"o\",\"ꝍ\":\"o\",\"ɵ\":\"o\",\"ƣ\":\"oi\",\"ȣ\":\"ou\",\"ꝏ\":\"oo\",\"ⓟ\":\"p\",\"ｐ\":\"p\",\"ṕ\":\"p\",\"ṗ\":\"p\",\"ƥ\":\"p\",\"ᵽ\":\"p\",\"ꝑ\":\"p\",\"ꝓ\":\"p\",\"ꝕ\":\"p\",\"ⓠ\":\"q\",\"ｑ\":\"q\",\"ɋ\":\"q\",\"ꝗ\":\"q\",\"ꝙ\":\"q\",\"ⓡ\":\"r\",\"ｒ\":\"r\",\"ŕ\":\"r\",\"ṙ\":\"r\",\"ř\":\"r\",\"ȑ\":\"r\",\"ȓ\":\"r\",\"ṛ\":\"r\",\"ṝ\":\"r\",\"ŗ\":\"r\",\"ṟ\":\"r\",\"ɍ\":\"r\",\"ɽ\":\"r\",\"ꝛ\":\"r\",\"ꞧ\":\"r\",\"ꞃ\":\"r\",\"ⓢ\":\"s\",\"ｓ\":\"s\",\"ß\":\"s\",\"ś\":\"s\",\"ṥ\":\"s\",\"ŝ\":\"s\",\"ṡ\":\"s\",\"š\":\"s\",\"ṧ\":\"s\",\"ṣ\":\"s\",\"ṩ\":\"s\",\"ș\":\"s\",\"ş\":\"s\",\"ȿ\":\"s\",\"ꞩ\":\"s\",\"ꞅ\":\"s\",\"ẛ\":\"s\",\"ⓣ\":\"t\",\"ｔ\":\"t\",\"ṫ\":\"t\",\"ẗ\":\"t\",\"ť\":\"t\",\"ṭ\":\"t\",\"ț\":\"t\",\"ţ\":\"t\",\"ṱ\":\"t\",\"ṯ\":\"t\",\"ŧ\":\"t\",\"ƭ\":\"t\",\"ʈ\":\"t\",\"ⱦ\":\"t\",\"ꞇ\":\"t\",\"ꜩ\":\"tz\",\"ⓤ\":\"u\",\"ｕ\":\"u\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ũ\":\"u\",\"ṹ\":\"u\",\"ū\":\"u\",\"ṻ\":\"u\",\"ŭ\":\"u\",\"ü\":\"u\",\"ǜ\":\"u\",\"ǘ\":\"u\",\"ǖ\":\"u\",\"ǚ\":\"u\",\"ủ\":\"u\",\"ů\":\"u\",\"ű\":\"u\",\"ǔ\":\"u\",\"ȕ\":\"u\",\"ȗ\":\"u\",\"ư\":\"u\",\"ừ\":\"u\",\"ứ\":\"u\",\"ữ\":\"u\",\"ử\":\"u\",\"ự\":\"u\",\"ụ\":\"u\",\"ṳ\":\"u\",\"ų\":\"u\",\"ṷ\":\"u\",\"ṵ\":\"u\",\"ʉ\":\"u\",\"ⓥ\":\"v\",\"ｖ\":\"v\",\"ṽ\":\"v\",\"ṿ\":\"v\",\"ʋ\":\"v\",\"ꝟ\":\"v\",\"ʌ\":\"v\",\"ꝡ\":\"vy\",\"ⓦ\":\"w\",\"ｗ\":\"w\",\"ẁ\":\"w\",\"ẃ\":\"w\",\"ŵ\":\"w\",\"ẇ\":\"w\",\"ẅ\":\"w\",\"ẘ\":\"w\",\"ẉ\":\"w\",\"ⱳ\":\"w\",\"ⓧ\":\"x\",\"ｘ\":\"x\",\"ẋ\":\"x\",\"ẍ\":\"x\",\"ⓨ\":\"y\",\"ｙ\":\"y\",\"ỳ\":\"y\",\"ý\":\"y\",\"ŷ\":\"y\",\"ỹ\":\"y\",\"ȳ\":\"y\",\"ẏ\":\"y\",\"ÿ\":\"y\",\"ỷ\":\"y\",\"ẙ\":\"y\",\"ỵ\":\"y\",\"ƴ\":\"y\",\"ɏ\":\"y\",\"ỿ\":\"y\",\"ⓩ\":\"z\",\"ｚ\":\"z\",\"ź\":\"z\",\"ẑ\":\"z\",\"ż\":\"z\",\"ž\":\"z\",\"ẓ\":\"z\",\"ẕ\":\"z\",\"ƶ\":\"z\",\"ȥ\":\"z\",\"ɀ\":\"z\",\"ⱬ\":\"z\",\"ꝣ\":\"z\",\"Ά\":\"Α\",\"Έ\":\"Ε\",\"Ή\":\"Η\",\"Ί\":\"Ι\",\"Ϊ\":\"Ι\",\"Ό\":\"Ο\",\"Ύ\":\"Υ\",\"Ϋ\":\"Υ\",\"Ώ\":\"Ω\",\"ά\":\"α\",\"έ\":\"ε\",\"ή\":\"η\",\"ί\":\"ι\",\"ϊ\":\"ι\",\"ΐ\":\"ι\",\"ό\":\"ο\",\"ύ\":\"υ\",\"ϋ\":\"υ\",\"ΰ\":\"υ\",\"ω\":\"ω\",\"ς\":\"σ\"}}),b.define(\"select2/data/base\",[\"../utils\"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error(\"The `current` method must be defined in child classes.\")},b.prototype.query=function(a,b){throw new Error(\"The `query` method must be defined in child classes.\")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+\"-result-\";return d+=a.generateChars(4),null!=c.id?d+=\"-\"+c.id.toString():d+=\"-\"+a.generateChars(4),d},b}),b.define(\"select2/data/select\",[\"./base\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(\":selected\").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is(\"option\"))return a.element.selected=!0,void this.$element.trigger(\"change\");if(this.$element.prop(\"multiple\"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")});else{var d=a.id;this.$element.val(d),this.$element.trigger(\"change\")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop(\"multiple\")){if(a.selected=!1,c(a.element).is(\"option\"))return a.element.selected=!1,void this.$element.trigger(\"change\");this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")})}},d.prototype.bind=function(a,b){var c=this;this.container=a,a.on(\"select\",function(a){c.select(a.data)}),a.on(\"unselect\",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find(\"*\").each(function(){c.removeData(this,\"data\")})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this);if(b.is(\"option\")||b.is(\"optgroup\")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement(\"optgroup\"),b.label=a.text):(b=document.createElement(\"option\"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),void 0!==a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,\"data\",e),d},d.prototype.item=function(a){var b={};if(null!=(b=c.data(a[0],\"data\")))return b;if(a.is(\"option\"))b={id:a.val(),text:a.text(),disabled:a.prop(\"disabled\"),selected:a.prop(\"selected\"),title:a.prop(\"title\")};else if(a.is(\"optgroup\")){b={text:a.prop(\"label\"),children:[],title:a.prop(\"title\")};for(var d=a.children(\"option\"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],\"data\",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:\"\"},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){return this.options.get(\"matcher\")(a,b)},d}),b.define(\"select2/data/array\",[\"./select\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){var c=b.get(\"data\")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find(\"option\").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find(\"option\"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define(\"select2/data/ajax\",[\"./array\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get(\"ajax\")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get(\"debug\")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error(\"Select2: The AJAX results did not return an array in the `results` key of the response.\")),b(f)},function(){d.status&&\"0\"===d.status||e.trigger(\"results:message\",{message:\"errorLoading\"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:\"GET\"},this.ajaxOptions);\"function\"==typeof f.url&&(f.url=f.url.call(this.$element,a)),\"function\"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define(\"select2/data/tags\",[\"jquery\"],function(a){function b(b,c,d){var e=d.get(\"tags\"),f=d.get(\"createTag\");void 0!==f&&(this.createTag=f);var g=d.get(\"insertTag\");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0);if((i.text||\"\").toUpperCase()===(b.term||\"\").toUpperCase()||j)return!f&&(a.data=g,void c(a))}if(f)return!0;var k=e.createTag(b);if(null!=k){var l=e.option(k);l.attr(\"data-select2-tag\",!0),e.addOptions([l]),e.insertTag(g,k)}a.results=g,c(a)}var e=this;if(this._removeOldTags(),null==b.term||null!=b.page)return void a.call(this,b,c);a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return\"\"===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){this._lastTag;this.$element.find(\"option[data-select2-tag]\").each(function(){this.selected||a(this).remove()})},b}),b.define(\"select2/data/tokenizer\",[\"jquery\"],function(a){function b(a,b,c){var d=c.get(\"tokenizer\");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(\".select2-search__field\")},b.prototype.query=function(b,c,d){function e(b){var c=g._normalizeItem(b);if(!g.$element.find(\"option\").filter(function(){return a(this).val()===c.id}).length){var d=g.option(c);d.attr(\"data-select2-tag\",!0),g._removeOldTags(),g.addOptions([d])}f(c)}function f(a){g.trigger(\"select\",{data:a})}var g=this;c.term=c.term||\"\";var h=this.tokenizer(c,this.options,e);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get(\"tokenSeparators\")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||\"\",h=0):h++}else h++}return{term:g}},b}),b.define(\"select2/data/minimumInputLength\",[],function(){function a(a,b,c){this.minimumInputLength=c.get(\"minimumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||\"\",b.term.length<this.minimumInputLength)return void this.trigger(\"results:message\",{message:\"inputTooShort\",args:{minimum:this.minimumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define(\"select2/data/maximumInputLength\",[],function(){function a(a,b,c){this.maximumInputLength=c.get(\"maximumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){if(b.term=b.term||\"\",this.maximumInputLength>0&&b.term.length>this.maximumInputLength)return void this.trigger(\"results:message\",{message:\"inputTooLong\",args:{maximum:this.maximumInputLength,input:b.term,params:b}});a.call(this,b,c)},a}),b.define(\"select2/data/maximumSelectionLength\",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get(\"maximumSelectionLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;if(d.maximumSelectionLength>0&&f>=d.maximumSelectionLength)return void d.trigger(\"results:message\",{message:\"maximumSelected\",args:{maximum:d.maximumSelectionLength}});a.call(d,b,c)})},a}),b.define(\"select2/dropdown\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class=\"select2-dropdown\"><span class=\"select2-results\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define(\"select2/dropdown/search\",[\"jquery\",\"../utils\"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class=\"select2-search select2-search--dropdown\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"none\" spellcheck=\"false\" role=\"textbox\" /></span>');return this.$searchContainer=d,this.$search=d.find(\"input\"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on(\"keydown\",function(a){e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on(\"input\",function(b){a(this).off(\"keyup\")}),this.$search.on(\"keyup input\",function(a){e.handleSearch(a)}),c.on(\"open\",function(){e.$search.attr(\"tabindex\",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on(\"close\",function(){e.$search.attr(\"tabindex\",-1),e.$search.val(\"\")}),c.on(\"focus\",function(){c.isOpen()||e.$search.focus()}),c.on(\"results:all\",function(a){if(null==a.query.term||\"\"===a.query.term){e.showSearch(a)?e.$searchContainer.removeClass(\"select2-search--hide\"):e.$searchContainer.addClass(\"select2-search--hide\")}})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger(\"query\",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define(\"select2/dropdown/hidePlaceholder\",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define(\"select2/dropdown/infiniteScroll\",[\"jquery\"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on(\"query\",function(a){e.lastParams=a,e.loading=!0}),c.on(\"query:append\",function(a){e.lastParams=a,e.loading=!0}),this.$results.on(\"scroll\",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){e.$results.offset().top+e.$results.outerHeight(!1)+50>=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger(\"query:append\",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class=\"select2-results__option select2-results__option--load-more\"role=\"treeitem\" aria-disabled=\"true\"></li>'),c=this.options.get(\"translations\").get(\"loadingMore\");return b.html(c(this.lastParams)),b},b}),b.define(\"select2/dropdown/attachBody\",[\"jquery\",\"../utils\"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get(\"dropdownParent\")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on(\"open\",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on(\"results:all\",function(){d._positionDropdown(),d._resizeDropdown()}),b.on(\"results:append\",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on(\"close\",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on(\"mousedown\",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr(\"class\",c.attr(\"class\")),b.removeClass(\"select2\"),b.addClass(\"select2-container--open\"),b.css({position:\"absolute\",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a(\"<span></span>\"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f=\"scroll.select2.\"+d.id,g=\"resize.select2.\"+d.id,h=\"orientationchange.select2.\"+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){a(this).data(\"select2-scroll-position\",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(b){var c=a(this).data(\"select2-scroll-position\");a(this).scrollTop(c.y)}),a(window).on(f+\" \"+g+\" \"+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e=\"scroll.select2.\"+d.id,f=\"resize.select2.\"+d.id,g=\"orientationchange.select2.\"+d.id;this.$container.parents().filter(b.hasScroll).off(e),a(window).off(e+\" \"+f+\" \"+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass(\"select2-dropdown--above\"),d=this.$dropdown.hasClass(\"select2-dropdown--below\"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;\"static\"===m.css(\"position\")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e=\"below\"),k||!j||c?!j&&k&&c&&(e=\"below\"):e=\"above\",(\"above\"==e||c&&\"below\"!==e)&&(l.top=g.top-n.top-h.height),null!=e&&(this.$dropdown.removeClass(\"select2-dropdown--below select2-dropdown--above\").addClass(\"select2-dropdown--\"+e),this.$container.removeClass(\"select2-container--below select2-container--above\").addClass(\"select2-container--\"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+\"px\"};this.options.get(\"dropdownAutoWidth\")&&(a.minWidth=a.width,a.position=\"relative\",a.width=\"auto\"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define(\"select2/dropdown/minimumResultsForSearch\",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get(\"minimumResultsForSearch\"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(a(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define(\"select2/dropdown/selectOnClose\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"close\",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;if(\"select\"===c._type||\"unselect\"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data(\"data\");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger(\"select\",{data:e})}},a}),b.define(\"select2/dropdown/closeOnSelect\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"select\",function(a){d._selectTriggered(a)}),b.on(\"unselect\",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger(\"close\",{originalEvent:c,originalSelect2Event:b})},a}),b.define(\"select2/i18n/en\",[],function(){return{errorLoading:function(){return\"The results could not be loaded.\"},inputTooLong:function(a){var b=a.input.length-a.maximum,c=\"Please delete \"+b+\" character\";return 1!=b&&(c+=\"s\"),c},inputTooShort:function(a){return\"Please enter \"+(a.minimum-a.input.length)+\" or more characters\"},loadingMore:function(){return\"Loading more results…\"},maximumSelected:function(a){var b=\"You can only select \"+a.maximum+\" item\";return 1!=a.maximum&&(b+=\"s\"),b},noResults:function(){return\"No results found\"},searching:function(){return\"Searching…\"}}}),b.define(\"select2/defaults\",[\"jquery\",\"require\",\"./results\",\"./selection/single\",\"./selection/multiple\",\"./selection/placeholder\",\"./selection/allowClear\",\"./selection/search\",\"./selection/eventRelay\",\"./utils\",\"./translation\",\"./diacritics\",\"./data/select\",\"./data/array\",\"./data/ajax\",\"./data/tags\",\"./data/tokenizer\",\"./data/minimumInputLength\",\"./data/maximumInputLength\",\"./data/maximumSelectionLength\",\"./dropdown\",\"./dropdown/search\",\"./dropdown/hidePlaceholder\",\"./dropdown/infiniteScroll\",\"./dropdown/attachBody\",\"./dropdown/minimumResultsForSearch\",\"./dropdown/selectOnClose\",\"./dropdown/closeOnSelect\",\"./i18n/en\"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){if(l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),null==l.tokenSeparators&&null==l.tokenizer||(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+\"compat/query\");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+\"compat/initSelection\");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+\"compat/dropdownCss\");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+\"compat/containerCss\");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if(\"string\"==typeof l.language)if(l.language.indexOf(\"-\")>0){var H=l.language.split(\"-\"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push(\"en\");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(a){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(a){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for \"'+M+'\" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var O=k.loadPath(this.defaults.amdLanguageBase+\"en\"),P=new k(l.language);P.extend(O),l.translations=P}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\\u0000-\\u007E]/g,b)}function c(d,e){if(\"\"===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){null==c(d,e.children[g])&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var h=b(e.text).toUpperCase(),i=b(d.term).toUpperCase();return h.indexOf(i)>-1?e:null}this.defaults={amdBase:\"./\",amdLanguageBase:\"./i18n/\",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:\"default\",width:\"resolve\"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)},new D}),b.define(\"select2/options\",[\"require\",\"jquery\",\"./defaults\",\"./utils\"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is(\"input\")){var f=a(this.get(\"amdBase\")+\"compat/inputData\");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=[\"select2\"];null==this.options.multiple&&(this.options.multiple=a.prop(\"multiple\")),null==this.options.disabled&&(this.options.disabled=a.prop(\"disabled\")),null==this.options.language&&(a.prop(\"lang\")?this.options.language=a.prop(\"lang\").toLowerCase():a.closest(\"[lang]\").prop(\"lang\")&&(this.options.language=a.closest(\"[lang]\").prop(\"lang\"))),null==this.options.dir&&(a.prop(\"dir\")?this.options.dir=a.prop(\"dir\"):a.closest(\"[dir]\").prop(\"dir\")?this.options.dir=a.closest(\"[dir]\").prop(\"dir\"):this.options.dir=\"ltr\"),a.prop(\"disabled\",this.options.disabled),a.prop(\"multiple\",this.options.multiple),a.data(\"select2Tags\")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags=\"true\"` attributes and will be removed in future versions of Select2.'),a.data(\"data\",a.data(\"select2Tags\")),a.data(\"tags\",!0)),a.data(\"ajaxUrl\")&&(this.options.debug&&window.console&&console.warn&&console.warn(\"Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.\"),a.attr(\"ajax--url\",a.data(\"ajaxUrl\")),a.data(\"ajax--url\",a.data(\"ajaxUrl\")));var e={};e=b.fn.jquery&&\"1.\"==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define(\"select2/core\",[\"jquery\",\"./options\",\"./utils\",\"./keys\"],function(a,b,c,d){var e=function(a,c){null!=a.data(\"select2\")&&a.data(\"select2\").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr(\"tabindex\")||0;a.data(\"old-tabindex\",d),a.attr(\"tabindex\",\"-1\");var f=this.options.get(\"dataAdapter\");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get(\"selectionAdapter\");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get(\"dropdownAdapter\");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get(\"resultsAdapter\");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger(\"selection:update\",{data:a})}),a.addClass(\"select2-hidden-accessible\"),a.attr(\"aria-hidden\",\"true\"),this._syncAttributes(),a.data(\"select2\",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b=\"\";return b=null!=a.attr(\"id\")?a.attr(\"id\"):null!=a.attr(\"name\")?a.attr(\"name\")+\"-\"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\\.|\\[|\\]|,)/g,\"\"),b=\"select2-\"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get(\"width\"));null!=b&&a.css(\"width\",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(\"resolve\"==b){var d=this._resolveWidth(a,\"style\");return null!=d?d:this._resolveWidth(a,\"element\")}if(\"element\"==b){var e=a.outerWidth(!1);return e<=0?\"auto\":e+\"px\"}if(\"style\"==b){var f=a.attr(\"style\");if(\"string\"!=typeof f)return null;for(var g=f.split(\";\"),h=0,i=g.length;h<i;h+=1){var j=g[h].replace(/\\s/g,\"\"),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on(\"change.select2\",function(){b.dataAdapter.current(function(a){b.trigger(\"selection:update\",{data:a})})}),this.$element.on(\"focus.select2\",function(a){b.trigger(\"focus\",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent(\"onpropertychange\",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener(\"DOMAttrModified\",b._syncA,!1),this.$element[0].addEventListener(\"DOMNodeInserted\",b._syncS,!1),this.$element[0].addEventListener(\"DOMNodeRemoved\",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=[\"toggle\",\"focus\"];this.selection.on(\"toggle\",function(){b.toggleDropdown()}),this.selection.on(\"focus\",function(a){b.focus(a)}),this.selection.on(\"*\",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on(\"open\",function(){a.$container.addClass(\"select2-container--open\")}),this.on(\"close\",function(){a.$container.removeClass(\"select2-container--open\")}),this.on(\"enable\",function(){a.$container.removeClass(\"select2-container--disabled\")}),this.on(\"disable\",function(){a.$container.addClass(\"select2-container--disabled\")}),this.on(\"blur\",function(){a.$container.removeClass(\"select2-container--focus\")}),this.on(\"query\",function(b){a.isOpen()||a.trigger(\"open\",{}),this.dataAdapter.query(b,function(c){a.trigger(\"results:all\",{data:c,query:b})})}),this.on(\"query:append\",function(b){this.dataAdapter.query(b,function(c){a.trigger(\"results:append\",{data:c,query:b})})}),this.on(\"keypress\",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger(\"results:select\",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger(\"results:toggle\",{}),b.preventDefault()):c===d.UP?(a.trigger(\"results:previous\",{}),b.preventDefault()):c===d.DOWN&&(a.trigger(\"results:next\",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set(\"disabled\",this.$element.prop(\"disabled\")),this.options.get(\"disabled\")?(this.isOpen()&&this.close(),this.trigger(\"disable\",{})):this.trigger(\"enable\",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||\"OPTION\"===a.target.nodeName||\"OPTGROUP\"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(var e=0;e<b.addedNodes.length;e++){var f=b.addedNodes[e];f.selected&&(c=!0)}else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger(\"selection:update\",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:\"opening\",close:\"closing\",select:\"selecting\",unselect:\"unselecting\"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get(\"disabled\")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger(\"query\",{})},e.prototype.close=function(){this.isOpen()&&this.trigger(\"close\",{})},e.prototype.isOpen=function(){return this.$container.hasClass(\"select2-container--open\")},e.prototype.hasFocus=function(){return this.$container.hasClass(\"select2-container--focus\")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass(\"select2-container--focus\"),this.trigger(\"focus\",{}))},e.prototype.enable=function(a){this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"enable\")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop(\"disabled\") instead.'),null!=a&&0!==a.length||(a=[!0]);var b=!a[0];this.$element.prop(\"disabled\",b)},e.prototype.data=function(){this.options.get(\"debug\")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2(\"data\")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"val\")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger(\"change\")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent(\"onpropertychange\",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener(\"DOMAttrModified\",this._syncA,!1),this.$element[0].removeEventListener(\"DOMNodeInserted\",this._syncS,!1),this.$element[0].removeEventListener(\"DOMNodeRemoved\",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(\".select2\"),this.$element.attr(\"tabindex\",this.$element.data(\"old-tabindex\")),this.$element.removeClass(\"select2-hidden-accessible\"),this.$element.attr(\"aria-hidden\",\"false\"),this.$element.removeData(\"select2\"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class=\"select2 select2-container\"><span class=\"selection\"></span><span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$container=b,this.$container.addClass(\"select2-container--\"+this.options.get(\"theme\")),b.data(\"element\",this.$element),b},e}),b.define(\"jquery-mousewheel\",[\"jquery\"],function(a){return a}),b.define(\"jquery.select2\",[\"jquery\",\"jquery-mousewheel\",\"./select2/core\",\"./select2/defaults\"],function(a,b,c,d){if(null==a.fn.select2){var e=[\"open\",\"close\",\"destroy\"];a.fn.select2=function(b){if(\"object\"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if(\"string\"==typeof b){var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data(\"select2\");null==c&&window.console&&console.error&&console.error(\"The select2('\"+b+\"') method was called on an element that is not using Select2.\"),d=c[b].apply(c,f)}),a.inArray(b,e)>-1?this:d}throw new Error(\"Invalid arguments for Select2: \"+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require(\"jquery.select2\");return a.fn.select2.amd=b,c});","/**\r\n * Super simple wysiwyg editor v0.8.9\r\n * https://summernote.org\r\n *\r\n * Copyright 2013- Alan Hong. and other contributors\r\n * summernote may be freely distributed under the MIT license.\r\n *\r\n * Date: 2017-12-25T06:39Z\r\n */\r\n(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery')) :\r\n\ttypeof define === 'function' && define.amd ? define(['jquery'], factory) :\r\n\t(factory(global.jQuery));\r\n}(this, (function ($$1) { 'use strict';\r\n\r\n$$1 = $$1 && $$1.hasOwnProperty('default') ? $$1['default'] : $$1;\r\n\r\nvar Renderer = /** @class */ (function () {\r\n    function Renderer(markup, children, options, callback) {\r\n        this.markup = markup;\r\n        this.children = children;\r\n        this.options = options;\r\n        this.callback = callback;\r\n    }\r\n    Renderer.prototype.render = function ($parent) {\r\n        var $node = $$1(this.markup);\r\n        if (this.options && this.options.contents) {\r\n            $node.html(this.options.contents);\r\n        }\r\n        if (this.options && this.options.className) {\r\n            $node.addClass(this.options.className);\r\n        }\r\n        if (this.options && this.options.data) {\r\n            $$1.each(this.options.data, function (k, v) {\r\n                $node.attr('data-' + k, v);\r\n            });\r\n        }\r\n        if (this.options && this.options.click) {\r\n            $node.on('click', this.options.click);\r\n        }\r\n        if (this.children) {\r\n            var $container_1 = $node.find('.note-children-container');\r\n            this.children.forEach(function (child) {\r\n                child.render($container_1.length ? $container_1 : $node);\r\n            });\r\n        }\r\n        if (this.callback) {\r\n            this.callback($node, this.options);\r\n        }\r\n        if (this.options && this.options.callback) {\r\n            this.options.callback($node);\r\n        }\r\n        if ($parent) {\r\n            $parent.append($node);\r\n        }\r\n        return $node;\r\n    };\r\n    return Renderer;\r\n}());\r\nvar renderer = {\r\n    create: function (markup, callback) {\r\n        return function () {\r\n            var options = typeof arguments[1] === 'object' ? arguments[1] : arguments[0];\r\n            var children = $$1.isArray(arguments[0]) ? arguments[0] : [];\r\n            if (options && options.children) {\r\n                children = options.children;\r\n            }\r\n            return new Renderer(markup, children, options, callback);\r\n        };\r\n    }\r\n};\r\n\r\nvar TooltipUI = /** @class */ (function () {\r\n    function TooltipUI($node, options) {\r\n        this.$node = $node;\r\n        this.options = $.extend({}, {\r\n            title: '',\r\n            target: options.container,\r\n            trigger: 'hover focus',\r\n            placement: 'bottom'\r\n        }, options);\r\n        // create tooltip node\r\n        this.$tooltip = $([\r\n            '<div class=\"note-tooltip in\">',\r\n            '  <div class=\"note-tooltip-arrow\"/>',\r\n            '  <div class=\"note-tooltip-content\"/>',\r\n            '</div>'\r\n        ].join(''));\r\n        // define event\r\n        if (this.options.trigger !== 'manual') {\r\n            var showCallback_1 = this.show.bind(this);\r\n            var hideCallback_1 = this.hide.bind(this);\r\n            var toggleCallback_1 = this.toggle.bind(this);\r\n            this.options.trigger.split(' ').forEach(function (eventName) {\r\n                if (eventName === 'hover') {\r\n                    $node.off('mouseenter mouseleave');\r\n                    $node.on('mouseenter', showCallback_1).on('mouseleave', hideCallback_1);\r\n                }\r\n                else if (eventName === 'click') {\r\n                    $node.on('click', toggleCallback_1);\r\n                }\r\n                else if (eventName === 'focus') {\r\n                    $node.on('focus', showCallback_1).on('blur', hideCallback_1);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    TooltipUI.prototype.show = function () {\r\n        var $node = this.$node;\r\n        var offset = $node.offset();\r\n        var $tooltip = this.$tooltip;\r\n        var title = this.options.title || $node.attr('title') || $node.data('title');\r\n        var placement = this.options.placement || $node.data('placement');\r\n        $tooltip.addClass(placement);\r\n        $tooltip.addClass('in');\r\n        $tooltip.find('.note-tooltip-content').text(title);\r\n        $tooltip.appendTo(this.options.target);\r\n        var nodeWidth = $node.outerWidth();\r\n        var nodeHeight = $node.outerHeight();\r\n        var tooltipWidth = $tooltip.outerWidth();\r\n        var tooltipHeight = $tooltip.outerHeight();\r\n        if (placement === 'bottom') {\r\n            $tooltip.css({\r\n                top: offset.top + nodeHeight,\r\n                left: offset.left + (nodeWidth / 2 - tooltipWidth / 2)\r\n            });\r\n        }\r\n        else if (placement === 'top') {\r\n            $tooltip.css({\r\n                top: offset.top - tooltipHeight,\r\n                left: offset.left + (nodeWidth / 2 - tooltipWidth / 2)\r\n            });\r\n        }\r\n        else if (placement === 'left') {\r\n            $tooltip.css({\r\n                top: offset.top + (nodeHeight / 2 - tooltipHeight / 2),\r\n                left: offset.left - tooltipWidth\r\n            });\r\n        }\r\n        else if (placement === 'right') {\r\n            $tooltip.css({\r\n                top: offset.top + (nodeHeight / 2 - tooltipHeight / 2),\r\n                left: offset.left + nodeWidth\r\n            });\r\n        }\r\n    };\r\n    TooltipUI.prototype.hide = function () {\r\n        this.$tooltip.removeClass('in');\r\n        this.$tooltip.remove();\r\n    };\r\n    TooltipUI.prototype.toggle = function () {\r\n        if (this.$tooltip.hasClass('in')) {\r\n            this.hide();\r\n        }\r\n        else {\r\n            this.show();\r\n        }\r\n    };\r\n    return TooltipUI;\r\n}());\r\n\r\nvar DropdownUI = /** @class */ (function () {\r\n    function DropdownUI($node, options) {\r\n        this.$button = $node;\r\n        this.options = $.extend({}, {\r\n            target: options.container\r\n        }, options);\r\n        this.setEvent();\r\n    }\r\n    DropdownUI.prototype.setEvent = function () {\r\n        this.$button.on('click', this.toggle.bind(this));\r\n    };\r\n    DropdownUI.prototype.clear = function () {\r\n        var $parent = $('.note-btn-group.open');\r\n        $parent.find('.note-btn.active').removeClass('active');\r\n        $parent.removeClass('open');\r\n    };\r\n    DropdownUI.prototype.show = function () {\r\n        this.$button.addClass('active');\r\n        this.$button.parent().addClass('open');\r\n        var $dropdown = this.$button.next();\r\n        var offset = $dropdown.offset();\r\n        var width = $dropdown.outerWidth();\r\n        var windowWidth = $(window).width();\r\n        var targetMarginRight = parseFloat($(this.options.target).css('margin-right'));\r\n        if (offset.left + width > windowWidth - targetMarginRight) {\r\n            $dropdown.css('margin-left', windowWidth - targetMarginRight - (offset.left + width));\r\n        }\r\n        else {\r\n            $dropdown.css('margin-left', '');\r\n        }\r\n    };\r\n    DropdownUI.prototype.hide = function () {\r\n        this.$button.removeClass('active');\r\n        this.$button.parent().removeClass('open');\r\n    };\r\n    DropdownUI.prototype.toggle = function () {\r\n        var isOpened = this.$button.parent().hasClass('open');\r\n        this.clear();\r\n        if (isOpened) {\r\n            this.hide();\r\n        }\r\n        else {\r\n            this.show();\r\n        }\r\n    };\r\n    return DropdownUI;\r\n}());\r\n$(document).on('click', function (e) {\r\n    if (!$(e.target).closest('.note-btn-group').length) {\r\n        $('.note-btn-group.open').removeClass('open');\r\n    }\r\n});\r\n$(document).on('click.note-dropdown-menu', function (e) {\r\n    $(e.target).closest('.note-dropdown-menu').parent().removeClass('open');\r\n});\r\n\r\nvar ModalUI = /** @class */ (function () {\r\n    function ModalUI($node, options) {\r\n        this.options = $.extend({}, {\r\n            target: options.container || 'body'\r\n        }, options);\r\n        this.$modal = $node;\r\n        this.$backdrop = $('<div class=\"note-modal-backdrop\" />');\r\n    }\r\n    ModalUI.prototype.show = function () {\r\n        if (this.options.target === 'body') {\r\n            this.$backdrop.css('position', 'fixed');\r\n            this.$modal.css('position', 'fixed');\r\n        }\r\n        else {\r\n            this.$backdrop.css('position', 'absolute');\r\n            this.$modal.css('position', 'absolute');\r\n        }\r\n        this.$backdrop.appendTo(this.options.target).show();\r\n        this.$modal.appendTo(this.options.target).addClass('open').show();\r\n        this.$modal.trigger('note.modal.show');\r\n        this.$modal.off('click', '.close').on('click', '.close', this.hide.bind(this));\r\n    };\r\n    ModalUI.prototype.hide = function () {\r\n        this.$modal.removeClass('open').hide();\r\n        this.$backdrop.hide();\r\n        this.$modal.trigger('note.modal.hide');\r\n    };\r\n    return ModalUI;\r\n}());\r\n\r\nvar editor = renderer.create('<div class=\"note-editor note-frame\"/>');\r\nvar toolbar = renderer.create('<div class=\"note-toolbar\"/>');\r\nvar editingArea = renderer.create('<div class=\"note-editing-area\"/>');\r\nvar codable = renderer.create('<textarea class=\"note-codable\"/>');\r\nvar editable = renderer.create('<div class=\"note-editable\" contentEditable=\"true\"/>');\r\nvar statusbar = renderer.create([\r\n    '<div class=\"note-statusbar\">',\r\n    '  <div class=\"note-resizebar\">',\r\n    '    <div class=\"note-icon-bar\"/>',\r\n    '    <div class=\"note-icon-bar\"/>',\r\n    '    <div class=\"note-icon-bar\"/>',\r\n    '  </div>',\r\n    '</div>'\r\n].join(''));\r\nvar airEditor = renderer.create('<div class=\"note-editor\"/>');\r\nvar airEditable = renderer.create('<div class=\"note-editable\" contentEditable=\"true\"/>');\r\nvar buttonGroup = renderer.create('<div class=\"note-btn-group\">');\r\nvar button = renderer.create('<button type=\"button\" class=\"note-btn\">', function ($node, options) {\r\n    // set button type\r\n    if (options && options.tooltip) {\r\n        $node.data('_lite_tooltip', new TooltipUI($node, {\r\n            title: options.tooltip,\r\n            container: options.container\r\n        }));\r\n    }\r\n    if (options.contents) {\r\n        $node.html(options.contents);\r\n    }\r\n    if (options && options.data && options.data.toggle === 'dropdown') {\r\n        $node.data('_lite_dropdown', new DropdownUI($node, {\r\n            container: options.container\r\n        }));\r\n    }\r\n});\r\nvar dropdown = renderer.create('<div class=\"note-dropdown-menu\">', function ($node, options) {\r\n    var markup = $.isArray(options.items) ? options.items.map(function (item) {\r\n        var value = (typeof item === 'string') ? item : (item.value || '');\r\n        var content = options.template ? options.template(item) : item;\r\n        var $temp = $('<a class=\"note-dropdown-item\" href=\"#\" data-value=\"' + value + '\"></a>');\r\n        $temp.html(content).data('item', item);\r\n        return $temp;\r\n    }) : options.items;\r\n    $node.html(markup);\r\n    $node.on('click', '> .note-dropdown-item', function (e) {\r\n        var $a = $(this);\r\n        var item = $a.data('item');\r\n        var value = $a.data('value');\r\n        if (item.click) {\r\n            item.click($a);\r\n        }\r\n        else if (options.itemClick) {\r\n            options.itemClick(e, item, value);\r\n        }\r\n    });\r\n});\r\nvar dropdownCheck = renderer.create('<div class=\"note-dropdown-menu note-check\">', function ($node, options) {\r\n    var markup = $.isArray(options.items) ? options.items.map(function (item) {\r\n        var value = (typeof item === 'string') ? item : (item.value || '');\r\n        var content = options.template ? options.template(item) : item;\r\n        var $temp = $('<a class=\"note-dropdown-item\" href=\"#\" data-value=\"' + value + '\"></a>');\r\n        $temp.html([icon(options.checkClassName), ' ', content]).data('item', item);\r\n        return $temp;\r\n    }) : options.items;\r\n    $node.html(markup);\r\n    $node.on('click', '> .note-dropdown-item', function (e) {\r\n        var $a = $(this);\r\n        var item = $a.data('item');\r\n        var value = $a.data('value');\r\n        if (item.click) {\r\n            item.click($a);\r\n        }\r\n        else if (options.itemClick) {\r\n            options.itemClick(e, item, value);\r\n        }\r\n    });\r\n});\r\nvar dropdownButtonContents = function (contents, options) {\r\n    return contents + ' ' + icon(options.icons.caret, 'span');\r\n};\r\nvar dropdownButton = function (opt, callback) {\r\n    return buttonGroup([\r\n        button({\r\n            className: 'dropdown-toggle',\r\n            contents: opt.title + ' ' + icon('note-icon-caret'),\r\n            tooltip: opt.tooltip,\r\n            data: {\r\n                toggle: 'dropdown'\r\n            }\r\n        }),\r\n        dropdown({\r\n            className: opt.className,\r\n            items: opt.items,\r\n            template: opt.template,\r\n            itemClick: opt.itemClick\r\n        })\r\n    ], { callback: callback }).render();\r\n};\r\nvar dropdownCheckButton = function (opt, callback) {\r\n    return buttonGroup([\r\n        button({\r\n            className: 'dropdown-toggle',\r\n            contents: opt.title + ' ' + icon('note-icon-caret'),\r\n            tooltip: opt.tooltip,\r\n            data: {\r\n                toggle: 'dropdown'\r\n            }\r\n        }),\r\n        dropdownCheck({\r\n            className: opt.className,\r\n            checkClassName: opt.checkClassName,\r\n            items: opt.items,\r\n            template: opt.template,\r\n            itemClick: opt.itemClick\r\n        })\r\n    ], { callback: callback }).render();\r\n};\r\nvar paragraphDropdownButton = function (opt) {\r\n    return buttonGroup([\r\n        button({\r\n            className: 'dropdown-toggle',\r\n            contents: opt.title + ' ' + icon('note-icon-caret'),\r\n            tooltip: opt.tooltip,\r\n            data: {\r\n                toggle: 'dropdown'\r\n            }\r\n        }),\r\n        dropdown([\r\n            buttonGroup({\r\n                className: 'note-align',\r\n                children: opt.items[0]\r\n            }),\r\n            buttonGroup({\r\n                className: 'note-list',\r\n                children: opt.items[1]\r\n            })\r\n        ])\r\n    ]).render();\r\n};\r\nvar tableMoveHandler = function (event, col, row) {\r\n    var PX_PER_EM = 18;\r\n    var $picker = $(event.target.parentNode); // target is mousecatcher\r\n    var $dimensionDisplay = $picker.next();\r\n    var $catcher = $picker.find('.note-dimension-picker-mousecatcher');\r\n    var $highlighted = $picker.find('.note-dimension-picker-highlighted');\r\n    var $unhighlighted = $picker.find('.note-dimension-picker-unhighlighted');\r\n    var posOffset;\r\n    // HTML5 with jQuery - e.offsetX is undefined in Firefox\r\n    if (event.offsetX === undefined) {\r\n        var posCatcher = $(event.target).offset();\r\n        posOffset = {\r\n            x: event.pageX - posCatcher.left,\r\n            y: event.pageY - posCatcher.top\r\n        };\r\n    }\r\n    else {\r\n        posOffset = {\r\n            x: event.offsetX,\r\n            y: event.offsetY\r\n        };\r\n    }\r\n    var dim = {\r\n        c: Math.ceil(posOffset.x / PX_PER_EM) || 1,\r\n        r: Math.ceil(posOffset.y / PX_PER_EM) || 1\r\n    };\r\n    $highlighted.css({ width: dim.c + 'em', height: dim.r + 'em' });\r\n    $catcher.data('value', dim.c + 'x' + dim.r);\r\n    if (dim.c > 3 && dim.c < col) {\r\n        $unhighlighted.css({ width: dim.c + 1 + 'em' });\r\n    }\r\n    if (dim.r > 3 && dim.r < row) {\r\n        $unhighlighted.css({ height: dim.r + 1 + 'em' });\r\n    }\r\n    $dimensionDisplay.html(dim.c + ' x ' + dim.r);\r\n};\r\nvar tableDropdownButton = function (opt) {\r\n    return buttonGroup([\r\n        button({\r\n            className: 'dropdown-toggle',\r\n            contents: opt.title + ' ' + icon('note-icon-caret'),\r\n            tooltip: opt.tooltip,\r\n            data: {\r\n                toggle: 'dropdown'\r\n            }\r\n        }),\r\n        dropdown({\r\n            className: 'note-table',\r\n            items: [\r\n                '<div class=\"note-dimension-picker\">',\r\n                '  <div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"/>',\r\n                '  <div class=\"note-dimension-picker-highlighted\"/>',\r\n                '  <div class=\"note-dimension-picker-unhighlighted\"/>',\r\n                '</div>',\r\n                '<div class=\"note-dimension-display\">1 x 1</div>'\r\n            ].join('')\r\n        })\r\n    ], {\r\n        callback: function ($node) {\r\n            var $catcher = $node.find('.note-dimension-picker-mousecatcher');\r\n            $catcher.css({\r\n                width: opt.col + 'em',\r\n                height: opt.row + 'em'\r\n            })\r\n                .mousedown(opt.itemClick)\r\n                .mousemove(function (e) {\r\n                tableMoveHandler(e, opt.col, opt.row);\r\n            });\r\n        }\r\n    }).render();\r\n};\r\nvar palette = renderer.create('<div class=\"note-color-palette\"/>', function ($node, options) {\r\n    var contents = [];\r\n    for (var row = 0, rowSize = options.colors.length; row < rowSize; row++) {\r\n        var eventName = options.eventName;\r\n        var colors = options.colors[row];\r\n        var buttons = [];\r\n        for (var col = 0, colSize = colors.length; col < colSize; col++) {\r\n            var color = colors[col];\r\n            buttons.push([\r\n                '<button type=\"button\" class=\"note-btn note-color-btn\"',\r\n                'style=\"background-color:', color, '\" ',\r\n                'data-event=\"', eventName, '\" ',\r\n                'data-value=\"', color, '\" ',\r\n                'title=\"', color, '\" ',\r\n                'data-toggle=\"button\" tabindex=\"-1\"></button>'\r\n            ].join(''));\r\n        }\r\n        contents.push('<div class=\"note-color-row\">' + buttons.join('') + '</div>');\r\n    }\r\n    $node.html(contents.join(''));\r\n    $node.find('.note-color-btn').each(function () {\r\n        $(this).data('_lite_tooltip', new TooltipUI($(this), {\r\n            container: options.container\r\n        }));\r\n    });\r\n});\r\nvar colorDropdownButton = function (opt, type) {\r\n    return buttonGroup({\r\n        className: 'note-color',\r\n        children: [\r\n            button({\r\n                className: 'note-current-color-button',\r\n                contents: opt.title,\r\n                tooltip: opt.lang.color.recent,\r\n                click: opt.currentClick,\r\n                callback: function ($button) {\r\n                    var $recentColor = $button.find('.note-recent-color');\r\n                    if (type !== 'foreColor') {\r\n                        $recentColor.css('background-color', '#FFFF00');\r\n                        $button.attr('data-backColor', '#FFFF00');\r\n                    }\r\n                }\r\n            }),\r\n            button({\r\n                className: 'dropdown-toggle',\r\n                contents: icon('note-icon-caret'),\r\n                tooltip: opt.lang.color.more,\r\n                data: {\r\n                    toggle: 'dropdown'\r\n                }\r\n            }),\r\n            dropdown({\r\n                items: [\r\n                    '<div>',\r\n                    '<div class=\"note-btn-group btn-background-color\">',\r\n                    '  <div class=\"note-palette-title\">' + opt.lang.color.background + '</div>',\r\n                    '  <div>',\r\n                    '<button type=\"button\" class=\"note-color-reset note-btn note-btn-block\" ' +\r\n                        ' data-event=\"backColor\" data-value=\"inherit\">',\r\n                    opt.lang.color.transparent,\r\n                    '    </button>',\r\n                    '  </div>',\r\n                    '  <div class=\"note-holder\" data-event=\"backColor\"/>',\r\n                    '</div>',\r\n                    '<div class=\"note-btn-group btn-foreground-color\">',\r\n                    '  <div class=\"note-palette-title\">' + opt.lang.color.foreground + '</div>',\r\n                    '  <div>',\r\n                    '<button type=\"button\" class=\"note-color-reset note-btn note-btn-block\" ' +\r\n                        ' data-event=\"removeFormat\" data-value=\"foreColor\">',\r\n                    opt.lang.color.resetToDefault,\r\n                    '    </button>',\r\n                    '  </div>',\r\n                    '  <div class=\"note-holder\" data-event=\"foreColor\"/>',\r\n                    '</div>',\r\n                    '</div>'\r\n                ].join(''),\r\n                callback: function ($dropdown) {\r\n                    $dropdown.find('.note-holder').each(function () {\r\n                        var $holder = $(this);\r\n                        $holder.append(palette({\r\n                            colors: opt.colors,\r\n                            eventName: $holder.data('event')\r\n                        }).render());\r\n                    });\r\n                    if (type === 'fore') {\r\n                        $dropdown.find('.btn-background-color').hide();\r\n                        $dropdown.css({ 'min-width': '210px' });\r\n                    }\r\n                    else if (type === 'back') {\r\n                        $dropdown.find('.btn-foreground-color').hide();\r\n                        $dropdown.css({ 'min-width': '210px' });\r\n                    }\r\n                },\r\n                click: function (event) {\r\n                    var $button = $(event.target);\r\n                    var eventName = $button.data('event');\r\n                    var value = $button.data('value');\r\n                    if (eventName && value) {\r\n                        var key = eventName === 'backColor' ? 'background-color' : 'color';\r\n                        var $color = $button.closest('.note-color').find('.note-recent-color');\r\n                        var $currentButton = $button.closest('.note-color').find('.note-current-color-button');\r\n                        $color.css(key, value);\r\n                        $currentButton.attr('data-' + eventName, value);\r\n                        if (type === 'fore') {\r\n                            opt.itemClick('foreColor', value);\r\n                        }\r\n                        else if (type === 'back') {\r\n                            opt.itemClick('backColor', value);\r\n                        }\r\n                        else {\r\n                            opt.itemClick(eventName, value);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        ]\r\n    }).render();\r\n};\r\nvar dialog = renderer.create('<div class=\"note-modal\" tabindex=\"-1\"/>', function ($node, options) {\r\n    if (options.fade) {\r\n        $node.addClass('fade');\r\n    }\r\n    $node.html([\r\n        '  <div class=\"note-modal-content\">',\r\n        (options.title\r\n            ? '    <div class=\"note-modal-header\">' +\r\n                '      <button type=\"button\" class=\"close\"><i class=\"note-icon-close\"></i></button>' +\r\n                '      <h4 class=\"note-modal-title\">' + options.title + '</h4>' +\r\n                '    </div>' : ''),\r\n        '    <div class=\"note-modal-body\">' + options.body + '</div>',\r\n        (options.footer\r\n            ? '    <div class=\"note-modal-footer\">' + options.footer + '</div>' : ''),\r\n        '  </div>'\r\n    ].join(''));\r\n    $node.data('modal', new ModalUI($node, options));\r\n});\r\nvar videoDialog = function (opt) {\r\n    var body = '<div class=\"note-form-group\">' +\r\n        '<label class=\"note-form-label\">' +\r\n        opt.lang.video.url + ' <small class=\"text-muted\">' +\r\n        opt.lang.video.providers + '</small>' +\r\n        '</label>' +\r\n        '<input class=\"note-video-url note-input\" type=\"text\" />' +\r\n        '</div>';\r\n    var footer = [\r\n        '<button type=\"button\" href=\"#\" class=\"note-btn note-btn-primary note-video-btn disabled\" disabled>',\r\n        opt.lang.video.insert,\r\n        '</button>'\r\n    ].join('');\r\n    return dialog({\r\n        title: opt.lang.video.insert,\r\n        fade: opt.fade,\r\n        body: body,\r\n        footer: footer\r\n    }).render();\r\n};\r\nvar imageDialog = function (opt) {\r\n    var body = '<div class=\"note-form-group note-group-select-from-files\">' +\r\n        '<label class=\"note-form-label\">' + opt.lang.image.selectFromFiles + '</label>' +\r\n        '<input class=\"note-note-image-input note-input\" type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />' +\r\n        opt.imageLimitation +\r\n        '</div>' +\r\n        '<div class=\"note-form-group\" style=\"overflow:auto;\">' +\r\n        '<label class=\"note-form-label\">' + opt.lang.image.url + '</label>' +\r\n        '<input class=\"note-image-url note-input\" type=\"text\" />' +\r\n        '</div>';\r\n    var footer = [\r\n        '<button href=\"#\" type=\"button\" class=\"note-btn note-btn-primary note-btn-large note-image-btn disabled\" disabled>',\r\n        opt.lang.image.insert,\r\n        '</button>'\r\n    ].join('');\r\n    return dialog({\r\n        title: opt.lang.image.insert,\r\n        fade: opt.fade,\r\n        body: body,\r\n        footer: footer\r\n    }).render();\r\n};\r\nvar linkDialog = function (opt) {\r\n    var body = '<div class=\"note-form-group\">' +\r\n        '<label class=\"note-form-label\">' + opt.lang.link.textToDisplay + '</label>' +\r\n        '<input class=\"note-link-text note-input\" type=\"text\" />' +\r\n        '</div>' +\r\n        '<div class=\"note-form-group\">' +\r\n        '<label class=\"note-form-label\">' + opt.lang.link.url + '</label>' +\r\n        '<input class=\"note-link-url note-input\" type=\"text\" value=\"http://\" />' +\r\n        '</div>' +\r\n        (!opt.disableLinkTarget\r\n            ? '<div class=\"checkbox\">' +\r\n                '<label>' + '<input type=\"checkbox\" checked> ' + opt.lang.link.openInNewWindow + '</label>' +\r\n                '</div>' : '');\r\n    var footer = [\r\n        '<button href=\"#\" type=\"button\" class=\"note-btn note-btn-primary note-link-btn disabled\" disabled>',\r\n        opt.lang.link.insert,\r\n        '</button>'\r\n    ].join('');\r\n    return dialog({\r\n        className: 'link-dialog',\r\n        title: opt.lang.link.insert,\r\n        fade: opt.fade,\r\n        body: body,\r\n        footer: footer\r\n    }).render();\r\n};\r\nvar popover = renderer.create([\r\n    '<div class=\"note-popover bottom\">',\r\n    '  <div class=\"note-popover-arrow\"/>',\r\n    '  <div class=\"note-popover-content note-children-container\"/>',\r\n    '</div>'\r\n].join(''), function ($node, options) {\r\n    var direction = typeof options.direction !== 'undefined' ? options.direction : 'bottom';\r\n    $node.addClass(direction).hide();\r\n    if (options.hideArrow) {\r\n        $node.find('.note-popover-arrow').hide();\r\n    }\r\n});\r\nvar checkbox = renderer.create('<div class=\"checkbox\"></div>', function ($node, options) {\r\n    $node.html([\r\n        ' <label' + (options.id ? ' for=\"' + options.id + '\"' : '') + '>',\r\n        ' <input type=\"checkbox\"' + (options.id ? ' id=\"' + options.id + '\"' : ''),\r\n        (options.checked ? ' checked' : '') + '/>',\r\n        (options.text ? options.text : ''),\r\n        '</label>'\r\n    ].join(''));\r\n});\r\nvar icon = function (iconClassName, tagName) {\r\n    tagName = tagName || 'i';\r\n    return '<' + tagName + ' class=\"' + iconClassName + '\"/>';\r\n};\r\nvar ui = {\r\n    editor: editor,\r\n    toolbar: toolbar,\r\n    editingArea: editingArea,\r\n    codable: codable,\r\n    editable: editable,\r\n    statusbar: statusbar,\r\n    airEditor: airEditor,\r\n    airEditable: airEditable,\r\n    buttonGroup: buttonGroup,\r\n    button: button,\r\n    dropdown: dropdown,\r\n    dropdownCheck: dropdownCheck,\r\n    dropdownButton: dropdownButton,\r\n    dropdownButtonContents: dropdownButtonContents,\r\n    dropdownCheckButton: dropdownCheckButton,\r\n    paragraphDropdownButton: paragraphDropdownButton,\r\n    tableDropdownButton: tableDropdownButton,\r\n    colorDropdownButton: colorDropdownButton,\r\n    palette: palette,\r\n    dialog: dialog,\r\n    videoDialog: videoDialog,\r\n    imageDialog: imageDialog,\r\n    linkDialog: linkDialog,\r\n    popover: popover,\r\n    checkbox: checkbox,\r\n    icon: icon,\r\n    toggleBtn: function ($btn, isEnable) {\r\n        $btn.toggleClass('disabled', !isEnable);\r\n        $btn.attr('disabled', !isEnable);\r\n    },\r\n    toggleBtnActive: function ($btn, isActive) {\r\n        $btn.toggleClass('active', isActive);\r\n    },\r\n    check: function ($dom, value) {\r\n        $dom.find('.checked').removeClass('checked');\r\n        $dom.find('[data-value=\"' + value + '\"]').addClass('checked');\r\n    },\r\n    onDialogShown: function ($dialog, handler) {\r\n        $dialog.one('note.modal.show', handler);\r\n    },\r\n    onDialogHidden: function ($dialog, handler) {\r\n        $dialog.one('note.modal.hide', handler);\r\n    },\r\n    showDialog: function ($dialog) {\r\n        $dialog.data('modal').show();\r\n    },\r\n    hideDialog: function ($dialog) {\r\n        $dialog.data('modal').hide();\r\n    },\r\n    /**\r\n     * get popover content area\r\n     *\r\n     * @param $popover\r\n     * @returns {*}\r\n     */\r\n    getPopoverContent: function ($popover) {\r\n        return $popover.find('.note-popover-content');\r\n    },\r\n    /**\r\n     * get dialog's body area\r\n     *\r\n     * @param $dialog\r\n     * @returns {*}\r\n     */\r\n    getDialogBody: function ($dialog) {\r\n        return $dialog.find('.note-modal-body');\r\n    },\r\n    createLayout: function ($note, options) {\r\n        var $editor = (options.airMode ? ui.airEditor([\r\n            ui.editingArea([\r\n                ui.airEditable()\r\n            ])\r\n        ]) : ui.editor([\r\n            ui.toolbar(),\r\n            ui.editingArea([\r\n                ui.codable(),\r\n                ui.editable()\r\n            ]),\r\n            ui.statusbar()\r\n        ])).render();\r\n        $editor.insertAfter($note);\r\n        return {\r\n            note: $note,\r\n            editor: $editor,\r\n            toolbar: $editor.find('.note-toolbar'),\r\n            editingArea: $editor.find('.note-editing-area'),\r\n            editable: $editor.find('.note-editable'),\r\n            codable: $editor.find('.note-codable'),\r\n            statusbar: $editor.find('.note-statusbar')\r\n        };\r\n    },\r\n    removeLayout: function ($note, layoutInfo) {\r\n        $note.html(layoutInfo.editable.html());\r\n        layoutInfo.editor.remove();\r\n        $note.off('summernote'); // remove summernote custom event\r\n        $note.show();\r\n    }\r\n};\r\n\r\n$$1.summernote = $$1.summernote || {\r\n    lang: {}\r\n};\r\n$$1.extend($$1.summernote.lang, {\r\n    'en-US': {\r\n        font: {\r\n            bold: 'Bold',\r\n            italic: 'Italic',\r\n            underline: 'Underline',\r\n            clear: 'Remove Font Style',\r\n            height: 'Line Height',\r\n            name: 'Font Family',\r\n            strikethrough: 'Strikethrough',\r\n            subscript: 'Subscript',\r\n            superscript: 'Superscript',\r\n            size: 'Font Size'\r\n        },\r\n        image: {\r\n            image: 'Picture',\r\n            insert: 'Insert Image',\r\n            resizeFull: 'Resize Full',\r\n            resizeHalf: 'Resize Half',\r\n            resizeQuarter: 'Resize Quarter',\r\n            floatLeft: 'Float Left',\r\n            floatRight: 'Float Right',\r\n            floatNone: 'Float None',\r\n            shapeRounded: 'Shape: Rounded',\r\n            shapeCircle: 'Shape: Circle',\r\n            shapeThumbnail: 'Shape: Thumbnail',\r\n            shapeNone: 'Shape: None',\r\n            dragImageHere: 'Drag image or text here',\r\n            dropImage: 'Drop image or Text',\r\n            selectFromFiles: 'Select from files',\r\n            maximumFileSize: 'Maximum file size',\r\n            maximumFileSizeError: 'Maximum file size exceeded.',\r\n            url: 'Image URL',\r\n            remove: 'Remove Image',\r\n            original: 'Original'\r\n        },\r\n        video: {\r\n            video: 'Video',\r\n            videoLink: 'Video Link',\r\n            insert: 'Insert Video',\r\n            url: 'Video URL',\r\n            providers: '(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)'\r\n        },\r\n        link: {\r\n            link: 'Link',\r\n            insert: 'Insert Link',\r\n            unlink: 'Unlink',\r\n            edit: 'Edit',\r\n            textToDisplay: 'Text to display',\r\n            url: 'To what URL should this link go?',\r\n            openInNewWindow: 'Open in new window'\r\n        },\r\n        table: {\r\n            table: 'Table',\r\n            addRowAbove: 'Add row above',\r\n            addRowBelow: 'Add row below',\r\n            addColLeft: 'Add column left',\r\n            addColRight: 'Add column right',\r\n            delRow: 'Delete row',\r\n            delCol: 'Delete column',\r\n            delTable: 'Delete table'\r\n        },\r\n        hr: {\r\n            insert: 'Insert Horizontal Rule'\r\n        },\r\n        style: {\r\n            style: 'Style',\r\n            p: 'Normal',\r\n            blockquote: 'Quote',\r\n            pre: 'Code',\r\n            h1: 'Header 1',\r\n            h2: 'Header 2',\r\n            h3: 'Header 3',\r\n            h4: 'Header 4',\r\n            h5: 'Header 5',\r\n            h6: 'Header 6'\r\n        },\r\n        lists: {\r\n            unordered: 'Unordered list',\r\n            ordered: 'Ordered list'\r\n        },\r\n        options: {\r\n            help: 'Help',\r\n            fullscreen: 'Full Screen',\r\n            codeview: 'Code View'\r\n        },\r\n        paragraph: {\r\n            paragraph: 'Paragraph',\r\n            outdent: 'Outdent',\r\n            indent: 'Indent',\r\n            left: 'Align left',\r\n            center: 'Align center',\r\n            right: 'Align right',\r\n            justify: 'Justify full'\r\n        },\r\n        color: {\r\n            recent: 'Recent Color',\r\n            more: 'More Color',\r\n            background: 'Background Color',\r\n            foreground: 'Foreground Color',\r\n            transparent: 'Transparent',\r\n            setTransparent: 'Set transparent',\r\n            reset: 'Reset',\r\n            resetToDefault: 'Reset to default'\r\n        },\r\n        shortcut: {\r\n            shortcuts: 'Keyboard shortcuts',\r\n            close: 'Close',\r\n            textFormatting: 'Text formatting',\r\n            action: 'Action',\r\n            paragraphFormatting: 'Paragraph formatting',\r\n            documentStyle: 'Document Style',\r\n            extraKeys: 'Extra keys'\r\n        },\r\n        help: {\r\n            'insertParagraph': 'Insert Paragraph',\r\n            'undo': 'Undoes the last command',\r\n            'redo': 'Redoes the last command',\r\n            'tab': 'Tab',\r\n            'untab': 'Untab',\r\n            'bold': 'Set a bold style',\r\n            'italic': 'Set a italic style',\r\n            'underline': 'Set a underline style',\r\n            'strikethrough': 'Set a strikethrough style',\r\n            'removeFormat': 'Clean a style',\r\n            'justifyLeft': 'Set left align',\r\n            'justifyCenter': 'Set center align',\r\n            'justifyRight': 'Set right align',\r\n            'justifyFull': 'Set full align',\r\n            'insertUnorderedList': 'Toggle unordered list',\r\n            'insertOrderedList': 'Toggle ordered list',\r\n            'outdent': 'Outdent on current paragraph',\r\n            'indent': 'Indent on current paragraph',\r\n            'formatPara': 'Change current block\\'s format as a paragraph(P tag)',\r\n            'formatH1': 'Change current block\\'s format as H1',\r\n            'formatH2': 'Change current block\\'s format as H2',\r\n            'formatH3': 'Change current block\\'s format as H3',\r\n            'formatH4': 'Change current block\\'s format as H4',\r\n            'formatH5': 'Change current block\\'s format as H5',\r\n            'formatH6': 'Change current block\\'s format as H6',\r\n            'insertHorizontalRule': 'Insert horizontal rule',\r\n            'linkDialog.show': 'Show Link Dialog'\r\n        },\r\n        history: {\r\n            undo: 'Undo',\r\n            redo: 'Redo'\r\n        },\r\n        specialChar: {\r\n            specialChar: 'SPECIAL CHARACTERS',\r\n            select: 'Select Special characters'\r\n        }\r\n    }\r\n});\r\n\r\nvar isSupportAmd = typeof define === 'function' && define.amd; // eslint-disable-line\r\n/**\r\n * returns whether font is installed or not.\r\n *\r\n * @param {String} fontName\r\n * @return {Boolean}\r\n */\r\nfunction isFontInstalled(fontName) {\r\n    var testFontName = fontName === 'Comic Sans MS' ? 'Courier New' : 'Comic Sans MS';\r\n    var $tester = $$1('<div>').css({\r\n        position: 'absolute',\r\n        left: '-9999px',\r\n        top: '-9999px',\r\n        fontSize: '200px'\r\n    }).text('mmmmmmmmmwwwwwww').appendTo(document.body);\r\n    var originalWidth = $tester.css('fontFamily', testFontName).width();\r\n    var width = $tester.css('fontFamily', fontName + ',' + testFontName).width();\r\n    $tester.remove();\r\n    return originalWidth !== width;\r\n}\r\nvar userAgent = navigator.userAgent;\r\nvar isMSIE = /MSIE|Trident/i.test(userAgent);\r\nvar browserVersion;\r\nif (isMSIE) {\r\n    var matches = /MSIE (\\d+[.]\\d+)/.exec(userAgent);\r\n    if (matches) {\r\n        browserVersion = parseFloat(matches[1]);\r\n    }\r\n    matches = /Trident\\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(userAgent);\r\n    if (matches) {\r\n        browserVersion = parseFloat(matches[1]);\r\n    }\r\n}\r\nvar isEdge = /Edge\\/\\d+/.test(userAgent);\r\nvar hasCodeMirror = !!window.CodeMirror;\r\nif (!hasCodeMirror && isSupportAmd) {\r\n    // Webpack\r\n    if (typeof __webpack_require__ === 'function') {\r\n        try {\r\n            // If CodeMirror can't be resolved, `require.resolve` will throw an\r\n            // exception and `hasCodeMirror` won't be set to `true`.\r\n            require.resolve('codemirror');\r\n            hasCodeMirror = true;\r\n        }\r\n        catch (e) {\r\n            // do nothing\r\n        }\r\n    }\r\n    else if (typeof require !== 'undefined') {\r\n        // Browserify\r\n        if (typeof require.resolve !== 'undefined') {\r\n            try {\r\n                // If CodeMirror can't be resolved, `require.resolve` will throw an\r\n                // exception and `hasCodeMirror` won't be set to `true`.\r\n                require.resolve('codemirror');\r\n                hasCodeMirror = true;\r\n            }\r\n            catch (e) {\r\n                // do nothing\r\n            }\r\n            // Almond/Require\r\n        }\r\n        else if (typeof require.specified !== 'undefined') {\r\n            hasCodeMirror = require.specified('codemirror');\r\n        }\r\n    }\r\n}\r\nvar isSupportTouch = (('ontouchstart' in window) ||\r\n    (navigator.MaxTouchPoints > 0) ||\r\n    (navigator.msMaxTouchPoints > 0));\r\n// [workaround] IE doesn't have input events for contentEditable\r\n// - see: https://goo.gl/4bfIvA\r\nvar inputEventName = (isMSIE || isEdge) ? 'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted' : 'input';\r\n/**\r\n * @class core.env\r\n *\r\n * Object which check platform and agent\r\n *\r\n * @singleton\r\n * @alternateClassName env\r\n */\r\nvar env = {\r\n    isMac: navigator.appVersion.indexOf('Mac') > -1,\r\n    isMSIE: isMSIE,\r\n    isEdge: isEdge,\r\n    isFF: !isEdge && /firefox/i.test(userAgent),\r\n    isPhantom: /PhantomJS/i.test(userAgent),\r\n    isWebkit: !isEdge && /webkit/i.test(userAgent),\r\n    isChrome: !isEdge && /chrome/i.test(userAgent),\r\n    isSafari: !isEdge && /safari/i.test(userAgent),\r\n    browserVersion: browserVersion,\r\n    jqueryVersion: parseFloat($$1.fn.jquery),\r\n    isSupportAmd: isSupportAmd,\r\n    isSupportTouch: isSupportTouch,\r\n    hasCodeMirror: hasCodeMirror,\r\n    isFontInstalled: isFontInstalled,\r\n    isW3CRangeSupport: !!document.createRange,\r\n    inputEventName: inputEventName\r\n};\r\n\r\n/**\r\n * @class core.func\r\n *\r\n * func utils (for high-order func's arg)\r\n *\r\n * @singleton\r\n * @alternateClassName func\r\n */\r\nfunction eq(itemA) {\r\n    return function (itemB) {\r\n        return itemA === itemB;\r\n    };\r\n}\r\nfunction eq2(itemA, itemB) {\r\n    return itemA === itemB;\r\n}\r\nfunction peq2(propName) {\r\n    return function (itemA, itemB) {\r\n        return itemA[propName] === itemB[propName];\r\n    };\r\n}\r\nfunction ok() {\r\n    return true;\r\n}\r\nfunction fail() {\r\n    return false;\r\n}\r\nfunction not(f) {\r\n    return function () {\r\n        return !f.apply(f, arguments);\r\n    };\r\n}\r\nfunction and(fA, fB) {\r\n    return function (item) {\r\n        return fA(item) && fB(item);\r\n    };\r\n}\r\nfunction self(a) {\r\n    return a;\r\n}\r\nfunction invoke(obj, method) {\r\n    return function () {\r\n        return obj[method].apply(obj, arguments);\r\n    };\r\n}\r\nvar idCounter = 0;\r\n/**\r\n * generate a globally-unique id\r\n *\r\n * @param {String} [prefix]\r\n */\r\nfunction uniqueId(prefix) {\r\n    var id = ++idCounter + '';\r\n    return prefix ? prefix + id : id;\r\n}\r\n/**\r\n * returns bnd (bounds) from rect\r\n *\r\n * - IE Compatibility Issue: http://goo.gl/sRLOAo\r\n * - Scroll Issue: http://goo.gl/sNjUc\r\n *\r\n * @param {Rect} rect\r\n * @return {Object} bounds\r\n * @return {Number} bounds.top\r\n * @return {Number} bounds.left\r\n * @return {Number} bounds.width\r\n * @return {Number} bounds.height\r\n */\r\nfunction rect2bnd(rect) {\r\n    var $document = $(document);\r\n    return {\r\n        top: rect.top + $document.scrollTop(),\r\n        left: rect.left + $document.scrollLeft(),\r\n        width: rect.right - rect.left,\r\n        height: rect.bottom - rect.top\r\n    };\r\n}\r\n/**\r\n * returns a copy of the object where the keys have become the values and the values the keys.\r\n * @param {Object} obj\r\n * @return {Object}\r\n */\r\nfunction invertObject(obj) {\r\n    var inverted = {};\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            inverted[obj[key]] = key;\r\n        }\r\n    }\r\n    return inverted;\r\n}\r\n/**\r\n * @param {String} namespace\r\n * @param {String} [prefix]\r\n * @return {String}\r\n */\r\nfunction namespaceToCamel(namespace, prefix) {\r\n    prefix = prefix || '';\r\n    return prefix + namespace.split('.').map(function (name) {\r\n        return name.substring(0, 1).toUpperCase() + name.substring(1);\r\n    }).join('');\r\n}\r\n/**\r\n * Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds. If `immediate` is passed, trigger the function on the\r\n * leading edge, instead of the trailing.\r\n * @param {Function} func\r\n * @param {Number} wait\r\n * @param {Boolean} immediate\r\n * @return {Function}\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    var _this = this;\r\n    var timeout;\r\n    return function () {\r\n        var context = _this;\r\n        var args = arguments;\r\n        var later = function () {\r\n            timeout = null;\r\n            if (!immediate) {\r\n                func.apply(context, args);\r\n            }\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) {\r\n            func.apply(context, args);\r\n        }\r\n    };\r\n}\r\nvar func = {\r\n    eq: eq,\r\n    eq2: eq2,\r\n    peq2: peq2,\r\n    ok: ok,\r\n    fail: fail,\r\n    self: self,\r\n    not: not,\r\n    and: and,\r\n    invoke: invoke,\r\n    uniqueId: uniqueId,\r\n    rect2bnd: rect2bnd,\r\n    invertObject: invertObject,\r\n    namespaceToCamel: namespaceToCamel,\r\n    debounce: debounce\r\n};\r\n\r\n/**\r\n * returns the first item of an array.\r\n *\r\n * @param {Array} array\r\n */\r\nfunction head(array) {\r\n    return array[0];\r\n}\r\n/**\r\n * returns the last item of an array.\r\n *\r\n * @param {Array} array\r\n */\r\nfunction last(array) {\r\n    return array[array.length - 1];\r\n}\r\n/**\r\n * returns everything but the last entry of the array.\r\n *\r\n * @param {Array} array\r\n */\r\nfunction initial(array) {\r\n    return array.slice(0, array.length - 1);\r\n}\r\n/**\r\n * returns the rest of the items in an array.\r\n *\r\n * @param {Array} array\r\n */\r\nfunction tail(array) {\r\n    return array.slice(1);\r\n}\r\n/**\r\n * returns item of array\r\n */\r\nfunction find(array, pred) {\r\n    for (var idx = 0, len = array.length; idx < len; idx++) {\r\n        var item = array[idx];\r\n        if (pred(item)) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n/**\r\n * returns true if all of the values in the array pass the predicate truth test.\r\n */\r\nfunction all(array, pred) {\r\n    for (var idx = 0, len = array.length; idx < len; idx++) {\r\n        if (!pred(array[idx])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * returns index of item\r\n */\r\nfunction indexOf(array, item) {\r\n    return $$1.inArray(item, array);\r\n}\r\n/**\r\n * returns true if the value is present in the list.\r\n */\r\nfunction contains(array, item) {\r\n    return indexOf(array, item) !== -1;\r\n}\r\n/**\r\n * get sum from a list\r\n *\r\n * @param {Array} array - array\r\n * @param {Function} fn - iterator\r\n */\r\nfunction sum(array, fn) {\r\n    fn = fn || func.self;\r\n    return array.reduce(function (memo, v) {\r\n        return memo + fn(v);\r\n    }, 0);\r\n}\r\n/**\r\n * returns a copy of the collection with array type.\r\n * @param {Collection} collection - collection eg) node.childNodes, ...\r\n */\r\nfunction from(collection) {\r\n    var result = [];\r\n    var length = collection.length;\r\n    var idx = -1;\r\n    while (++idx < length) {\r\n        result[idx] = collection[idx];\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * returns whether list is empty or not\r\n */\r\nfunction isEmpty(array) {\r\n    return !array || !array.length;\r\n}\r\n/**\r\n * cluster elements by predicate function.\r\n *\r\n * @param {Array} array - array\r\n * @param {Function} fn - predicate function for cluster rule\r\n * @param {Array[]}\r\n */\r\nfunction clusterBy(array, fn) {\r\n    if (!array.length) {\r\n        return [];\r\n    }\r\n    var aTail = tail(array);\r\n    return aTail.reduce(function (memo, v) {\r\n        var aLast = last(memo);\r\n        if (fn(last(aLast), v)) {\r\n            aLast[aLast.length] = v;\r\n        }\r\n        else {\r\n            memo[memo.length] = [v];\r\n        }\r\n        return memo;\r\n    }, [[head(array)]]);\r\n}\r\n/**\r\n * returns a copy of the array with all false values removed\r\n *\r\n * @param {Array} array - array\r\n * @param {Function} fn - predicate function for cluster rule\r\n */\r\nfunction compact(array) {\r\n    var aResult = [];\r\n    for (var idx = 0, len = array.length; idx < len; idx++) {\r\n        if (array[idx]) {\r\n            aResult.push(array[idx]);\r\n        }\r\n    }\r\n    return aResult;\r\n}\r\n/**\r\n * produces a duplicate-free version of the array\r\n *\r\n * @param {Array} array\r\n */\r\nfunction unique(array) {\r\n    var results = [];\r\n    for (var idx = 0, len = array.length; idx < len; idx++) {\r\n        if (!contains(results, array[idx])) {\r\n            results.push(array[idx]);\r\n        }\r\n    }\r\n    return results;\r\n}\r\n/**\r\n * returns next item.\r\n * @param {Array} array\r\n */\r\nfunction next(array, item) {\r\n    var idx = indexOf(array, item);\r\n    if (idx === -1) {\r\n        return null;\r\n    }\r\n    return array[idx + 1];\r\n}\r\n/**\r\n * returns prev item.\r\n * @param {Array} array\r\n */\r\nfunction prev(array, item) {\r\n    var idx = indexOf(array, item);\r\n    if (idx === -1) {\r\n        return null;\r\n    }\r\n    return array[idx - 1];\r\n}\r\n/**\r\n * @class core.list\r\n *\r\n * list utils\r\n *\r\n * @singleton\r\n * @alternateClassName list\r\n */\r\nvar lists = {\r\n    head: head,\r\n    last: last,\r\n    initial: initial,\r\n    tail: tail,\r\n    prev: prev,\r\n    next: next,\r\n    find: find,\r\n    contains: contains,\r\n    all: all,\r\n    sum: sum,\r\n    from: from,\r\n    isEmpty: isEmpty,\r\n    clusterBy: clusterBy,\r\n    compact: compact,\r\n    unique: unique\r\n};\r\n\r\nvar KEY_MAP = {\r\n    'BACKSPACE': 8,\r\n    'TAB': 9,\r\n    'ENTER': 13,\r\n    'SPACE': 32,\r\n    'DELETE': 46,\r\n    // Arrow\r\n    'LEFT': 37,\r\n    'UP': 38,\r\n    'RIGHT': 39,\r\n    'DOWN': 40,\r\n    // Number: 0-9\r\n    'NUM0': 48,\r\n    'NUM1': 49,\r\n    'NUM2': 50,\r\n    'NUM3': 51,\r\n    'NUM4': 52,\r\n    'NUM5': 53,\r\n    'NUM6': 54,\r\n    'NUM7': 55,\r\n    'NUM8': 56,\r\n    // Alphabet: a-z\r\n    'B': 66,\r\n    'E': 69,\r\n    'I': 73,\r\n    'J': 74,\r\n    'K': 75,\r\n    'L': 76,\r\n    'R': 82,\r\n    'S': 83,\r\n    'U': 85,\r\n    'V': 86,\r\n    'Y': 89,\r\n    'Z': 90,\r\n    'SLASH': 191,\r\n    'LEFTBRACKET': 219,\r\n    'BACKSLASH': 220,\r\n    'RIGHTBRACKET': 221\r\n};\r\n/**\r\n * @class core.key\r\n *\r\n * Object for keycodes.\r\n *\r\n * @singleton\r\n * @alternateClassName key\r\n */\r\nvar key = {\r\n    /**\r\n     * @method isEdit\r\n     *\r\n     * @param {Number} keyCode\r\n     * @return {Boolean}\r\n     */\r\n    isEdit: function (keyCode) {\r\n        return lists.contains([\r\n            KEY_MAP.BACKSPACE,\r\n            KEY_MAP.TAB,\r\n            KEY_MAP.ENTER,\r\n            KEY_MAP.SPACE,\r\n            KEY_MAP.DELETE\r\n        ], keyCode);\r\n    },\r\n    /**\r\n     * @method isMove\r\n     *\r\n     * @param {Number} keyCode\r\n     * @return {Boolean}\r\n     */\r\n    isMove: function (keyCode) {\r\n        return lists.contains([\r\n            KEY_MAP.LEFT,\r\n            KEY_MAP.UP,\r\n            KEY_MAP.RIGHT,\r\n            KEY_MAP.DOWN\r\n        ], keyCode);\r\n    },\r\n    /**\r\n     * @property {Object} nameFromCode\r\n     * @property {String} nameFromCode.8 \"BACKSPACE\"\r\n     */\r\n    nameFromCode: func.invertObject(KEY_MAP),\r\n    code: KEY_MAP\r\n};\r\n\r\nvar NBSP_CHAR = String.fromCharCode(160);\r\nvar ZERO_WIDTH_NBSP_CHAR = '\\ufeff';\r\n/**\r\n * @method isEditable\r\n *\r\n * returns whether node is `note-editable` or not.\r\n *\r\n * @param {Node} node\r\n * @return {Boolean}\r\n */\r\nfunction isEditable(node) {\r\n    return node && $$1(node).hasClass('note-editable');\r\n}\r\n/**\r\n * @method isControlSizing\r\n *\r\n * returns whether node is `note-control-sizing` or not.\r\n *\r\n * @param {Node} node\r\n * @return {Boolean}\r\n */\r\nfunction isControlSizing(node) {\r\n    return node && $$1(node).hasClass('note-control-sizing');\r\n}\r\n/**\r\n * @method makePredByNodeName\r\n *\r\n * returns predicate which judge whether nodeName is same\r\n *\r\n * @param {String} nodeName\r\n * @return {Function}\r\n */\r\nfunction makePredByNodeName(nodeName) {\r\n    nodeName = nodeName.toUpperCase();\r\n    return function (node) {\r\n        return node && node.nodeName.toUpperCase() === nodeName;\r\n    };\r\n}\r\n/**\r\n * @method isText\r\n *\r\n *\r\n *\r\n * @param {Node} node\r\n * @return {Boolean} true if node's type is text(3)\r\n */\r\nfunction isText(node) {\r\n    return node && node.nodeType === 3;\r\n}\r\n/**\r\n * @method isElement\r\n *\r\n *\r\n *\r\n * @param {Node} node\r\n * @return {Boolean} true if node's type is element(1)\r\n */\r\nfunction isElement(node) {\r\n    return node && node.nodeType === 1;\r\n}\r\n/**\r\n * ex) br, col, embed, hr, img, input, ...\r\n * @see http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\r\n */\r\nfunction isVoid(node) {\r\n    return node && /^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(node.nodeName.toUpperCase());\r\n}\r\nfunction isPara(node) {\r\n    if (isEditable(node)) {\r\n        return false;\r\n    }\r\n    // Chrome(v31.0), FF(v25.0.1) use DIV for paragraph\r\n    return node && /^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase());\r\n}\r\nfunction isHeading(node) {\r\n    return node && /^H[1-7]/.test(node.nodeName.toUpperCase());\r\n}\r\nvar isPre = makePredByNodeName('PRE');\r\nvar isLi = makePredByNodeName('LI');\r\nfunction isPurePara(node) {\r\n    return isPara(node) && !isLi(node);\r\n}\r\nvar isTable = makePredByNodeName('TABLE');\r\nvar isData = makePredByNodeName('DATA');\r\nfunction isInline(node) {\r\n    return !isBodyContainer(node) &&\r\n        !isList(node) &&\r\n        !isHr(node) &&\r\n        !isPara(node) &&\r\n        !isTable(node) &&\r\n        !isBlockquote(node) &&\r\n        !isData(node);\r\n}\r\nfunction isList(node) {\r\n    return node && /^UL|^OL/.test(node.nodeName.toUpperCase());\r\n}\r\nvar isHr = makePredByNodeName('HR');\r\nfunction isCell(node) {\r\n    return node && /^TD|^TH/.test(node.nodeName.toUpperCase());\r\n}\r\nvar isBlockquote = makePredByNodeName('BLOCKQUOTE');\r\nfunction isBodyContainer(node) {\r\n    return isCell(node) || isBlockquote(node) || isEditable(node);\r\n}\r\nvar isAnchor = makePredByNodeName('A');\r\nfunction isParaInline(node) {\r\n    return isInline(node) && !!ancestor(node, isPara);\r\n}\r\nfunction isBodyInline(node) {\r\n    return isInline(node) && !ancestor(node, isPara);\r\n}\r\nvar isBody = makePredByNodeName('BODY');\r\n/**\r\n * returns whether nodeB is closest sibling of nodeA\r\n *\r\n * @param {Node} nodeA\r\n * @param {Node} nodeB\r\n * @return {Boolean}\r\n */\r\nfunction isClosestSibling(nodeA, nodeB) {\r\n    return nodeA.nextSibling === nodeB ||\r\n        nodeA.previousSibling === nodeB;\r\n}\r\n/**\r\n * returns array of closest siblings with node\r\n *\r\n * @param {Node} node\r\n * @param {function} [pred] - predicate function\r\n * @return {Node[]}\r\n */\r\nfunction withClosestSiblings(node, pred) {\r\n    pred = pred || func.ok;\r\n    var siblings = [];\r\n    if (node.previousSibling && pred(node.previousSibling)) {\r\n        siblings.push(node.previousSibling);\r\n    }\r\n    siblings.push(node);\r\n    if (node.nextSibling && pred(node.nextSibling)) {\r\n        siblings.push(node.nextSibling);\r\n    }\r\n    return siblings;\r\n}\r\n/**\r\n * blank HTML for cursor position\r\n * - [workaround] old IE only works with &nbsp;\r\n * - [workaround] IE11 and other browser works with bogus br\r\n */\r\nvar blankHTML = env.isMSIE && env.browserVersion < 11 ? '&nbsp;' : '<br>';\r\n/**\r\n * @method nodeLength\r\n *\r\n * returns #text's text size or element's childNodes size\r\n *\r\n * @param {Node} node\r\n */\r\nfunction nodeLength(node) {\r\n    if (isText(node)) {\r\n        return node.nodeValue.length;\r\n    }\r\n    if (node) {\r\n        return node.childNodes.length;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * returns whether node is empty or not.\r\n *\r\n * @param {Node} node\r\n * @return {Boolean}\r\n */\r\nfunction isEmpty$1(node) {\r\n    var len = nodeLength(node);\r\n    if (len === 0) {\r\n        return true;\r\n    }\r\n    else if (!isText(node) && len === 1 && node.innerHTML === blankHTML) {\r\n        // ex) <p><br></p>, <span><br></span>\r\n        return true;\r\n    }\r\n    else if (lists.all(node.childNodes, isText) && node.innerHTML === '') {\r\n        // ex) <p></p>, <span></span>\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * padding blankHTML if node is empty (for cursor position)\r\n */\r\nfunction paddingBlankHTML(node) {\r\n    if (!isVoid(node) && !nodeLength(node)) {\r\n        node.innerHTML = blankHTML;\r\n    }\r\n}\r\n/**\r\n * find nearest ancestor predicate hit\r\n *\r\n * @param {Node} node\r\n * @param {Function} pred - predicate function\r\n */\r\nfunction ancestor(node, pred) {\r\n    while (node) {\r\n        if (pred(node)) {\r\n            return node;\r\n        }\r\n        if (isEditable(node)) {\r\n            break;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * find nearest ancestor only single child blood line and predicate hit\r\n *\r\n * @param {Node} node\r\n * @param {Function} pred - predicate function\r\n */\r\nfunction singleChildAncestor(node, pred) {\r\n    node = node.parentNode;\r\n    while (node) {\r\n        if (nodeLength(node) !== 1) {\r\n            break;\r\n        }\r\n        if (pred(node)) {\r\n            return node;\r\n        }\r\n        if (isEditable(node)) {\r\n            break;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * returns new array of ancestor nodes (until predicate hit).\r\n *\r\n * @param {Node} node\r\n * @param {Function} [optional] pred - predicate function\r\n */\r\nfunction listAncestor(node, pred) {\r\n    pred = pred || func.fail;\r\n    var ancestors = [];\r\n    ancestor(node, function (el) {\r\n        if (!isEditable(el)) {\r\n            ancestors.push(el);\r\n        }\r\n        return pred(el);\r\n    });\r\n    return ancestors;\r\n}\r\n/**\r\n * find farthest ancestor predicate hit\r\n */\r\nfunction lastAncestor(node, pred) {\r\n    var ancestors = listAncestor(node);\r\n    return lists.last(ancestors.filter(pred));\r\n}\r\n/**\r\n * returns common ancestor node between two nodes.\r\n *\r\n * @param {Node} nodeA\r\n * @param {Node} nodeB\r\n */\r\nfunction commonAncestor(nodeA, nodeB) {\r\n    var ancestors = listAncestor(nodeA);\r\n    for (var n = nodeB; n; n = n.parentNode) {\r\n        if ($$1.inArray(n, ancestors) > -1) {\r\n            return n;\r\n        }\r\n    }\r\n    return null; // difference document area\r\n}\r\n/**\r\n * listing all previous siblings (until predicate hit).\r\n *\r\n * @param {Node} node\r\n * @param {Function} [optional] pred - predicate function\r\n */\r\nfunction listPrev(node, pred) {\r\n    pred = pred || func.fail;\r\n    var nodes = [];\r\n    while (node) {\r\n        if (pred(node)) {\r\n            break;\r\n        }\r\n        nodes.push(node);\r\n        node = node.previousSibling;\r\n    }\r\n    return nodes;\r\n}\r\n/**\r\n * listing next siblings (until predicate hit).\r\n *\r\n * @param {Node} node\r\n * @param {Function} [pred] - predicate function\r\n */\r\nfunction listNext(node, pred) {\r\n    pred = pred || func.fail;\r\n    var nodes = [];\r\n    while (node) {\r\n        if (pred(node)) {\r\n            break;\r\n        }\r\n        nodes.push(node);\r\n        node = node.nextSibling;\r\n    }\r\n    return nodes;\r\n}\r\n/**\r\n * listing descendant nodes\r\n *\r\n * @param {Node} node\r\n * @param {Function} [pred] - predicate function\r\n */\r\nfunction listDescendant(node, pred) {\r\n    var descendants = [];\r\n    pred = pred || func.ok;\r\n    // start DFS(depth first search) with node\r\n    (function fnWalk(current) {\r\n        if (node !== current && pred(current)) {\r\n            descendants.push(current);\r\n        }\r\n        for (var idx = 0, len = current.childNodes.length; idx < len; idx++) {\r\n            fnWalk(current.childNodes[idx]);\r\n        }\r\n    })(node);\r\n    return descendants;\r\n}\r\n/**\r\n * wrap node with new tag.\r\n *\r\n * @param {Node} node\r\n * @param {Node} tagName of wrapper\r\n * @return {Node} - wrapper\r\n */\r\nfunction wrap(node, wrapperName) {\r\n    var parent = node.parentNode;\r\n    var wrapper = $$1('<' + wrapperName + '>')[0];\r\n    parent.insertBefore(wrapper, node);\r\n    wrapper.appendChild(node);\r\n    return wrapper;\r\n}\r\n/**\r\n * insert node after preceding\r\n *\r\n * @param {Node} node\r\n * @param {Node} preceding - predicate function\r\n */\r\nfunction insertAfter(node, preceding) {\r\n    var next = preceding.nextSibling;\r\n    var parent = preceding.parentNode;\r\n    if (next) {\r\n        parent.insertBefore(node, next);\r\n    }\r\n    else {\r\n        parent.appendChild(node);\r\n    }\r\n    return node;\r\n}\r\n/**\r\n * append elements.\r\n *\r\n * @param {Node} node\r\n * @param {Collection} aChild\r\n */\r\nfunction appendChildNodes(node, aChild) {\r\n    $$1.each(aChild, function (idx, child) {\r\n        node.appendChild(child);\r\n    });\r\n    return node;\r\n}\r\n/**\r\n * returns whether boundaryPoint is left edge or not.\r\n *\r\n * @param {BoundaryPoint} point\r\n * @return {Boolean}\r\n */\r\nfunction isLeftEdgePoint(point) {\r\n    return point.offset === 0;\r\n}\r\n/**\r\n * returns whether boundaryPoint is right edge or not.\r\n *\r\n * @param {BoundaryPoint} point\r\n * @return {Boolean}\r\n */\r\nfunction isRightEdgePoint(point) {\r\n    return point.offset === nodeLength(point.node);\r\n}\r\n/**\r\n * returns whether boundaryPoint is edge or not.\r\n *\r\n * @param {BoundaryPoint} point\r\n * @return {Boolean}\r\n */\r\nfunction isEdgePoint(point) {\r\n    return isLeftEdgePoint(point) || isRightEdgePoint(point);\r\n}\r\n/**\r\n * returns whether node is left edge of ancestor or not.\r\n *\r\n * @param {Node} node\r\n * @param {Node} ancestor\r\n * @return {Boolean}\r\n */\r\nfunction isLeftEdgeOf(node, ancestor) {\r\n    while (node && node !== ancestor) {\r\n        if (position(node) !== 0) {\r\n            return false;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * returns whether node is right edge of ancestor or not.\r\n *\r\n * @param {Node} node\r\n * @param {Node} ancestor\r\n * @return {Boolean}\r\n */\r\nfunction isRightEdgeOf(node, ancestor) {\r\n    if (!ancestor) {\r\n        return false;\r\n    }\r\n    while (node && node !== ancestor) {\r\n        if (position(node) !== nodeLength(node.parentNode) - 1) {\r\n            return false;\r\n        }\r\n        node = node.parentNode;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * returns whether point is left edge of ancestor or not.\r\n * @param {BoundaryPoint} point\r\n * @param {Node} ancestor\r\n * @return {Boolean}\r\n */\r\nfunction isLeftEdgePointOf(point, ancestor) {\r\n    return isLeftEdgePoint(point) && isLeftEdgeOf(point.node, ancestor);\r\n}\r\n/**\r\n * returns whether point is right edge of ancestor or not.\r\n * @param {BoundaryPoint} point\r\n * @param {Node} ancestor\r\n * @return {Boolean}\r\n */\r\nfunction isRightEdgePointOf(point, ancestor) {\r\n    return isRightEdgePoint(point) && isRightEdgeOf(point.node, ancestor);\r\n}\r\n/**\r\n * returns offset from parent.\r\n *\r\n * @param {Node} node\r\n */\r\nfunction position(node) {\r\n    var offset = 0;\r\n    while ((node = node.previousSibling)) {\r\n        offset += 1;\r\n    }\r\n    return offset;\r\n}\r\nfunction hasChildren(node) {\r\n    return !!(node && node.childNodes && node.childNodes.length);\r\n}\r\n/**\r\n * returns previous boundaryPoint\r\n *\r\n * @param {BoundaryPoint} point\r\n * @param {Boolean} isSkipInnerOffset\r\n * @return {BoundaryPoint}\r\n */\r\nfunction prevPoint(point, isSkipInnerOffset) {\r\n    var node;\r\n    var offset;\r\n    if (point.offset === 0) {\r\n        if (isEditable(point.node)) {\r\n            return null;\r\n        }\r\n        node = point.node.parentNode;\r\n        offset = position(point.node);\r\n    }\r\n    else if (hasChildren(point.node)) {\r\n        node = point.node.childNodes[point.offset - 1];\r\n        offset = nodeLength(node);\r\n    }\r\n    else {\r\n        node = point.node;\r\n        offset = isSkipInnerOffset ? 0 : point.offset - 1;\r\n    }\r\n    return {\r\n        node: node,\r\n        offset: offset\r\n    };\r\n}\r\n/**\r\n * returns next boundaryPoint\r\n *\r\n * @param {BoundaryPoint} point\r\n * @param {Boolean} isSkipInnerOffset\r\n * @return {BoundaryPoint}\r\n */\r\nfunction nextPoint(point, isSkipInnerOffset) {\r\n    var node, offset;\r\n    if (nodeLength(point.node) === point.offset) {\r\n        if (isEditable(point.node)) {\r\n            return null;\r\n        }\r\n        node = point.node.parentNode;\r\n        offset = position(point.node) + 1;\r\n    }\r\n    else if (hasChildren(point.node)) {\r\n        node = point.node.childNodes[point.offset];\r\n        offset = 0;\r\n    }\r\n    else {\r\n        node = point.node;\r\n        offset = isSkipInnerOffset ? nodeLength(point.node) : point.offset + 1;\r\n    }\r\n    return {\r\n        node: node,\r\n        offset: offset\r\n    };\r\n}\r\n/**\r\n * returns whether pointA and pointB is same or not.\r\n *\r\n * @param {BoundaryPoint} pointA\r\n * @param {BoundaryPoint} pointB\r\n * @return {Boolean}\r\n */\r\nfunction isSamePoint(pointA, pointB) {\r\n    return pointA.node === pointB.node && pointA.offset === pointB.offset;\r\n}\r\n/**\r\n * returns whether point is visible (can set cursor) or not.\r\n *\r\n * @param {BoundaryPoint} point\r\n * @return {Boolean}\r\n */\r\nfunction isVisiblePoint(point) {\r\n    if (isText(point.node) || !hasChildren(point.node) || isEmpty$1(point.node)) {\r\n        return true;\r\n    }\r\n    var leftNode = point.node.childNodes[point.offset - 1];\r\n    var rightNode = point.node.childNodes[point.offset];\r\n    if ((!leftNode || isVoid(leftNode)) && (!rightNode || isVoid(rightNode))) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @method prevPointUtil\r\n *\r\n * @param {BoundaryPoint} point\r\n * @param {Function} pred\r\n * @return {BoundaryPoint}\r\n */\r\nfunction prevPointUntil(point, pred) {\r\n    while (point) {\r\n        if (pred(point)) {\r\n            return point;\r\n        }\r\n        point = prevPoint(point);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * @method nextPointUntil\r\n *\r\n * @param {BoundaryPoint} point\r\n * @param {Function} pred\r\n * @return {BoundaryPoint}\r\n */\r\nfunction nextPointUntil(point, pred) {\r\n    while (point) {\r\n        if (pred(point)) {\r\n            return point;\r\n        }\r\n        point = nextPoint(point);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * returns whether point has character or not.\r\n *\r\n * @param {Point} point\r\n * @return {Boolean}\r\n */\r\nfunction isCharPoint(point) {\r\n    if (!isText(point.node)) {\r\n        return false;\r\n    }\r\n    var ch = point.node.nodeValue.charAt(point.offset - 1);\r\n    return ch && (ch !== ' ' && ch !== NBSP_CHAR);\r\n}\r\n/**\r\n * @method walkPoint\r\n *\r\n * @param {BoundaryPoint} startPoint\r\n * @param {BoundaryPoint} endPoint\r\n * @param {Function} handler\r\n * @param {Boolean} isSkipInnerOffset\r\n */\r\nfunction walkPoint(startPoint, endPoint, handler, isSkipInnerOffset) {\r\n    var point = startPoint;\r\n    while (point) {\r\n        handler(point);\r\n        if (isSamePoint(point, endPoint)) {\r\n            break;\r\n        }\r\n        var isSkipOffset = isSkipInnerOffset &&\r\n            startPoint.node !== point.node &&\r\n            endPoint.node !== point.node;\r\n        point = nextPoint(point, isSkipOffset);\r\n    }\r\n}\r\n/**\r\n * @method makeOffsetPath\r\n *\r\n * return offsetPath(array of offset) from ancestor\r\n *\r\n * @param {Node} ancestor - ancestor node\r\n * @param {Node} node\r\n */\r\nfunction makeOffsetPath(ancestor, node) {\r\n    var ancestors = listAncestor(node, func.eq(ancestor));\r\n    return ancestors.map(position).reverse();\r\n}\r\n/**\r\n * @method fromOffsetPath\r\n *\r\n * return element from offsetPath(array of offset)\r\n *\r\n * @param {Node} ancestor - ancestor node\r\n * @param {array} offsets - offsetPath\r\n */\r\nfunction fromOffsetPath(ancestor, offsets) {\r\n    var current = ancestor;\r\n    for (var i = 0, len = offsets.length; i < len; i++) {\r\n        if (current.childNodes.length <= offsets[i]) {\r\n            current = current.childNodes[current.childNodes.length - 1];\r\n        }\r\n        else {\r\n            current = current.childNodes[offsets[i]];\r\n        }\r\n    }\r\n    return current;\r\n}\r\n/**\r\n * @method splitNode\r\n *\r\n * split element or #text\r\n *\r\n * @param {BoundaryPoint} point\r\n * @param {Object} [options]\r\n * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\r\n * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\r\n * @return {Node} right node of boundaryPoint\r\n */\r\nfunction splitNode(point, options) {\r\n    var isSkipPaddingBlankHTML = options && options.isSkipPaddingBlankHTML;\r\n    var isNotSplitEdgePoint = options && options.isNotSplitEdgePoint;\r\n    // edge case\r\n    if (isEdgePoint(point) && (isText(point.node) || isNotSplitEdgePoint)) {\r\n        if (isLeftEdgePoint(point)) {\r\n            return point.node;\r\n        }\r\n        else if (isRightEdgePoint(point)) {\r\n            return point.node.nextSibling;\r\n        }\r\n    }\r\n    // split #text\r\n    if (isText(point.node)) {\r\n        return point.node.splitText(point.offset);\r\n    }\r\n    else {\r\n        var childNode = point.node.childNodes[point.offset];\r\n        var clone = insertAfter(point.node.cloneNode(false), point.node);\r\n        appendChildNodes(clone, listNext(childNode));\r\n        if (!isSkipPaddingBlankHTML) {\r\n            paddingBlankHTML(point.node);\r\n            paddingBlankHTML(clone);\r\n        }\r\n        return clone;\r\n    }\r\n}\r\n/**\r\n * @method splitTree\r\n *\r\n * split tree by point\r\n *\r\n * @param {Node} root - split root\r\n * @param {BoundaryPoint} point\r\n * @param {Object} [options]\r\n * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\r\n * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\r\n * @return {Node} right node of boundaryPoint\r\n */\r\nfunction splitTree(root, point, options) {\r\n    // ex) [#text, <span>, <p>]\r\n    var ancestors = listAncestor(point.node, func.eq(root));\r\n    if (!ancestors.length) {\r\n        return null;\r\n    }\r\n    else if (ancestors.length === 1) {\r\n        return splitNode(point, options);\r\n    }\r\n    return ancestors.reduce(function (node, parent) {\r\n        if (node === point.node) {\r\n            node = splitNode(point, options);\r\n        }\r\n        return splitNode({\r\n            node: parent,\r\n            offset: node ? position(node) : nodeLength(parent)\r\n        }, options);\r\n    });\r\n}\r\n/**\r\n * split point\r\n *\r\n * @param {Point} point\r\n * @param {Boolean} isInline\r\n * @return {Object}\r\n */\r\nfunction splitPoint(point, isInline) {\r\n    // find splitRoot, container\r\n    //  - inline: splitRoot is a child of paragraph\r\n    //  - block: splitRoot is a child of bodyContainer\r\n    var pred = isInline ? isPara : isBodyContainer;\r\n    var ancestors = listAncestor(point.node, pred);\r\n    var topAncestor = lists.last(ancestors) || point.node;\r\n    var splitRoot, container;\r\n    if (pred(topAncestor)) {\r\n        splitRoot = ancestors[ancestors.length - 2];\r\n        container = topAncestor;\r\n    }\r\n    else {\r\n        splitRoot = topAncestor;\r\n        container = splitRoot.parentNode;\r\n    }\r\n    // if splitRoot is exists, split with splitTree\r\n    var pivot = splitRoot && splitTree(splitRoot, point, {\r\n        isSkipPaddingBlankHTML: isInline,\r\n        isNotSplitEdgePoint: isInline\r\n    });\r\n    // if container is point.node, find pivot with point.offset\r\n    if (!pivot && container === point.node) {\r\n        pivot = point.node.childNodes[point.offset];\r\n    }\r\n    return {\r\n        rightNode: pivot,\r\n        container: container\r\n    };\r\n}\r\nfunction create(nodeName) {\r\n    return document.createElement(nodeName);\r\n}\r\nfunction createText(text) {\r\n    return document.createTextNode(text);\r\n}\r\n/**\r\n * @method remove\r\n *\r\n * remove node, (isRemoveChild: remove child or not)\r\n *\r\n * @param {Node} node\r\n * @param {Boolean} isRemoveChild\r\n */\r\nfunction remove(node, isRemoveChild) {\r\n    if (!node || !node.parentNode) {\r\n        return;\r\n    }\r\n    if (node.removeNode) {\r\n        return node.removeNode(isRemoveChild);\r\n    }\r\n    var parent = node.parentNode;\r\n    if (!isRemoveChild) {\r\n        var nodes = [];\r\n        for (var i = 0, len = node.childNodes.length; i < len; i++) {\r\n            nodes.push(node.childNodes[i]);\r\n        }\r\n        for (var i = 0, len = nodes.length; i < len; i++) {\r\n            parent.insertBefore(nodes[i], node);\r\n        }\r\n    }\r\n    parent.removeChild(node);\r\n}\r\n/**\r\n * @method removeWhile\r\n *\r\n * @param {Node} node\r\n * @param {Function} pred\r\n */\r\nfunction removeWhile(node, pred) {\r\n    while (node) {\r\n        if (isEditable(node) || !pred(node)) {\r\n            break;\r\n        }\r\n        var parent = node.parentNode;\r\n        remove(node);\r\n        node = parent;\r\n    }\r\n}\r\n/**\r\n * @method replace\r\n *\r\n * replace node with provided nodeName\r\n *\r\n * @param {Node} node\r\n * @param {String} nodeName\r\n * @return {Node} - new node\r\n */\r\nfunction replace(node, nodeName) {\r\n    if (node.nodeName.toUpperCase() === nodeName.toUpperCase()) {\r\n        return node;\r\n    }\r\n    var newNode = create(nodeName);\r\n    if (node.style.cssText) {\r\n        newNode.style.cssText = node.style.cssText;\r\n    }\r\n    appendChildNodes(newNode, lists.from(node.childNodes));\r\n    insertAfter(newNode, node);\r\n    remove(node);\r\n    return newNode;\r\n}\r\nvar isTextarea = makePredByNodeName('TEXTAREA');\r\n/**\r\n * @param {jQuery} $node\r\n * @param {Boolean} [stripLinebreaks] - default: false\r\n */\r\nfunction value($node, stripLinebreaks) {\r\n    var val = isTextarea($node[0]) ? $node.val() : $node.html();\r\n    if (stripLinebreaks) {\r\n        return val.replace(/[\\n\\r]/g, '');\r\n    }\r\n    return val;\r\n}\r\n/**\r\n * @method html\r\n *\r\n * get the HTML contents of node\r\n *\r\n * @param {jQuery} $node\r\n * @param {Boolean} [isNewlineOnBlock]\r\n */\r\nfunction html($node, isNewlineOnBlock) {\r\n    var markup = value($node);\r\n    if (isNewlineOnBlock) {\r\n        var regexTag = /<(\\/?)(\\b(?!!)[^>\\s]*)(.*?)(\\s*\\/?>)/g;\r\n        markup = markup.replace(regexTag, function (match, endSlash, name) {\r\n            name = name.toUpperCase();\r\n            var isEndOfInlineContainer = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name) &&\r\n                !!endSlash;\r\n            var isBlockNode = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);\r\n            return match + ((isEndOfInlineContainer || isBlockNode) ? '\\n' : '');\r\n        });\r\n        markup = $$1.trim(markup);\r\n    }\r\n    return markup;\r\n}\r\nfunction posFromPlaceholder(placeholder) {\r\n    var $placeholder = $$1(placeholder);\r\n    var pos = $placeholder.offset();\r\n    var height = $placeholder.outerHeight(true); // include margin\r\n    return {\r\n        left: pos.left,\r\n        top: pos.top + height\r\n    };\r\n}\r\nfunction attachEvents($node, events) {\r\n    Object.keys(events).forEach(function (key) {\r\n        $node.on(key, events[key]);\r\n    });\r\n}\r\nfunction detachEvents($node, events) {\r\n    Object.keys(events).forEach(function (key) {\r\n        $node.off(key, events[key]);\r\n    });\r\n}\r\n/**\r\n * @method isCustomStyleTag\r\n *\r\n * assert if a node contains a \"note-styletag\" class,\r\n * which implies that's a custom-made style tag node\r\n *\r\n * @param {Node} an HTML DOM node\r\n */\r\nfunction isCustomStyleTag(node) {\r\n    return node && !isText(node) && lists.contains(node.classList, 'note-styletag');\r\n}\r\nvar dom = {\r\n    /** @property {String} NBSP_CHAR */\r\n    NBSP_CHAR: NBSP_CHAR,\r\n    /** @property {String} ZERO_WIDTH_NBSP_CHAR */\r\n    ZERO_WIDTH_NBSP_CHAR: ZERO_WIDTH_NBSP_CHAR,\r\n    /** @property {String} blank */\r\n    blank: blankHTML,\r\n    /** @property {String} emptyPara */\r\n    emptyPara: \"<p>\" + blankHTML + \"</p>\",\r\n    makePredByNodeName: makePredByNodeName,\r\n    isEditable: isEditable,\r\n    isControlSizing: isControlSizing,\r\n    isText: isText,\r\n    isElement: isElement,\r\n    isVoid: isVoid,\r\n    isPara: isPara,\r\n    isPurePara: isPurePara,\r\n    isHeading: isHeading,\r\n    isInline: isInline,\r\n    isBlock: func.not(isInline),\r\n    isBodyInline: isBodyInline,\r\n    isBody: isBody,\r\n    isParaInline: isParaInline,\r\n    isPre: isPre,\r\n    isList: isList,\r\n    isTable: isTable,\r\n    isData: isData,\r\n    isCell: isCell,\r\n    isBlockquote: isBlockquote,\r\n    isBodyContainer: isBodyContainer,\r\n    isAnchor: isAnchor,\r\n    isDiv: makePredByNodeName('DIV'),\r\n    isLi: isLi,\r\n    isBR: makePredByNodeName('BR'),\r\n    isSpan: makePredByNodeName('SPAN'),\r\n    isB: makePredByNodeName('B'),\r\n    isU: makePredByNodeName('U'),\r\n    isS: makePredByNodeName('S'),\r\n    isI: makePredByNodeName('I'),\r\n    isImg: makePredByNodeName('IMG'),\r\n    isTextarea: isTextarea,\r\n    isEmpty: isEmpty$1,\r\n    isEmptyAnchor: func.and(isAnchor, isEmpty$1),\r\n    isClosestSibling: isClosestSibling,\r\n    withClosestSiblings: withClosestSiblings,\r\n    nodeLength: nodeLength,\r\n    isLeftEdgePoint: isLeftEdgePoint,\r\n    isRightEdgePoint: isRightEdgePoint,\r\n    isEdgePoint: isEdgePoint,\r\n    isLeftEdgeOf: isLeftEdgeOf,\r\n    isRightEdgeOf: isRightEdgeOf,\r\n    isLeftEdgePointOf: isLeftEdgePointOf,\r\n    isRightEdgePointOf: isRightEdgePointOf,\r\n    prevPoint: prevPoint,\r\n    nextPoint: nextPoint,\r\n    isSamePoint: isSamePoint,\r\n    isVisiblePoint: isVisiblePoint,\r\n    prevPointUntil: prevPointUntil,\r\n    nextPointUntil: nextPointUntil,\r\n    isCharPoint: isCharPoint,\r\n    walkPoint: walkPoint,\r\n    ancestor: ancestor,\r\n    singleChildAncestor: singleChildAncestor,\r\n    listAncestor: listAncestor,\r\n    lastAncestor: lastAncestor,\r\n    listNext: listNext,\r\n    listPrev: listPrev,\r\n    listDescendant: listDescendant,\r\n    commonAncestor: commonAncestor,\r\n    wrap: wrap,\r\n    insertAfter: insertAfter,\r\n    appendChildNodes: appendChildNodes,\r\n    position: position,\r\n    hasChildren: hasChildren,\r\n    makeOffsetPath: makeOffsetPath,\r\n    fromOffsetPath: fromOffsetPath,\r\n    splitTree: splitTree,\r\n    splitPoint: splitPoint,\r\n    create: create,\r\n    createText: createText,\r\n    remove: remove,\r\n    removeWhile: removeWhile,\r\n    replace: replace,\r\n    html: html,\r\n    value: value,\r\n    posFromPlaceholder: posFromPlaceholder,\r\n    attachEvents: attachEvents,\r\n    detachEvents: detachEvents,\r\n    isCustomStyleTag: isCustomStyleTag\r\n};\r\n\r\n/**\r\n * return boundaryPoint from TextRange, inspired by Andy Na's HuskyRange.js\r\n *\r\n * @param {TextRange} textRange\r\n * @param {Boolean} isStart\r\n * @return {BoundaryPoint}\r\n *\r\n * @see http://msdn.microsoft.com/en-us/library/ie/ms535872(v=vs.85).aspx\r\n */\r\nfunction textRangeToPoint(textRange, isStart) {\r\n    var container = textRange.parentElement();\r\n    var offset;\r\n    var tester = document.body.createTextRange();\r\n    var prevContainer;\r\n    var childNodes = lists.from(container.childNodes);\r\n    for (offset = 0; offset < childNodes.length; offset++) {\r\n        if (dom.isText(childNodes[offset])) {\r\n            continue;\r\n        }\r\n        tester.moveToElementText(childNodes[offset]);\r\n        if (tester.compareEndPoints('StartToStart', textRange) >= 0) {\r\n            break;\r\n        }\r\n        prevContainer = childNodes[offset];\r\n    }\r\n    if (offset !== 0 && dom.isText(childNodes[offset - 1])) {\r\n        var textRangeStart = document.body.createTextRange();\r\n        var curTextNode = null;\r\n        textRangeStart.moveToElementText(prevContainer || container);\r\n        textRangeStart.collapse(!prevContainer);\r\n        curTextNode = prevContainer ? prevContainer.nextSibling : container.firstChild;\r\n        var pointTester = textRange.duplicate();\r\n        pointTester.setEndPoint('StartToStart', textRangeStart);\r\n        var textCount = pointTester.text.replace(/[\\r\\n]/g, '').length;\r\n        while (textCount > curTextNode.nodeValue.length && curTextNode.nextSibling) {\r\n            textCount -= curTextNode.nodeValue.length;\r\n            curTextNode = curTextNode.nextSibling;\r\n        }\r\n        // [workaround] enforce IE to re-reference curTextNode, hack\r\n        var dummy = curTextNode.nodeValue; // eslint-disable-line\r\n        if (isStart && curTextNode.nextSibling && dom.isText(curTextNode.nextSibling) &&\r\n            textCount === curTextNode.nodeValue.length) {\r\n            textCount -= curTextNode.nodeValue.length;\r\n            curTextNode = curTextNode.nextSibling;\r\n        }\r\n        container = curTextNode;\r\n        offset = textCount;\r\n    }\r\n    return {\r\n        cont: container,\r\n        offset: offset\r\n    };\r\n}\r\n/**\r\n * return TextRange from boundary point (inspired by google closure-library)\r\n * @param {BoundaryPoint} point\r\n * @return {TextRange}\r\n */\r\nfunction pointToTextRange(point) {\r\n    var textRangeInfo = function (container, offset) {\r\n        var node, isCollapseToStart;\r\n        if (dom.isText(container)) {\r\n            var prevTextNodes = dom.listPrev(container, func.not(dom.isText));\r\n            var prevContainer = lists.last(prevTextNodes).previousSibling;\r\n            node = prevContainer || container.parentNode;\r\n            offset += lists.sum(lists.tail(prevTextNodes), dom.nodeLength);\r\n            isCollapseToStart = !prevContainer;\r\n        }\r\n        else {\r\n            node = container.childNodes[offset] || container;\r\n            if (dom.isText(node)) {\r\n                return textRangeInfo(node, 0);\r\n            }\r\n            offset = 0;\r\n            isCollapseToStart = false;\r\n        }\r\n        return {\r\n            node: node,\r\n            collapseToStart: isCollapseToStart,\r\n            offset: offset\r\n        };\r\n    };\r\n    var textRange = document.body.createTextRange();\r\n    var info = textRangeInfo(point.node, point.offset);\r\n    textRange.moveToElementText(info.node);\r\n    textRange.collapse(info.collapseToStart);\r\n    textRange.moveStart('character', info.offset);\r\n    return textRange;\r\n}\r\n/**\r\n   * Wrapped Range\r\n   *\r\n   * @constructor\r\n   * @param {Node} sc - start container\r\n   * @param {Number} so - start offset\r\n   * @param {Node} ec - end container\r\n   * @param {Number} eo - end offset\r\n   */\r\nvar WrappedRange = /** @class */ (function () {\r\n    function WrappedRange(sc, so, ec, eo) {\r\n        this.sc = sc;\r\n        this.so = so;\r\n        this.ec = ec;\r\n        this.eo = eo;\r\n        // isOnEditable: judge whether range is on editable or not\r\n        this.isOnEditable = this.makeIsOn(dom.isEditable);\r\n        // isOnList: judge whether range is on list node or not\r\n        this.isOnList = this.makeIsOn(dom.isList);\r\n        // isOnAnchor: judge whether range is on anchor node or not\r\n        this.isOnAnchor = this.makeIsOn(dom.isAnchor);\r\n        // isOnCell: judge whether range is on cell node or not\r\n        this.isOnCell = this.makeIsOn(dom.isCell);\r\n        // isOnData: judge whether range is on data node or not\r\n        this.isOnData = this.makeIsOn(dom.isData);\r\n    }\r\n    // nativeRange: get nativeRange from sc, so, ec, eo\r\n    WrappedRange.prototype.nativeRange = function () {\r\n        if (env.isW3CRangeSupport) {\r\n            var w3cRange = document.createRange();\r\n            w3cRange.setStart(this.sc, this.so);\r\n            w3cRange.setEnd(this.ec, this.eo);\r\n            return w3cRange;\r\n        }\r\n        else {\r\n            var textRange = pointToTextRange({\r\n                node: this.sc,\r\n                offset: this.so\r\n            });\r\n            textRange.setEndPoint('EndToEnd', pointToTextRange({\r\n                node: this.ec,\r\n                offset: this.eo\r\n            }));\r\n            return textRange;\r\n        }\r\n    };\r\n    WrappedRange.prototype.getPoints = function () {\r\n        return {\r\n            sc: this.sc,\r\n            so: this.so,\r\n            ec: this.ec,\r\n            eo: this.eo\r\n        };\r\n    };\r\n    WrappedRange.prototype.getStartPoint = function () {\r\n        return {\r\n            node: this.sc,\r\n            offset: this.so\r\n        };\r\n    };\r\n    WrappedRange.prototype.getEndPoint = function () {\r\n        return {\r\n            node: this.ec,\r\n            offset: this.eo\r\n        };\r\n    };\r\n    /**\r\n     * select update visible range\r\n     */\r\n    WrappedRange.prototype.select = function () {\r\n        var nativeRng = this.nativeRange();\r\n        if (env.isW3CRangeSupport) {\r\n            var selection = document.getSelection();\r\n            if (selection.rangeCount > 0) {\r\n                selection.removeAllRanges();\r\n            }\r\n            selection.addRange(nativeRng);\r\n        }\r\n        else {\r\n            nativeRng.select();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Moves the scrollbar to start container(sc) of current range\r\n     *\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.scrollIntoView = function (container) {\r\n        var height = $$1(container).height();\r\n        if (container.scrollTop + height < this.sc.offsetTop) {\r\n            container.scrollTop += Math.abs(container.scrollTop + height - this.sc.offsetTop);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.normalize = function () {\r\n        /**\r\n         * @param {BoundaryPoint} point\r\n         * @param {Boolean} isLeftToRight\r\n         * @return {BoundaryPoint}\r\n         */\r\n        var getVisiblePoint = function (point, isLeftToRight) {\r\n            if ((dom.isVisiblePoint(point) && !dom.isEdgePoint(point)) ||\r\n                (dom.isVisiblePoint(point) && dom.isRightEdgePoint(point) && !isLeftToRight) ||\r\n                (dom.isVisiblePoint(point) && dom.isLeftEdgePoint(point) && isLeftToRight) ||\r\n                (dom.isVisiblePoint(point) && dom.isBlock(point.node) && dom.isEmpty(point.node))) {\r\n                return point;\r\n            }\r\n            // point on block's edge\r\n            var block = dom.ancestor(point.node, dom.isBlock);\r\n            if (((dom.isLeftEdgePointOf(point, block) || dom.isVoid(dom.prevPoint(point).node)) && !isLeftToRight) ||\r\n                ((dom.isRightEdgePointOf(point, block) || dom.isVoid(dom.nextPoint(point).node)) && isLeftToRight)) {\r\n                // returns point already on visible point\r\n                if (dom.isVisiblePoint(point)) {\r\n                    return point;\r\n                }\r\n                // reverse direction\r\n                isLeftToRight = !isLeftToRight;\r\n            }\r\n            var nextPoint = isLeftToRight ? dom.nextPointUntil(dom.nextPoint(point), dom.isVisiblePoint)\r\n                : dom.prevPointUntil(dom.prevPoint(point), dom.isVisiblePoint);\r\n            return nextPoint || point;\r\n        };\r\n        var endPoint = getVisiblePoint(this.getEndPoint(), false);\r\n        var startPoint = this.isCollapsed() ? endPoint : getVisiblePoint(this.getStartPoint(), true);\r\n        return new WrappedRange(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset);\r\n    };\r\n    /**\r\n     * returns matched nodes on range\r\n     *\r\n     * @param {Function} [pred] - predicate function\r\n     * @param {Object} [options]\r\n     * @param {Boolean} [options.includeAncestor]\r\n     * @param {Boolean} [options.fullyContains]\r\n     * @return {Node[]}\r\n     */\r\n    WrappedRange.prototype.nodes = function (pred, options) {\r\n        pred = pred || func.ok;\r\n        var includeAncestor = options && options.includeAncestor;\r\n        var fullyContains = options && options.fullyContains;\r\n        // TODO compare points and sort\r\n        var startPoint = this.getStartPoint();\r\n        var endPoint = this.getEndPoint();\r\n        var nodes = [];\r\n        var leftEdgeNodes = [];\r\n        dom.walkPoint(startPoint, endPoint, function (point) {\r\n            if (dom.isEditable(point.node)) {\r\n                return;\r\n            }\r\n            var node;\r\n            if (fullyContains) {\r\n                if (dom.isLeftEdgePoint(point)) {\r\n                    leftEdgeNodes.push(point.node);\r\n                }\r\n                if (dom.isRightEdgePoint(point) && lists.contains(leftEdgeNodes, point.node)) {\r\n                    node = point.node;\r\n                }\r\n            }\r\n            else if (includeAncestor) {\r\n                node = dom.ancestor(point.node, pred);\r\n            }\r\n            else {\r\n                node = point.node;\r\n            }\r\n            if (node && pred(node)) {\r\n                nodes.push(node);\r\n            }\r\n        }, true);\r\n        return lists.unique(nodes);\r\n    };\r\n    /**\r\n     * returns commonAncestor of range\r\n     * @return {Element} - commonAncestor\r\n     */\r\n    WrappedRange.prototype.commonAncestor = function () {\r\n        return dom.commonAncestor(this.sc, this.ec);\r\n    };\r\n    /**\r\n     * returns expanded range by pred\r\n     *\r\n     * @param {Function} pred - predicate function\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.expand = function (pred) {\r\n        var startAncestor = dom.ancestor(this.sc, pred);\r\n        var endAncestor = dom.ancestor(this.ec, pred);\r\n        if (!startAncestor && !endAncestor) {\r\n            return new WrappedRange(this.sc, this.so, this.ec, this.eo);\r\n        }\r\n        var boundaryPoints = this.getPoints();\r\n        if (startAncestor) {\r\n            boundaryPoints.sc = startAncestor;\r\n            boundaryPoints.so = 0;\r\n        }\r\n        if (endAncestor) {\r\n            boundaryPoints.ec = endAncestor;\r\n            boundaryPoints.eo = dom.nodeLength(endAncestor);\r\n        }\r\n        return new WrappedRange(boundaryPoints.sc, boundaryPoints.so, boundaryPoints.ec, boundaryPoints.eo);\r\n    };\r\n    /**\r\n     * @param {Boolean} isCollapseToStart\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.collapse = function (isCollapseToStart) {\r\n        if (isCollapseToStart) {\r\n            return new WrappedRange(this.sc, this.so, this.sc, this.so);\r\n        }\r\n        else {\r\n            return new WrappedRange(this.ec, this.eo, this.ec, this.eo);\r\n        }\r\n    };\r\n    /**\r\n     * splitText on range\r\n     */\r\n    WrappedRange.prototype.splitText = function () {\r\n        var isSameContainer = this.sc === this.ec;\r\n        var boundaryPoints = this.getPoints();\r\n        if (dom.isText(this.ec) && !dom.isEdgePoint(this.getEndPoint())) {\r\n            this.ec.splitText(this.eo);\r\n        }\r\n        if (dom.isText(this.sc) && !dom.isEdgePoint(this.getStartPoint())) {\r\n            boundaryPoints.sc = this.sc.splitText(this.so);\r\n            boundaryPoints.so = 0;\r\n            if (isSameContainer) {\r\n                boundaryPoints.ec = boundaryPoints.sc;\r\n                boundaryPoints.eo = this.eo - this.so;\r\n            }\r\n        }\r\n        return new WrappedRange(boundaryPoints.sc, boundaryPoints.so, boundaryPoints.ec, boundaryPoints.eo);\r\n    };\r\n    /**\r\n     * delete contents on range\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.deleteContents = function () {\r\n        if (this.isCollapsed()) {\r\n            return this;\r\n        }\r\n        var rng = this.splitText();\r\n        var nodes = rng.nodes(null, {\r\n            fullyContains: true\r\n        });\r\n        // find new cursor point\r\n        var point = dom.prevPointUntil(rng.getStartPoint(), function (point) {\r\n            return !lists.contains(nodes, point.node);\r\n        });\r\n        var emptyParents = [];\r\n        $$1.each(nodes, function (idx, node) {\r\n            // find empty parents\r\n            var parent = node.parentNode;\r\n            if (point.node !== parent && dom.nodeLength(parent) === 1) {\r\n                emptyParents.push(parent);\r\n            }\r\n            dom.remove(node, false);\r\n        });\r\n        // remove empty parents\r\n        $$1.each(emptyParents, function (idx, node) {\r\n            dom.remove(node, false);\r\n        });\r\n        return new WrappedRange(point.node, point.offset, point.node, point.offset).normalize();\r\n    };\r\n    /**\r\n     * makeIsOn: return isOn(pred) function\r\n     */\r\n    WrappedRange.prototype.makeIsOn = function (pred) {\r\n        return function () {\r\n            var ancestor = dom.ancestor(this.sc, pred);\r\n            return !!ancestor && (ancestor === dom.ancestor(this.ec, pred));\r\n        };\r\n    };\r\n    /**\r\n     * @param {Function} pred\r\n     * @return {Boolean}\r\n     */\r\n    WrappedRange.prototype.isLeftEdgeOf = function (pred) {\r\n        if (!dom.isLeftEdgePoint(this.getStartPoint())) {\r\n            return false;\r\n        }\r\n        var node = dom.ancestor(this.sc, pred);\r\n        return node && dom.isLeftEdgeOf(this.sc, node);\r\n    };\r\n    /**\r\n     * returns whether range was collapsed or not\r\n     */\r\n    WrappedRange.prototype.isCollapsed = function () {\r\n        return this.sc === this.ec && this.so === this.eo;\r\n    };\r\n    /**\r\n     * wrap inline nodes which children of body with paragraph\r\n     *\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.wrapBodyInlineWithPara = function () {\r\n        if (dom.isBodyContainer(this.sc) && dom.isEmpty(this.sc)) {\r\n            this.sc.innerHTML = dom.emptyPara;\r\n            return new WrappedRange(this.sc.firstChild, 0, this.sc.firstChild, 0);\r\n        }\r\n        /**\r\n         * [workaround] firefox often create range on not visible point. so normalize here.\r\n         *  - firefox: |<p>text</p>|\r\n         *  - chrome: <p>|text|</p>\r\n         */\r\n        var rng = this.normalize();\r\n        if (dom.isParaInline(this.sc) || dom.isPara(this.sc)) {\r\n            return rng;\r\n        }\r\n        // find inline top ancestor\r\n        var topAncestor;\r\n        if (dom.isInline(rng.sc)) {\r\n            var ancestors = dom.listAncestor(rng.sc, func.not(dom.isInline));\r\n            topAncestor = lists.last(ancestors);\r\n            if (!dom.isInline(topAncestor)) {\r\n                topAncestor = ancestors[ancestors.length - 2] || rng.sc.childNodes[rng.so];\r\n            }\r\n        }\r\n        else {\r\n            topAncestor = rng.sc.childNodes[rng.so > 0 ? rng.so - 1 : 0];\r\n        }\r\n        // siblings not in paragraph\r\n        var inlineSiblings = dom.listPrev(topAncestor, dom.isParaInline).reverse();\r\n        inlineSiblings = inlineSiblings.concat(dom.listNext(topAncestor.nextSibling, dom.isParaInline));\r\n        // wrap with paragraph\r\n        if (inlineSiblings.length) {\r\n            var para = dom.wrap(lists.head(inlineSiblings), 'p');\r\n            dom.appendChildNodes(para, lists.tail(inlineSiblings));\r\n        }\r\n        return this.normalize();\r\n    };\r\n    /**\r\n     * insert node at current cursor\r\n     *\r\n     * @param {Node} node\r\n     * @return {Node}\r\n     */\r\n    WrappedRange.prototype.insertNode = function (node) {\r\n        var rng = this.wrapBodyInlineWithPara().deleteContents();\r\n        var info = dom.splitPoint(rng.getStartPoint(), dom.isInline(node));\r\n        if (info.rightNode) {\r\n            info.rightNode.parentNode.insertBefore(node, info.rightNode);\r\n        }\r\n        else {\r\n            info.container.appendChild(node);\r\n        }\r\n        return node;\r\n    };\r\n    /**\r\n     * insert html at current cursor\r\n     */\r\n    WrappedRange.prototype.pasteHTML = function (markup) {\r\n        var contentsContainer = $$1('<div></div>').html(markup)[0];\r\n        var childNodes = lists.from(contentsContainer.childNodes);\r\n        var rng = this.wrapBodyInlineWithPara().deleteContents();\r\n        return childNodes.reverse().map(function (childNode) {\r\n            return rng.insertNode(childNode);\r\n        }).reverse();\r\n    };\r\n    /**\r\n     * returns text in range\r\n     *\r\n     * @return {String}\r\n     */\r\n    WrappedRange.prototype.toString = function () {\r\n        var nativeRng = this.nativeRange();\r\n        return env.isW3CRangeSupport ? nativeRng.toString() : nativeRng.text;\r\n    };\r\n    /**\r\n     * returns range for word before cursor\r\n     *\r\n     * @param {Boolean} [findAfter] - find after cursor, default: false\r\n     * @return {WrappedRange}\r\n     */\r\n    WrappedRange.prototype.getWordRange = function (findAfter) {\r\n        var endPoint = this.getEndPoint();\r\n        if (!dom.isCharPoint(endPoint)) {\r\n            return this;\r\n        }\r\n        var startPoint = dom.prevPointUntil(endPoint, function (point) {\r\n            return !dom.isCharPoint(point);\r\n        });\r\n        if (findAfter) {\r\n            endPoint = dom.nextPointUntil(endPoint, function (point) {\r\n                return !dom.isCharPoint(point);\r\n            });\r\n        }\r\n        return new WrappedRange(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset);\r\n    };\r\n    /**\r\n     * create offsetPath bookmark\r\n     *\r\n     * @param {Node} editable\r\n     */\r\n    WrappedRange.prototype.bookmark = function (editable) {\r\n        return {\r\n            s: {\r\n                path: dom.makeOffsetPath(editable, this.sc),\r\n                offset: this.so\r\n            },\r\n            e: {\r\n                path: dom.makeOffsetPath(editable, this.ec),\r\n                offset: this.eo\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * create offsetPath bookmark base on paragraph\r\n     *\r\n     * @param {Node[]} paras\r\n     */\r\n    WrappedRange.prototype.paraBookmark = function (paras) {\r\n        return {\r\n            s: {\r\n                path: lists.tail(dom.makeOffsetPath(lists.head(paras), this.sc)),\r\n                offset: this.so\r\n            },\r\n            e: {\r\n                path: lists.tail(dom.makeOffsetPath(lists.last(paras), this.ec)),\r\n                offset: this.eo\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * getClientRects\r\n     * @return {Rect[]}\r\n     */\r\n    WrappedRange.prototype.getClientRects = function () {\r\n        var nativeRng = this.nativeRange();\r\n        return nativeRng.getClientRects();\r\n    };\r\n    return WrappedRange;\r\n}());\r\n/**\r\n * Data structure\r\n *  * BoundaryPoint: a point of dom tree\r\n *  * BoundaryPoints: two boundaryPoints corresponding to the start and the end of the Range\r\n *\r\n * See to http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Position\r\n */\r\nvar range = {\r\n    /**\r\n     * create Range Object From arguments or Browser Selection\r\n     *\r\n     * @param {Node} sc - start container\r\n     * @param {Number} so - start offset\r\n     * @param {Node} ec - end container\r\n     * @param {Number} eo - end offset\r\n     * @return {WrappedRange}\r\n     */\r\n    create: function (sc, so, ec, eo) {\r\n        if (arguments.length === 4) {\r\n            return new WrappedRange(sc, so, ec, eo);\r\n        }\r\n        else if (arguments.length === 2) {\r\n            ec = sc;\r\n            eo = so;\r\n            return new WrappedRange(sc, so, ec, eo);\r\n        }\r\n        else {\r\n            var wrappedRange = this.createFromSelection();\r\n            if (!wrappedRange && arguments.length === 1) {\r\n                wrappedRange = this.createFromNode(arguments[0]);\r\n                return wrappedRange.collapse(dom.emptyPara === arguments[0].innerHTML);\r\n            }\r\n            return wrappedRange;\r\n        }\r\n    },\r\n    createFromSelection: function () {\r\n        var sc, so, ec, eo;\r\n        if (env.isW3CRangeSupport) {\r\n            var selection = document.getSelection();\r\n            if (!selection || selection.rangeCount === 0) {\r\n                return null;\r\n            }\r\n            else if (dom.isBody(selection.anchorNode)) {\r\n                // Firefox: returns entire body as range on initialization.\r\n                // We won't never need it.\r\n                return null;\r\n            }\r\n            var nativeRng = selection.getRangeAt(0);\r\n            sc = nativeRng.startContainer;\r\n            so = nativeRng.startOffset;\r\n            ec = nativeRng.endContainer;\r\n            eo = nativeRng.endOffset;\r\n        }\r\n        else {\r\n            var textRange = document.selection.createRange();\r\n            var textRangeEnd = textRange.duplicate();\r\n            textRangeEnd.collapse(false);\r\n            var textRangeStart = textRange;\r\n            textRangeStart.collapse(true);\r\n            var startPoint = textRangeToPoint(textRangeStart, true);\r\n            var endPoint = textRangeToPoint(textRangeEnd, false);\r\n            // same visible point case: range was collapsed.\r\n            if (dom.isText(startPoint.node) && dom.isLeftEdgePoint(startPoint) &&\r\n                dom.isTextNode(endPoint.node) && dom.isRightEdgePoint(endPoint) &&\r\n                endPoint.node.nextSibling === startPoint.node) {\r\n                startPoint = endPoint;\r\n            }\r\n            sc = startPoint.cont;\r\n            so = startPoint.offset;\r\n            ec = endPoint.cont;\r\n            eo = endPoint.offset;\r\n        }\r\n        return new WrappedRange(sc, so, ec, eo);\r\n    },\r\n    /**\r\n     * @method\r\n     *\r\n     * create WrappedRange from node\r\n     *\r\n     * @param {Node} node\r\n     * @return {WrappedRange}\r\n     */\r\n    createFromNode: function (node) {\r\n        var sc = node;\r\n        var so = 0;\r\n        var ec = node;\r\n        var eo = dom.nodeLength(ec);\r\n        // browsers can't target a picture or void node\r\n        if (dom.isVoid(sc)) {\r\n            so = dom.listPrev(sc).length - 1;\r\n            sc = sc.parentNode;\r\n        }\r\n        if (dom.isBR(ec)) {\r\n            eo = dom.listPrev(ec).length - 1;\r\n            ec = ec.parentNode;\r\n        }\r\n        else if (dom.isVoid(ec)) {\r\n            eo = dom.listPrev(ec).length;\r\n            ec = ec.parentNode;\r\n        }\r\n        return this.create(sc, so, ec, eo);\r\n    },\r\n    /**\r\n     * create WrappedRange from node after position\r\n     *\r\n     * @param {Node} node\r\n     * @return {WrappedRange}\r\n     */\r\n    createFromNodeBefore: function (node) {\r\n        return this.createFromNode(node).collapse(true);\r\n    },\r\n    /**\r\n     * create WrappedRange from node after position\r\n     *\r\n     * @param {Node} node\r\n     * @return {WrappedRange}\r\n     */\r\n    createFromNodeAfter: function (node) {\r\n        return this.createFromNode(node).collapse();\r\n    },\r\n    /**\r\n     * @method\r\n     *\r\n     * create WrappedRange from bookmark\r\n     *\r\n     * @param {Node} editable\r\n     * @param {Object} bookmark\r\n     * @return {WrappedRange}\r\n     */\r\n    createFromBookmark: function (editable, bookmark) {\r\n        var sc = dom.fromOffsetPath(editable, bookmark.s.path);\r\n        var so = bookmark.s.offset;\r\n        var ec = dom.fromOffsetPath(editable, bookmark.e.path);\r\n        var eo = bookmark.e.offset;\r\n        return new WrappedRange(sc, so, ec, eo);\r\n    },\r\n    /**\r\n     * @method\r\n     *\r\n     * create WrappedRange from paraBookmark\r\n     *\r\n     * @param {Object} bookmark\r\n     * @param {Node[]} paras\r\n     * @return {WrappedRange}\r\n     */\r\n    createFromParaBookmark: function (bookmark, paras) {\r\n        var so = bookmark.s.offset;\r\n        var eo = bookmark.e.offset;\r\n        var sc = dom.fromOffsetPath(lists.head(paras), bookmark.s.path);\r\n        var ec = dom.fromOffsetPath(lists.last(paras), bookmark.e.path);\r\n        return new WrappedRange(sc, so, ec, eo);\r\n    }\r\n};\r\n\r\n/**\r\n * @method readFileAsDataURL\r\n *\r\n * read contents of file as representing URL\r\n *\r\n * @param {File} file\r\n * @return {Promise} - then: dataUrl\r\n */\r\nfunction readFileAsDataURL(file) {\r\n    return $$1.Deferred(function (deferred) {\r\n        $$1.extend(new FileReader(), {\r\n            onload: function (e) {\r\n                var dataURL = e.target.result;\r\n                deferred.resolve(dataURL);\r\n            },\r\n            onerror: function (err) {\r\n                deferred.reject(err);\r\n            }\r\n        }).readAsDataURL(file);\r\n    }).promise();\r\n}\r\n/**\r\n * @method createImage\r\n *\r\n * create `<image>` from url string\r\n *\r\n * @param {String} url\r\n * @return {Promise} - then: $image\r\n */\r\nfunction createImage(url) {\r\n    return $$1.Deferred(function (deferred) {\r\n        var $img = $$1('<img>');\r\n        $img.one('load', function () {\r\n            $img.off('error abort');\r\n            deferred.resolve($img);\r\n        }).one('error abort', function () {\r\n            $img.off('load').detach();\r\n            deferred.reject($img);\r\n        }).css({\r\n            display: 'none'\r\n        }).appendTo(document.body).attr('src', url);\r\n    }).promise();\r\n}\r\n\r\nvar History = /** @class */ (function () {\r\n    function History($editable) {\r\n        this.stack = [];\r\n        this.stackOffset = -1;\r\n        this.$editable = $editable;\r\n        this.editable = $editable[0];\r\n    }\r\n    History.prototype.makeSnapshot = function () {\r\n        var rng = range.create(this.editable);\r\n        var emptyBookmark = { s: { path: [], offset: 0 }, e: { path: [], offset: 0 } };\r\n        return {\r\n            contents: this.$editable.html(),\r\n            bookmark: (rng ? rng.bookmark(this.editable) : emptyBookmark)\r\n        };\r\n    };\r\n    History.prototype.applySnapshot = function (snapshot) {\r\n        if (snapshot.contents !== null) {\r\n            this.$editable.html(snapshot.contents);\r\n        }\r\n        if (snapshot.bookmark !== null) {\r\n            range.createFromBookmark(this.editable, snapshot.bookmark).select();\r\n        }\r\n    };\r\n    /**\r\n    * @method rewind\r\n    * Rewinds the history stack back to the first snapshot taken.\r\n    * Leaves the stack intact, so that \"Redo\" can still be used.\r\n    */\r\n    History.prototype.rewind = function () {\r\n        // Create snap shot if not yet recorded\r\n        if (this.$editable.html() !== this.stack[this.stackOffset].contents) {\r\n            this.recordUndo();\r\n        }\r\n        // Return to the first available snapshot.\r\n        this.stackOffset = 0;\r\n        // Apply that snapshot.\r\n        this.applySnapshot(this.stack[this.stackOffset]);\r\n    };\r\n    /**\r\n    * @method reset\r\n    * Resets the history stack completely; reverting to an empty editor.\r\n    */\r\n    History.prototype.reset = function () {\r\n        // Clear the stack.\r\n        this.stack = [];\r\n        // Restore stackOffset to its original value.\r\n        this.stackOffset = -1;\r\n        // Clear the editable area.\r\n        this.$editable.html('');\r\n        // Record our first snapshot (of nothing).\r\n        this.recordUndo();\r\n    };\r\n    /**\r\n     * undo\r\n     */\r\n    History.prototype.undo = function () {\r\n        // Create snap shot if not yet recorded\r\n        if (this.$editable.html() !== this.stack[this.stackOffset].contents) {\r\n            this.recordUndo();\r\n        }\r\n        if (this.stackOffset > 0) {\r\n            this.stackOffset--;\r\n            this.applySnapshot(this.stack[this.stackOffset]);\r\n        }\r\n    };\r\n    /**\r\n     * redo\r\n     */\r\n    History.prototype.redo = function () {\r\n        if (this.stack.length - 1 > this.stackOffset) {\r\n            this.stackOffset++;\r\n            this.applySnapshot(this.stack[this.stackOffset]);\r\n        }\r\n    };\r\n    /**\r\n     * recorded undo\r\n     */\r\n    History.prototype.recordUndo = function () {\r\n        this.stackOffset++;\r\n        // Wash out stack after stackOffset\r\n        if (this.stack.length > this.stackOffset) {\r\n            this.stack = this.stack.slice(0, this.stackOffset);\r\n        }\r\n        // Create new snapshot and push it to the end\r\n        this.stack.push(this.makeSnapshot());\r\n    };\r\n    return History;\r\n}());\r\n\r\nvar Style = /** @class */ (function () {\r\n    function Style() {\r\n    }\r\n    /**\r\n     * @method jQueryCSS\r\n     *\r\n     * [workaround] for old jQuery\r\n     * passing an array of style properties to .css()\r\n     * will result in an object of property-value pairs.\r\n     * (compability with version < 1.9)\r\n     *\r\n     * @private\r\n     * @param  {jQuery} $obj\r\n     * @param  {Array} propertyNames - An array of one or more CSS properties.\r\n     * @return {Object}\r\n     */\r\n    Style.prototype.jQueryCSS = function ($obj, propertyNames) {\r\n        if (env.jqueryVersion < 1.9) {\r\n            var result_1 = {};\r\n            $$1.each(propertyNames, function (idx, propertyName) {\r\n                result_1[propertyName] = $obj.css(propertyName);\r\n            });\r\n            return result_1;\r\n        }\r\n        return $obj.css(propertyNames);\r\n    };\r\n    /**\r\n     * returns style object from node\r\n     *\r\n     * @param {jQuery} $node\r\n     * @return {Object}\r\n     */\r\n    Style.prototype.fromNode = function ($node) {\r\n        var properties = ['font-family', 'font-size', 'text-align', 'list-style-type', 'line-height'];\r\n        var styleInfo = this.jQueryCSS($node, properties) || {};\r\n        styleInfo['font-size'] = parseInt(styleInfo['font-size'], 10);\r\n        return styleInfo;\r\n    };\r\n    /**\r\n     * paragraph level style\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {Object} styleInfo\r\n     */\r\n    Style.prototype.stylePara = function (rng, styleInfo) {\r\n        $$1.each(rng.nodes(dom.isPara, {\r\n            includeAncestor: true\r\n        }), function (idx, para) {\r\n            $$1(para).css(styleInfo);\r\n        });\r\n    };\r\n    /**\r\n     * insert and returns styleNodes on range.\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {Object} [options] - options for styleNodes\r\n     * @param {String} [options.nodeName] - default: `SPAN`\r\n     * @param {Boolean} [options.expandClosestSibling] - default: `false`\r\n     * @param {Boolean} [options.onlyPartialContains] - default: `false`\r\n     * @return {Node[]}\r\n     */\r\n    Style.prototype.styleNodes = function (rng, options) {\r\n        rng = rng.splitText();\r\n        var nodeName = (options && options.nodeName) || 'SPAN';\r\n        var expandClosestSibling = !!(options && options.expandClosestSibling);\r\n        var onlyPartialContains = !!(options && options.onlyPartialContains);\r\n        if (rng.isCollapsed()) {\r\n            return [rng.insertNode(dom.create(nodeName))];\r\n        }\r\n        var pred = dom.makePredByNodeName(nodeName);\r\n        var nodes = rng.nodes(dom.isText, {\r\n            fullyContains: true\r\n        }).map(function (text) {\r\n            return dom.singleChildAncestor(text, pred) || dom.wrap(text, nodeName);\r\n        });\r\n        if (expandClosestSibling) {\r\n            if (onlyPartialContains) {\r\n                var nodesInRange_1 = rng.nodes();\r\n                // compose with partial contains predication\r\n                pred = func.and(pred, function (node) {\r\n                    return lists.contains(nodesInRange_1, node);\r\n                });\r\n            }\r\n            return nodes.map(function (node) {\r\n                var siblings = dom.withClosestSiblings(node, pred);\r\n                var head = lists.head(siblings);\r\n                var tails = lists.tail(siblings);\r\n                $$1.each(tails, function (idx, elem) {\r\n                    dom.appendChildNodes(head, elem.childNodes);\r\n                    dom.remove(elem);\r\n                });\r\n                return lists.head(siblings);\r\n            });\r\n        }\r\n        else {\r\n            return nodes;\r\n        }\r\n    };\r\n    /**\r\n     * get current style on cursor\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @return {Object} - object contains style properties.\r\n     */\r\n    Style.prototype.current = function (rng) {\r\n        var $cont = $$1(!dom.isElement(rng.sc) ? rng.sc.parentNode : rng.sc);\r\n        var styleInfo = this.fromNode($cont);\r\n        // document.queryCommandState for toggle state\r\n        // [workaround] prevent Firefox nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"\r\n        try {\r\n            styleInfo = $$1.extend(styleInfo, {\r\n                'font-bold': document.queryCommandState('bold') ? 'bold' : 'normal',\r\n                'font-italic': document.queryCommandState('italic') ? 'italic' : 'normal',\r\n                'font-underline': document.queryCommandState('underline') ? 'underline' : 'normal',\r\n                'font-subscript': document.queryCommandState('subscript') ? 'subscript' : 'normal',\r\n                'font-superscript': document.queryCommandState('superscript') ? 'superscript' : 'normal',\r\n                'font-strikethrough': document.queryCommandState('strikethrough') ? 'strikethrough' : 'normal',\r\n                'font-family': document.queryCommandValue('fontname') || styleInfo['font-family']\r\n            });\r\n        }\r\n        catch (e) { }\r\n        // list-style-type to list-style(unordered, ordered)\r\n        if (!rng.isOnList()) {\r\n            styleInfo['list-style'] = 'none';\r\n        }\r\n        else {\r\n            var orderedTypes = ['circle', 'disc', 'disc-leading-zero', 'square'];\r\n            var isUnordered = $$1.inArray(styleInfo['list-style-type'], orderedTypes) > -1;\r\n            styleInfo['list-style'] = isUnordered ? 'unordered' : 'ordered';\r\n        }\r\n        var para = dom.ancestor(rng.sc, dom.isPara);\r\n        if (para && para.style['line-height']) {\r\n            styleInfo['line-height'] = para.style.lineHeight;\r\n        }\r\n        else {\r\n            var lineHeight = parseInt(styleInfo['line-height'], 10) / parseInt(styleInfo['font-size'], 10);\r\n            styleInfo['line-height'] = lineHeight.toFixed(1);\r\n        }\r\n        styleInfo.anchor = rng.isOnAnchor() && dom.ancestor(rng.sc, dom.isAnchor);\r\n        styleInfo.ancestors = dom.listAncestor(rng.sc, dom.isEditable);\r\n        styleInfo.range = rng;\r\n        return styleInfo;\r\n    };\r\n    return Style;\r\n}());\r\n\r\nvar Bullet = /** @class */ (function () {\r\n    function Bullet() {\r\n    }\r\n    /**\r\n     * toggle ordered list\r\n     */\r\n    Bullet.prototype.insertOrderedList = function (editable) {\r\n        this.toggleList('OL', editable);\r\n    };\r\n    /**\r\n     * toggle unordered list\r\n     */\r\n    Bullet.prototype.insertUnorderedList = function (editable) {\r\n        this.toggleList('UL', editable);\r\n    };\r\n    /**\r\n     * indent\r\n     */\r\n    Bullet.prototype.indent = function (editable) {\r\n        var _this = this;\r\n        var rng = range.create(editable).wrapBodyInlineWithPara();\r\n        var paras = rng.nodes(dom.isPara, { includeAncestor: true });\r\n        var clustereds = lists.clusterBy(paras, func.peq2('parentNode'));\r\n        $$1.each(clustereds, function (idx, paras) {\r\n            var head = lists.head(paras);\r\n            if (dom.isLi(head)) {\r\n                _this.wrapList(paras, head.parentNode.nodeName);\r\n            }\r\n            else {\r\n                $$1.each(paras, function (idx, para) {\r\n                    $$1(para).css('marginLeft', function (idx, val) {\r\n                        return (parseInt(val, 10) || 0) + 25;\r\n                    });\r\n                });\r\n            }\r\n        });\r\n        rng.select();\r\n    };\r\n    /**\r\n     * outdent\r\n     */\r\n    Bullet.prototype.outdent = function (editable) {\r\n        var _this = this;\r\n        var rng = range.create(editable).wrapBodyInlineWithPara();\r\n        var paras = rng.nodes(dom.isPara, { includeAncestor: true });\r\n        var clustereds = lists.clusterBy(paras, func.peq2('parentNode'));\r\n        $$1.each(clustereds, function (idx, paras) {\r\n            var head = lists.head(paras);\r\n            if (dom.isLi(head)) {\r\n                _this.releaseList([paras]);\r\n            }\r\n            else {\r\n                $$1.each(paras, function (idx, para) {\r\n                    $$1(para).css('marginLeft', function (idx, val) {\r\n                        val = (parseInt(val, 10) || 0);\r\n                        return val > 25 ? val - 25 : '';\r\n                    });\r\n                });\r\n            }\r\n        });\r\n        rng.select();\r\n    };\r\n    /**\r\n     * toggle list\r\n     *\r\n     * @param {String} listName - OL or UL\r\n     */\r\n    Bullet.prototype.toggleList = function (listName, editable) {\r\n        var _this = this;\r\n        var rng = range.create(editable).wrapBodyInlineWithPara();\r\n        var paras = rng.nodes(dom.isPara, { includeAncestor: true });\r\n        var bookmark = rng.paraBookmark(paras);\r\n        var clustereds = lists.clusterBy(paras, func.peq2('parentNode'));\r\n        // paragraph to list\r\n        if (lists.find(paras, dom.isPurePara)) {\r\n            var wrappedParas_1 = [];\r\n            $$1.each(clustereds, function (idx, paras) {\r\n                wrappedParas_1 = wrappedParas_1.concat(_this.wrapList(paras, listName));\r\n            });\r\n            paras = wrappedParas_1;\r\n            // list to paragraph or change list style\r\n        }\r\n        else {\r\n            var diffLists = rng.nodes(dom.isList, {\r\n                includeAncestor: true\r\n            }).filter(function (listNode) {\r\n                return !$$1.nodeName(listNode, listName);\r\n            });\r\n            if (diffLists.length) {\r\n                $$1.each(diffLists, function (idx, listNode) {\r\n                    dom.replace(listNode, listName);\r\n                });\r\n            }\r\n            else {\r\n                paras = this.releaseList(clustereds, true);\r\n            }\r\n        }\r\n        range.createFromParaBookmark(bookmark, paras).select();\r\n    };\r\n    /**\r\n     * @param {Node[]} paras\r\n     * @param {String} listName\r\n     * @return {Node[]}\r\n     */\r\n    Bullet.prototype.wrapList = function (paras, listName) {\r\n        var head = lists.head(paras);\r\n        var last = lists.last(paras);\r\n        var prevList = dom.isList(head.previousSibling) && head.previousSibling;\r\n        var nextList = dom.isList(last.nextSibling) && last.nextSibling;\r\n        var listNode = prevList || dom.insertAfter(dom.create(listName || 'UL'), last);\r\n        // P to LI\r\n        paras = paras.map(function (para) {\r\n            return dom.isPurePara(para) ? dom.replace(para, 'LI') : para;\r\n        });\r\n        // append to list(<ul>, <ol>)\r\n        dom.appendChildNodes(listNode, paras);\r\n        if (nextList) {\r\n            dom.appendChildNodes(listNode, lists.from(nextList.childNodes));\r\n            dom.remove(nextList);\r\n        }\r\n        return paras;\r\n    };\r\n    /**\r\n     * @method releaseList\r\n     *\r\n     * @param {Array[]} clustereds\r\n     * @param {Boolean} isEscapseToBody\r\n     * @return {Node[]}\r\n     */\r\n    Bullet.prototype.releaseList = function (clustereds, isEscapseToBody) {\r\n        var releasedParas = [];\r\n        $$1.each(clustereds, function (idx, paras) {\r\n            var head = lists.head(paras);\r\n            var last = lists.last(paras);\r\n            var headList = isEscapseToBody ? dom.lastAncestor(head, dom.isList) : head.parentNode;\r\n            var lastList = headList.childNodes.length > 1 ? dom.splitTree(headList, {\r\n                node: last.parentNode,\r\n                offset: dom.position(last) + 1\r\n            }, {\r\n                isSkipPaddingBlankHTML: true\r\n            }) : null;\r\n            var middleList = dom.splitTree(headList, {\r\n                node: head.parentNode,\r\n                offset: dom.position(head)\r\n            }, {\r\n                isSkipPaddingBlankHTML: true\r\n            });\r\n            paras = isEscapseToBody ? dom.listDescendant(middleList, dom.isLi)\r\n                : lists.from(middleList.childNodes).filter(dom.isLi);\r\n            // LI to P\r\n            if (isEscapseToBody || !dom.isList(headList.parentNode)) {\r\n                paras = paras.map(function (para) {\r\n                    return dom.replace(para, 'P');\r\n                });\r\n            }\r\n            $$1.each(lists.from(paras).reverse(), function (idx, para) {\r\n                dom.insertAfter(para, headList);\r\n            });\r\n            // remove empty lists\r\n            var rootLists = lists.compact([headList, middleList, lastList]);\r\n            $$1.each(rootLists, function (idx, rootList) {\r\n                var listNodes = [rootList].concat(dom.listDescendant(rootList, dom.isList));\r\n                $$1.each(listNodes.reverse(), function (idx, listNode) {\r\n                    if (!dom.nodeLength(listNode)) {\r\n                        dom.remove(listNode, true);\r\n                    }\r\n                });\r\n            });\r\n            releasedParas = releasedParas.concat(paras);\r\n        });\r\n        return releasedParas;\r\n    };\r\n    return Bullet;\r\n}());\r\n\r\n/**\r\n * @class editing.Typing\r\n *\r\n * Typing\r\n *\r\n */\r\nvar Typing = /** @class */ (function () {\r\n    function Typing() {\r\n        // a Bullet instance to toggle lists off\r\n        this.bullet = new Bullet();\r\n    }\r\n    /**\r\n     * insert tab\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {Number} tabsize\r\n     */\r\n    Typing.prototype.insertTab = function (rng, tabsize) {\r\n        var tab = dom.createText(new Array(tabsize + 1).join(dom.NBSP_CHAR));\r\n        rng = rng.deleteContents();\r\n        rng.insertNode(tab, true);\r\n        rng = range.create(tab, tabsize);\r\n        rng.select();\r\n    };\r\n    /**\r\n     * insert paragraph\r\n     */\r\n    Typing.prototype.insertParagraph = function (editable) {\r\n        var rng = range.create(editable);\r\n        // deleteContents on range.\r\n        rng = rng.deleteContents();\r\n        // Wrap range if it needs to be wrapped by paragraph\r\n        rng = rng.wrapBodyInlineWithPara();\r\n        // finding paragraph\r\n        var splitRoot = dom.ancestor(rng.sc, dom.isPara);\r\n        var nextPara;\r\n        // on paragraph: split paragraph\r\n        if (splitRoot) {\r\n            // if it is an empty line with li\r\n            if (dom.isEmpty(splitRoot) && dom.isLi(splitRoot)) {\r\n                // toogle UL/OL and escape\r\n                this.bullet.toggleList(splitRoot.parentNode.nodeName);\r\n                return;\r\n                // if it is an empty line with para on blockquote\r\n            }\r\n            else if (dom.isEmpty(splitRoot) && dom.isPara(splitRoot) && dom.isBlockquote(splitRoot.parentNode)) {\r\n                // escape blockquote\r\n                dom.insertAfter(splitRoot, splitRoot.parentNode);\r\n                nextPara = splitRoot;\r\n                // if new line has content (not a line break)\r\n            }\r\n            else {\r\n                nextPara = dom.splitTree(splitRoot, rng.getStartPoint());\r\n                var emptyAnchors = dom.listDescendant(splitRoot, dom.isEmptyAnchor);\r\n                emptyAnchors = emptyAnchors.concat(dom.listDescendant(nextPara, dom.isEmptyAnchor));\r\n                $$1.each(emptyAnchors, function (idx, anchor) {\r\n                    dom.remove(anchor);\r\n                });\r\n                // replace empty heading, pre or custom-made styleTag with P tag\r\n                if ((dom.isHeading(nextPara) || dom.isPre(nextPara) || dom.isCustomStyleTag(nextPara)) && dom.isEmpty(nextPara)) {\r\n                    nextPara = dom.replace(nextPara, 'p');\r\n                }\r\n            }\r\n            // no paragraph: insert empty paragraph\r\n        }\r\n        else {\r\n            var next = rng.sc.childNodes[rng.so];\r\n            nextPara = $$1(dom.emptyPara)[0];\r\n            if (next) {\r\n                rng.sc.insertBefore(nextPara, next);\r\n            }\r\n            else {\r\n                rng.sc.appendChild(nextPara);\r\n            }\r\n        }\r\n        range.create(nextPara, 0).normalize().select().scrollIntoView(editable);\r\n    };\r\n    return Typing;\r\n}());\r\n\r\n/**\r\n * @class Create a virtual table to create what actions to do in change.\r\n * @param {object} startPoint Cell selected to apply change.\r\n * @param {enum} where  Where change will be applied Row or Col. Use enum: TableResultAction.where\r\n * @param {enum} action Action to be applied. Use enum: TableResultAction.requestAction\r\n * @param {object} domTable Dom element of table to make changes.\r\n */\r\nvar TableResultAction = function (startPoint, where, action, domTable) {\r\n    var _startPoint = { 'colPos': 0, 'rowPos': 0 };\r\n    var _virtualTable = [];\r\n    var _actionCellList = [];\r\n    /// ///////////////////////////////////////////\r\n    // Private functions\r\n    /// ///////////////////////////////////////////\r\n    /**\r\n     * Set the startPoint of action.\r\n     */\r\n    function setStartPoint() {\r\n        if (!startPoint || !startPoint.tagName || (startPoint.tagName.toLowerCase() !== 'td' && startPoint.tagName.toLowerCase() !== 'th')) {\r\n            console.error('Impossible to identify start Cell point.', startPoint);\r\n            return;\r\n        }\r\n        _startPoint.colPos = startPoint.cellIndex;\r\n        if (!startPoint.parentElement || !startPoint.parentElement.tagName || startPoint.parentElement.tagName.toLowerCase() !== 'tr') {\r\n            console.error('Impossible to identify start Row point.', startPoint);\r\n            return;\r\n        }\r\n        _startPoint.rowPos = startPoint.parentElement.rowIndex;\r\n    }\r\n    /**\r\n     * Define virtual table position info object.\r\n     *\r\n     * @param {int} rowIndex Index position in line of virtual table.\r\n     * @param {int} cellIndex Index position in column of virtual table.\r\n     * @param {object} baseRow Row affected by this position.\r\n     * @param {object} baseCell Cell affected by this position.\r\n     * @param {bool} isSpan Inform if it is an span cell/row.\r\n     */\r\n    function setVirtualTablePosition(rowIndex, cellIndex, baseRow, baseCell, isRowSpan, isColSpan, isVirtualCell) {\r\n        var objPosition = {\r\n            'baseRow': baseRow,\r\n            'baseCell': baseCell,\r\n            'isRowSpan': isRowSpan,\r\n            'isColSpan': isColSpan,\r\n            'isVirtual': isVirtualCell\r\n        };\r\n        if (!_virtualTable[rowIndex]) {\r\n            _virtualTable[rowIndex] = [];\r\n        }\r\n        _virtualTable[rowIndex][cellIndex] = objPosition;\r\n    }\r\n    /**\r\n     * Create action cell object.\r\n     *\r\n     * @param {object} virtualTableCellObj Object of specific position on virtual table.\r\n     * @param {enum} resultAction Action to be applied in that item.\r\n     */\r\n    function getActionCell(virtualTableCellObj, resultAction, virtualRowPosition, virtualColPosition) {\r\n        return {\r\n            'baseCell': virtualTableCellObj.baseCell,\r\n            'action': resultAction,\r\n            'virtualTable': {\r\n                'rowIndex': virtualRowPosition,\r\n                'cellIndex': virtualColPosition\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * Recover free index of row to append Cell.\r\n     *\r\n     * @param {int} rowIndex Index of row to find free space.\r\n     * @param {int} cellIndex Index of cell to find free space in table.\r\n     */\r\n    function recoverCellIndex(rowIndex, cellIndex) {\r\n        if (!_virtualTable[rowIndex]) {\r\n            return cellIndex;\r\n        }\r\n        if (!_virtualTable[rowIndex][cellIndex]) {\r\n            return cellIndex;\r\n        }\r\n        var newCellIndex = cellIndex;\r\n        while (_virtualTable[rowIndex][newCellIndex]) {\r\n            newCellIndex++;\r\n            if (!_virtualTable[rowIndex][newCellIndex]) {\r\n                return newCellIndex;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Recover info about row and cell and add information to virtual table.\r\n     *\r\n     * @param {object} row Row to recover information.\r\n     * @param {object} cell Cell to recover information.\r\n     */\r\n    function addCellInfoToVirtual(row, cell) {\r\n        var cellIndex = recoverCellIndex(row.rowIndex, cell.cellIndex);\r\n        var cellHasColspan = (cell.colSpan > 1);\r\n        var cellHasRowspan = (cell.rowSpan > 1);\r\n        var isThisSelectedCell = (row.rowIndex === _startPoint.rowPos && cell.cellIndex === _startPoint.colPos);\r\n        setVirtualTablePosition(row.rowIndex, cellIndex, row, cell, cellHasRowspan, cellHasColspan, false);\r\n        // Add span rows to virtual Table.\r\n        var rowspanNumber = cell.attributes.rowSpan ? parseInt(cell.attributes.rowSpan.value, 10) : 0;\r\n        if (rowspanNumber > 1) {\r\n            for (var rp = 1; rp < rowspanNumber; rp++) {\r\n                var rowspanIndex = row.rowIndex + rp;\r\n                adjustStartPoint(rowspanIndex, cellIndex, cell, isThisSelectedCell);\r\n                setVirtualTablePosition(rowspanIndex, cellIndex, row, cell, true, cellHasColspan, true);\r\n            }\r\n        }\r\n        // Add span cols to virtual table.\r\n        var colspanNumber = cell.attributes.colSpan ? parseInt(cell.attributes.colSpan.value, 10) : 0;\r\n        if (colspanNumber > 1) {\r\n            for (var cp = 1; cp < colspanNumber; cp++) {\r\n                var cellspanIndex = recoverCellIndex(row.rowIndex, (cellIndex + cp));\r\n                adjustStartPoint(row.rowIndex, cellspanIndex, cell, isThisSelectedCell);\r\n                setVirtualTablePosition(row.rowIndex, cellspanIndex, row, cell, cellHasRowspan, true, true);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Process validation and adjust of start point if needed\r\n     *\r\n     * @param {int} rowIndex\r\n     * @param {int} cellIndex\r\n     * @param {object} cell\r\n     * @param {bool} isSelectedCell\r\n     */\r\n    function adjustStartPoint(rowIndex, cellIndex, cell, isSelectedCell) {\r\n        if (rowIndex === _startPoint.rowPos && _startPoint.colPos >= cell.cellIndex && cell.cellIndex <= cellIndex && !isSelectedCell) {\r\n            _startPoint.colPos++;\r\n        }\r\n    }\r\n    /**\r\n     * Create virtual table of cells with all cells, including span cells.\r\n     */\r\n    function createVirtualTable() {\r\n        var rows = domTable.rows;\r\n        for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\r\n            var cells = rows[rowIndex].cells;\r\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++) {\r\n                addCellInfoToVirtual(rows[rowIndex], cells[cellIndex]);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Get action to be applied on the cell.\r\n     *\r\n     * @param {object} cell virtual table cell to apply action\r\n     */\r\n    function getDeleteResultActionToCell(cell) {\r\n        switch (where) {\r\n            case TableResultAction.where.Column:\r\n                if (cell.isColSpan) {\r\n                    return TableResultAction.resultAction.SubtractSpanCount;\r\n                }\r\n                break;\r\n            case TableResultAction.where.Row:\r\n                if (!cell.isVirtual && cell.isRowSpan) {\r\n                    return TableResultAction.resultAction.AddCell;\r\n                }\r\n                else if (cell.isRowSpan) {\r\n                    return TableResultAction.resultAction.SubtractSpanCount;\r\n                }\r\n                break;\r\n        }\r\n        return TableResultAction.resultAction.RemoveCell;\r\n    }\r\n    /**\r\n     * Get action to be applied on the cell.\r\n     *\r\n     * @param {object} cell virtual table cell to apply action\r\n     */\r\n    function getAddResultActionToCell(cell) {\r\n        switch (where) {\r\n            case TableResultAction.where.Column:\r\n                if (cell.isColSpan) {\r\n                    return TableResultAction.resultAction.SumSpanCount;\r\n                }\r\n                else if (cell.isRowSpan && cell.isVirtual) {\r\n                    return TableResultAction.resultAction.Ignore;\r\n                }\r\n                break;\r\n            case TableResultAction.where.Row:\r\n                if (cell.isRowSpan) {\r\n                    return TableResultAction.resultAction.SumSpanCount;\r\n                }\r\n                else if (cell.isColSpan && cell.isVirtual) {\r\n                    return TableResultAction.resultAction.Ignore;\r\n                }\r\n                break;\r\n        }\r\n        return TableResultAction.resultAction.AddCell;\r\n    }\r\n    function init() {\r\n        setStartPoint();\r\n        createVirtualTable();\r\n    }\r\n    /// ///////////////////////////////////////////\r\n    // Public functions\r\n    /// ///////////////////////////////////////////\r\n    /**\r\n     * Recover array os what to do in table.\r\n     */\r\n    this.getActionList = function () {\r\n        var fixedRow = (where === TableResultAction.where.Row) ? _startPoint.rowPos : -1;\r\n        var fixedCol = (where === TableResultAction.where.Column) ? _startPoint.colPos : -1;\r\n        var actualPosition = 0;\r\n        var canContinue = true;\r\n        while (canContinue) {\r\n            var rowPosition = (fixedRow >= 0) ? fixedRow : actualPosition;\r\n            var colPosition = (fixedCol >= 0) ? fixedCol : actualPosition;\r\n            var row = _virtualTable[rowPosition];\r\n            if (!row) {\r\n                canContinue = false;\r\n                return _actionCellList;\r\n            }\r\n            var cell = row[colPosition];\r\n            if (!cell) {\r\n                canContinue = false;\r\n                return _actionCellList;\r\n            }\r\n            // Define action to be applied in this cell\r\n            var resultAction = TableResultAction.resultAction.Ignore;\r\n            switch (action) {\r\n                case TableResultAction.requestAction.Add:\r\n                    resultAction = getAddResultActionToCell(cell);\r\n                    break;\r\n                case TableResultAction.requestAction.Delete:\r\n                    resultAction = getDeleteResultActionToCell(cell);\r\n                    break;\r\n            }\r\n            _actionCellList.push(getActionCell(cell, resultAction, rowPosition, colPosition));\r\n            actualPosition++;\r\n        }\r\n        return _actionCellList;\r\n    };\r\n    init();\r\n};\r\n/**\r\n*\r\n* Where action occours enum.\r\n*/\r\nTableResultAction.where = { 'Row': 0, 'Column': 1 };\r\n/**\r\n*\r\n* Requested action to apply enum.\r\n*/\r\nTableResultAction.requestAction = { 'Add': 0, 'Delete': 1 };\r\n/**\r\n*\r\n* Result action to be executed enum.\r\n*/\r\nTableResultAction.resultAction = { 'Ignore': 0, 'SubtractSpanCount': 1, 'RemoveCell': 2, 'AddCell': 3, 'SumSpanCount': 4 };\r\n/**\r\n *\r\n * @class editing.Table\r\n *\r\n * Table\r\n *\r\n */\r\nvar Table = /** @class */ (function () {\r\n    function Table() {\r\n    }\r\n    /**\r\n     * handle tab key\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {Boolean} isShift\r\n     */\r\n    Table.prototype.tab = function (rng, isShift) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        var table = dom.ancestor(cell, dom.isTable);\r\n        var cells = dom.listDescendant(table, dom.isCell);\r\n        var nextCell = lists[isShift ? 'prev' : 'next'](cells, cell);\r\n        if (nextCell) {\r\n            range.create(nextCell, 0).select();\r\n        }\r\n    };\r\n    /**\r\n     * Add a new row\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {String} position (top/bottom)\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.addRow = function (rng, position) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        var currentTr = $$1(cell).closest('tr');\r\n        var trAttributes = this.recoverAttributes(currentTr);\r\n        var html = $$1('<tr' + trAttributes + '></tr>');\r\n        var vTable = new TableResultAction(cell, TableResultAction.where.Row, TableResultAction.requestAction.Add, $$1(currentTr).closest('table')[0]);\r\n        var actions = vTable.getActionList();\r\n        for (var idCell = 0; idCell < actions.length; idCell++) {\r\n            var currentCell = actions[idCell];\r\n            var tdAttributes = this.recoverAttributes(currentCell.baseCell);\r\n            switch (currentCell.action) {\r\n                case TableResultAction.resultAction.AddCell:\r\n                    html.append('<td' + tdAttributes + '>' + dom.blank + '</td>');\r\n                    break;\r\n                case TableResultAction.resultAction.SumSpanCount:\r\n                    if (position === 'top') {\r\n                        var baseCellTr = currentCell.baseCell.parent;\r\n                        var isTopFromRowSpan = (!baseCellTr ? 0 : currentCell.baseCell.closest('tr').rowIndex) <= currentTr[0].rowIndex;\r\n                        if (isTopFromRowSpan) {\r\n                            var newTd = $$1('<div></div>').append($$1('<td' + tdAttributes + '>' + dom.blank + '</td>').removeAttr('rowspan')).html();\r\n                            html.append(newTd);\r\n                            break;\r\n                        }\r\n                    }\r\n                    var rowspanNumber = parseInt(currentCell.baseCell.rowSpan, 10);\r\n                    rowspanNumber++;\r\n                    currentCell.baseCell.setAttribute('rowSpan', rowspanNumber);\r\n                    break;\r\n            }\r\n        }\r\n        if (position === 'top') {\r\n            currentTr.before(html);\r\n        }\r\n        else {\r\n            var cellHasRowspan = (cell.rowSpan > 1);\r\n            if (cellHasRowspan) {\r\n                var lastTrIndex = currentTr[0].rowIndex + (cell.rowSpan - 2);\r\n                $$1($$1(currentTr).parent().find('tr')[lastTrIndex]).after($$1(html));\r\n                return;\r\n            }\r\n            currentTr.after(html);\r\n        }\r\n    };\r\n    /**\r\n     * Add a new col\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @param {String} position (left/right)\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.addCol = function (rng, position) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        var row = $$1(cell).closest('tr');\r\n        var rowsGroup = $$1(row).siblings();\r\n        rowsGroup.push(row);\r\n        var vTable = new TableResultAction(cell, TableResultAction.where.Column, TableResultAction.requestAction.Add, $$1(row).closest('table')[0]);\r\n        var actions = vTable.getActionList();\r\n        for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\r\n            var currentCell = actions[actionIndex];\r\n            var tdAttributes = this.recoverAttributes(currentCell.baseCell);\r\n            switch (currentCell.action) {\r\n                case TableResultAction.resultAction.AddCell:\r\n                    if (position === 'right') {\r\n                        $$1(currentCell.baseCell).after('<td' + tdAttributes + '>' + dom.blank + '</td>');\r\n                    }\r\n                    else {\r\n                        $$1(currentCell.baseCell).before('<td' + tdAttributes + '>' + dom.blank + '</td>');\r\n                    }\r\n                    break;\r\n                case TableResultAction.resultAction.SumSpanCount:\r\n                    if (position === 'right') {\r\n                        var colspanNumber = parseInt(currentCell.baseCell.colSpan, 10);\r\n                        colspanNumber++;\r\n                        currentCell.baseCell.setAttribute('colSpan', colspanNumber);\r\n                    }\r\n                    else {\r\n                        $$1(currentCell.baseCell).before('<td' + tdAttributes + '>' + dom.blank + '</td>');\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /*\r\n    * Copy attributes from element.\r\n    *\r\n    * @param {object} Element to recover attributes.\r\n    * @return {string} Copied string elements.\r\n    */\r\n    Table.prototype.recoverAttributes = function (el) {\r\n        var resultStr = '';\r\n        if (!el) {\r\n            return resultStr;\r\n        }\r\n        var attrList = el.attributes || [];\r\n        for (var i = 0; i < attrList.length; i++) {\r\n            if (attrList[i].name.toLowerCase() === 'id') {\r\n                continue;\r\n            }\r\n            if (attrList[i].specified) {\r\n                resultStr += ' ' + attrList[i].name + '=\\'' + attrList[i].value + '\\'';\r\n            }\r\n        }\r\n        return resultStr;\r\n    };\r\n    /**\r\n     * Delete current row\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.deleteRow = function (rng) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        var row = $$1(cell).closest('tr');\r\n        var cellPos = row.children('td, th').index($$1(cell));\r\n        var rowPos = row[0].rowIndex;\r\n        var vTable = new TableResultAction(cell, TableResultAction.where.Row, TableResultAction.requestAction.Delete, $$1(row).closest('table')[0]);\r\n        var actions = vTable.getActionList();\r\n        for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\r\n            if (!actions[actionIndex]) {\r\n                continue;\r\n            }\r\n            var baseCell = actions[actionIndex].baseCell;\r\n            var virtualPosition = actions[actionIndex].virtualTable;\r\n            var hasRowspan = (baseCell.rowSpan && baseCell.rowSpan > 1);\r\n            var rowspanNumber = (hasRowspan) ? parseInt(baseCell.rowSpan, 10) : 0;\r\n            switch (actions[actionIndex].action) {\r\n                case TableResultAction.resultAction.Ignore:\r\n                    continue;\r\n                case TableResultAction.resultAction.AddCell:\r\n                    var nextRow = row.next('tr')[0];\r\n                    if (!nextRow) {\r\n                        continue;\r\n                    }\r\n                    var cloneRow = row[0].cells[cellPos];\r\n                    if (hasRowspan) {\r\n                        if (rowspanNumber > 2) {\r\n                            rowspanNumber--;\r\n                            nextRow.insertBefore(cloneRow, nextRow.cells[cellPos]);\r\n                            nextRow.cells[cellPos].setAttribute('rowSpan', rowspanNumber);\r\n                            nextRow.cells[cellPos].innerHTML = '';\r\n                        }\r\n                        else if (rowspanNumber === 2) {\r\n                            nextRow.insertBefore(cloneRow, nextRow.cells[cellPos]);\r\n                            nextRow.cells[cellPos].removeAttribute('rowSpan');\r\n                            nextRow.cells[cellPos].innerHTML = '';\r\n                        }\r\n                    }\r\n                    continue;\r\n                case TableResultAction.resultAction.SubtractSpanCount:\r\n                    if (hasRowspan) {\r\n                        if (rowspanNumber > 2) {\r\n                            rowspanNumber--;\r\n                            baseCell.setAttribute('rowSpan', rowspanNumber);\r\n                            if (virtualPosition.rowIndex !== rowPos && baseCell.cellIndex === cellPos) {\r\n                                baseCell.innerHTML = '';\r\n                            }\r\n                        }\r\n                        else if (rowspanNumber === 2) {\r\n                            baseCell.removeAttribute('rowSpan');\r\n                            if (virtualPosition.rowIndex !== rowPos && baseCell.cellIndex === cellPos) {\r\n                                baseCell.innerHTML = '';\r\n                            }\r\n                        }\r\n                    }\r\n                    continue;\r\n                case TableResultAction.resultAction.RemoveCell:\r\n                    // Do not need remove cell because row will be deleted.\r\n                    continue;\r\n            }\r\n        }\r\n        row.remove();\r\n    };\r\n    /**\r\n     * Delete current col\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.deleteCol = function (rng) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        var row = $$1(cell).closest('tr');\r\n        var cellPos = row.children('td, th').index($$1(cell));\r\n        var vTable = new TableResultAction(cell, TableResultAction.where.Column, TableResultAction.requestAction.Delete, $$1(row).closest('table')[0]);\r\n        var actions = vTable.getActionList();\r\n        for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\r\n            if (!actions[actionIndex]) {\r\n                continue;\r\n            }\r\n            switch (actions[actionIndex].action) {\r\n                case TableResultAction.resultAction.Ignore:\r\n                    continue;\r\n                case TableResultAction.resultAction.SubtractSpanCount:\r\n                    var baseCell = actions[actionIndex].baseCell;\r\n                    var hasColspan = (baseCell.colSpan && baseCell.colSpan > 1);\r\n                    if (hasColspan) {\r\n                        var colspanNumber = (baseCell.colSpan) ? parseInt(baseCell.colSpan, 10) : 0;\r\n                        if (colspanNumber > 2) {\r\n                            colspanNumber--;\r\n                            baseCell.setAttribute('colSpan', colspanNumber);\r\n                            if (baseCell.cellIndex === cellPos) {\r\n                                baseCell.innerHTML = '';\r\n                            }\r\n                        }\r\n                        else if (colspanNumber === 2) {\r\n                            baseCell.removeAttribute('colSpan');\r\n                            if (baseCell.cellIndex === cellPos) {\r\n                                baseCell.innerHTML = '';\r\n                            }\r\n                        }\r\n                    }\r\n                    continue;\r\n                case TableResultAction.resultAction.RemoveCell:\r\n                    dom.remove(actions[actionIndex].baseCell, true);\r\n                    continue;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * create empty table element\r\n     *\r\n     * @param {Number} rowCount\r\n     * @param {Number} colCount\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.createTable = function (colCount, rowCount, options) {\r\n        var tds = [];\r\n        var tdHTML;\r\n        for (var idxCol = 0; idxCol < colCount; idxCol++) {\r\n            tds.push('<td>' + dom.blank + '</td>');\r\n        }\r\n        tdHTML = tds.join('');\r\n        var trs = [];\r\n        var trHTML;\r\n        for (var idxRow = 0; idxRow < rowCount; idxRow++) {\r\n            trs.push('<tr>' + tdHTML + '</tr>');\r\n        }\r\n        trHTML = trs.join('');\r\n        var $table = $$1('<table>' + trHTML + '</table>');\r\n        if (options && options.tableClassName) {\r\n            $table.addClass(options.tableClassName);\r\n        }\r\n        return $table[0];\r\n    };\r\n    /**\r\n     * Delete current table\r\n     *\r\n     * @param {WrappedRange} rng\r\n     * @return {Node}\r\n     */\r\n    Table.prototype.deleteTable = function (rng) {\r\n        var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\r\n        $$1(cell).closest('table').remove();\r\n    };\r\n    return Table;\r\n}());\r\n\r\nvar KEY_BOGUS = 'bogus';\r\n/**\r\n * @class Editor\r\n */\r\nvar Editor = /** @class */ (function () {\r\n    function Editor(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.$note = context.layoutInfo.note;\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        this.editable = this.$editable[0];\r\n        this.lastRange = null;\r\n        this.style = new Style();\r\n        this.table = new Table();\r\n        this.typing = new Typing();\r\n        this.bullet = new Bullet();\r\n        this.history = new History(this.$editable);\r\n        this.context.memo('help.undo', this.lang.help.undo);\r\n        this.context.memo('help.redo', this.lang.help.redo);\r\n        this.context.memo('help.tab', this.lang.help.tab);\r\n        this.context.memo('help.untab', this.lang.help.untab);\r\n        this.context.memo('help.insertParagraph', this.lang.help.insertParagraph);\r\n        this.context.memo('help.insertOrderedList', this.lang.help.insertOrderedList);\r\n        this.context.memo('help.insertUnorderedList', this.lang.help.insertUnorderedList);\r\n        this.context.memo('help.indent', this.lang.help.indent);\r\n        this.context.memo('help.outdent', this.lang.help.outdent);\r\n        this.context.memo('help.formatPara', this.lang.help.formatPara);\r\n        this.context.memo('help.insertHorizontalRule', this.lang.help.insertHorizontalRule);\r\n        this.context.memo('help.fontName', this.lang.help.fontName);\r\n        // native commands(with execCommand), generate function for execCommand\r\n        var commands = [\r\n            'bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript',\r\n            'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull',\r\n            'formatBlock', 'removeFormat', 'backColor'\r\n        ];\r\n        for (var idx = 0, len = commands.length; idx < len; idx++) {\r\n            this[commands[idx]] = (function (sCmd) {\r\n                return function (value) {\r\n                    _this.beforeCommand();\r\n                    document.execCommand(sCmd, false, value);\r\n                    _this.afterCommand(true);\r\n                };\r\n            })(commands[idx]);\r\n            this.context.memo('help.' + commands[idx], this.lang.help[commands[idx]]);\r\n        }\r\n        this.fontName = this.wrapCommand(function (value) {\r\n            return _this.fontStyling('font-family', \"\\'\" + value + \"\\'\");\r\n        });\r\n        this.fontSize = this.wrapCommand(function (value) {\r\n            return _this.fontStyling('font-size', value + 'px');\r\n        });\r\n        for (var idx = 1; idx <= 6; idx++) {\r\n            this['formatH' + idx] = (function (idx) {\r\n                return function () {\r\n                    _this.formatBlock('H' + idx);\r\n                };\r\n            })(idx);\r\n            this.context.memo('help.formatH' + idx, this.lang.help['formatH' + idx]);\r\n        }\r\n        \r\n        this.insertParagraph = this.wrapCommand(function () {\r\n            _this.typing.insertParagraph(_this.editable);\r\n        });\r\n        this.insertOrderedList = this.wrapCommand(function () {\r\n            _this.bullet.insertOrderedList(_this.editable);\r\n        });\r\n        this.insertUnorderedList = this.wrapCommand(function () {\r\n            _this.bullet.insertUnorderedList(_this.editable);\r\n        });\r\n        this.indent = this.wrapCommand(function () {\r\n            _this.bullet.indent(_this.editable);\r\n        });\r\n        this.outdent = this.wrapCommand(function () {\r\n            _this.bullet.outdent(_this.editable);\r\n        });\r\n        /**\r\n         * insertNode\r\n         * insert node\r\n         * @param {Node} node\r\n         */\r\n        this.insertNode = this.wrapCommand(function (node) {\r\n            if (_this.isLimited($$1(node).text().length)) {\r\n                return;\r\n            }\r\n            var rng = _this.createRange();\r\n            rng.insertNode(node);\r\n            range.createFromNodeAfter(node).select();\r\n        });\r\n        /**\r\n         * insert text\r\n         * @param {String} text\r\n         */\r\n        this.insertText = this.wrapCommand(function (text) {\r\n            if (_this.isLimited(text.length)) {\r\n                return;\r\n            }\r\n            var rng = _this.createRange();\r\n            var textNode = rng.insertNode(dom.createText(text));\r\n            range.create(textNode, dom.nodeLength(textNode)).select();\r\n        });\r\n        /**\r\n         * paste HTML\r\n         * @param {String} markup\r\n         */\r\n        this.pasteHTML = this.wrapCommand(function (markup) {\r\n            if (_this.isLimited(markup.length)) {\r\n                return;\r\n            }\r\n            var contents = _this.createRange().pasteHTML(markup);\r\n            range.createFromNodeAfter(lists.last(contents)).select();\r\n        });\r\n        /**\r\n         * formatBlock\r\n         *\r\n         * @param {String} tagName\r\n         */\r\n        this.formatBlock = this.wrapCommand(function (tagName, $target) {\r\n            var onApplyCustomStyle = _this.options.callbacks.onApplyCustomStyle;\r\n            if (onApplyCustomStyle) {\r\n                onApplyCustomStyle.call(_this, $target, _this.context, _this.onFormatBlock);\r\n            }\r\n            else {\r\n                _this.onFormatBlock(tagName, $target);\r\n            }\r\n        });\r\n        /**\r\n         * insert horizontal rule\r\n         */\r\n        this.insertHorizontalRule = this.wrapCommand(function () {\r\n            var hrNode = _this.createRange().insertNode(dom.create('HR'));\r\n            if (hrNode.nextSibling) {\r\n                range.create(hrNode.nextSibling, 0).normalize().select();\r\n            }\r\n        });\r\n        /**\r\n         * lineHeight\r\n         * @param {String} value\r\n         */\r\n        this.lineHeight = this.wrapCommand(function (value) {\r\n            _this.style.stylePara(_this.createRange(), {\r\n                lineHeight: value\r\n            });\r\n        });\r\n        /**\r\n         * create link (command)\r\n         *\r\n         * @param {Object} linkInfo\r\n         */\r\n        this.createLink = this.wrapCommand(function (linkInfo) {\r\n            var linkUrl = linkInfo.url;\r\n            var linkText = linkInfo.text;\r\n            var isNewWindow = linkInfo.isNewWindow;\r\n            var rng = linkInfo.range || _this.createRange();\r\n            var isTextChanged = rng.toString() !== linkText;\r\n            // handle spaced urls from input\r\n            if (typeof linkUrl === 'string') {\r\n                linkUrl = linkUrl.trim();\r\n            }\r\n            if (_this.options.onCreateLink) {\r\n                linkUrl = _this.options.onCreateLink(linkUrl);\r\n            }\r\n            else {\r\n                // if url doesn't match an URL schema, set http:// as default\r\n                linkUrl = /^[A-Za-z][A-Za-z0-9+-.]*\\:[\\/\\/]?/.test(linkUrl)\r\n                    ? linkUrl : 'http://' + linkUrl;\r\n            }\r\n            var anchors = [];\r\n            if (isTextChanged) {\r\n                rng = rng.deleteContents();\r\n                var anchor = rng.insertNode($$1('<A>' + linkText + '</A>')[0]);\r\n                anchors.push(anchor);\r\n            }\r\n            else {\r\n                anchors = _this.style.styleNodes(rng, {\r\n                    nodeName: 'A',\r\n                    expandClosestSibling: true,\r\n                    onlyPartialContains: true\r\n                });\r\n            }\r\n            $$1.each(anchors, function (idx, anchor) {\r\n                $$1(anchor).attr('href', linkUrl);\r\n                if (isNewWindow) {\r\n                    $$1(anchor).attr('target', '_blank');\r\n                }\r\n                else {\r\n                    $$1(anchor).removeAttr('target');\r\n                }\r\n            });\r\n            var startRange = range.createFromNodeBefore(lists.head(anchors));\r\n            var startPoint = startRange.getStartPoint();\r\n            var endRange = range.createFromNodeAfter(lists.last(anchors));\r\n            var endPoint = endRange.getEndPoint();\r\n            range.create(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset).select();\r\n        });\r\n        /**\r\n         * setting color\r\n         *\r\n         * @param {Object} sObjColor  color code\r\n         * @param {String} sObjColor.foreColor foreground color\r\n         * @param {String} sObjColor.backColor background color\r\n         */\r\n        this.color = this.wrapCommand(function (colorInfo) {\r\n            var foreColor = colorInfo.foreColor;\r\n            var backColor = colorInfo.backColor;\r\n            if (foreColor) {\r\n                document.execCommand('foreColor', false, foreColor);\r\n            }\r\n            if (backColor) {\r\n                document.execCommand('backColor', false, backColor);\r\n            }\r\n        });\r\n        /**\r\n         * Set foreground color\r\n         *\r\n         * @param {String} colorCode foreground color code\r\n         */\r\n        this.foreColor = this.wrapCommand(function (colorInfo) {\r\n            document.execCommand('styleWithCSS', false, true);\r\n            document.execCommand('foreColor', false, colorInfo);\r\n        });\r\n        /**\r\n         * insert Table\r\n         *\r\n         * @param {String} dimension of table (ex : \"5x5\")\r\n         */\r\n        this.insertTable = this.wrapCommand(function (dim) {\r\n            var dimension = dim.split('x');\r\n            var rng = _this.createRange().deleteContents();\r\n            rng.insertNode(_this.table.createTable(dimension[0], dimension[1], _this.options));\r\n        });\r\n        /**\r\n         * remove media object and Figure Elements if media object is img with Figure.\r\n         */\r\n        this.removeMedia = this.wrapCommand(function () {\r\n            var $target = $$1(_this.restoreTarget()).parent();\r\n            if ($target.parent('figure').length) {\r\n                $target.parent('figure').remove();\r\n            }\r\n            else {\r\n                $target = $$1(_this.restoreTarget()).detach();\r\n            }\r\n            _this.context.triggerEvent('media.delete', $target, _this.$editable);\r\n        });\r\n        /**\r\n         * float me\r\n         *\r\n         * @param {String} value\r\n         */\r\n        this.floatMe = this.wrapCommand(function (value) {\r\n            var $target = $$1(_this.restoreTarget());\r\n            $target.toggleClass('note-float-left', value === 'left');\r\n            $target.toggleClass('note-float-right', value === 'right');\r\n            $target.css('float', value);\r\n        });\r\n        /**\r\n         * resize overlay element\r\n         * @param {String} value\r\n         */\r\n        this.resize = this.wrapCommand(function (value) {\r\n            var $target = $$1(_this.restoreTarget());\r\n            $target.css({\r\n                width: value * 100 + '%',\r\n                height: ''\r\n            });\r\n        });\r\n    }\r\n    Editor.prototype.initialize = function () {\r\n        var _this = this;\r\n        // bind custom events\r\n        this.$editable.on('keydown', function (event) {\r\n            if (event.keyCode === key.code.ENTER) {\r\n                _this.context.triggerEvent('enter', event);\r\n            }\r\n            _this.context.triggerEvent('keydown', event);\r\n            if (!event.isDefaultPrevented()) {\r\n                if (_this.options.shortcuts) {\r\n                    _this.handleKeyMap(event);\r\n                }\r\n                else {\r\n                    _this.preventDefaultEditableShortCuts(event);\r\n                }\r\n            }\r\n            if (_this.isLimited(1, event)) {\r\n                return false;\r\n            }\r\n        }).on('keyup', function (event) {\r\n            _this.context.triggerEvent('keyup', event);\r\n        }).on('focus', function (event) {\r\n            _this.context.triggerEvent('focus', event);\r\n        }).on('blur', function (event) {\r\n            _this.context.triggerEvent('blur', event);\r\n        }).on('mousedown', function (event) {\r\n            _this.context.triggerEvent('mousedown', event);\r\n        }).on('mouseup', function (event) {\r\n            _this.context.triggerEvent('mouseup', event);\r\n        }).on('scroll', function (event) {\r\n            _this.context.triggerEvent('scroll', event);\r\n        }).on('paste', function (event) {\r\n            _this.context.triggerEvent('paste', event);\r\n        });\r\n        // init content before set event\r\n        this.$editable.html(dom.html(this.$note) || dom.emptyPara);\r\n        this.$editable.on(env.inputEventName, func.debounce(function () {\r\n            _this.context.triggerEvent('change', _this.$editable.html());\r\n        }, 100));\r\n        this.$editor.on('focusin', function (event) {\r\n            _this.context.triggerEvent('focusin', event);\r\n        }).on('focusout', function (event) {\r\n            _this.context.triggerEvent('focusout', event);\r\n        });\r\n        if (!this.options.airMode) {\r\n            if (this.options.width) {\r\n                this.$editor.outerWidth(this.options.width);\r\n            }\r\n            if (this.options.height) {\r\n                this.$editable.outerHeight(this.options.height);\r\n            }\r\n            if (this.options.maxHeight) {\r\n                this.$editable.css('max-height', this.options.maxHeight);\r\n            }\r\n            if (this.options.minHeight) {\r\n                this.$editable.css('min-height', this.options.minHeight);\r\n            }\r\n        }\r\n        this.history.recordUndo();\r\n    };\r\n    Editor.prototype.destroy = function () {\r\n        this.$editable.off();\r\n    };\r\n    Editor.prototype.handleKeyMap = function (event) {\r\n        var keyMap = this.options.keyMap[env.isMac ? 'mac' : 'pc'];\r\n        var keys = [];\r\n        if (event.metaKey) {\r\n            keys.push('CMD');\r\n        }\r\n        if (event.ctrlKey && !event.altKey) {\r\n            keys.push('CTRL');\r\n        }\r\n        if (event.shiftKey) {\r\n            keys.push('SHIFT');\r\n        }\r\n        var keyName = key.nameFromCode[event.keyCode];\r\n        if (keyName) {\r\n            keys.push(keyName);\r\n        }\r\n        var eventName = keyMap[keys.join('+')];\r\n        if (eventName) {\r\n            if (this.context.invoke(eventName) !== false) {\r\n                event.preventDefault();\r\n            }\r\n        }\r\n        else if (key.isEdit(event.keyCode)) {\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.preventDefaultEditableShortCuts = function (event) {\r\n        // B(Bold, 66) / I(Italic, 73) / U(Underline, 85)\r\n        if ((event.ctrlKey || event.metaKey) &&\r\n            lists.contains([66, 73, 85], event.keyCode)) {\r\n            event.preventDefault();\r\n        }\r\n    };\r\n    Editor.prototype.isLimited = function (pad, event) {\r\n        pad = pad || 0;\r\n        if (typeof event !== 'undefined') {\r\n            if (key.isMove(event.keyCode) ||\r\n                (event.ctrlKey || event.metaKey) ||\r\n                lists.contains([key.code.BACKSPACE, key.code.DELETE], event.keyCode)) {\r\n                return false;\r\n            }\r\n        }\r\n        if (this.options.maxTextLength > 0) {\r\n            if ((this.$editable.text().length + pad) >= this.options.maxTextLength) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * create range\r\n     * @return {WrappedRange}\r\n     */\r\n    Editor.prototype.createRange = function () {\r\n        this.focus();\r\n        return range.create(this.editable);\r\n    };\r\n    /**\r\n     * saveRange\r\n     *\r\n     * save current range\r\n     *\r\n     * @param {Boolean} [thenCollapse=false]\r\n     */\r\n    Editor.prototype.saveRange = function (thenCollapse) {\r\n        this.lastRange = this.createRange();\r\n        if (thenCollapse) {\r\n            this.lastRange.collapse().select();\r\n        }\r\n    };\r\n    /**\r\n     * restoreRange\r\n     *\r\n     * restore lately range\r\n     */\r\n    Editor.prototype.restoreRange = function () {\r\n        if (this.lastRange) {\r\n            this.lastRange.select();\r\n            this.focus();\r\n        }\r\n    };\r\n    Editor.prototype.saveTarget = function (node) {\r\n        this.$editable.data('target', node);\r\n    };\r\n    Editor.prototype.clearTarget = function () {\r\n        this.$editable.removeData('target');\r\n    };\r\n    Editor.prototype.restoreTarget = function () {\r\n        return this.$editable.data('target');\r\n    };\r\n    /**\r\n     * currentStyle\r\n     *\r\n     * current style\r\n     * @return {Object|Boolean} unfocus\r\n     */\r\n    Editor.prototype.currentStyle = function () {\r\n        var rng = range.create();\r\n        if (rng) {\r\n            rng = rng.normalize();\r\n        }\r\n        return rng ? this.style.current(rng) : this.style.fromNode(this.$editable);\r\n    };\r\n    /**\r\n     * style from node\r\n     *\r\n     * @param {jQuery} $node\r\n     * @return {Object}\r\n     */\r\n    Editor.prototype.styleFromNode = function ($node) {\r\n        return this.style.fromNode($node);\r\n    };\r\n    /**\r\n     * undo\r\n     */\r\n    Editor.prototype.undo = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        this.history.undo();\r\n        this.context.triggerEvent('change', this.$editable.html());\r\n    };\r\n    /**\r\n     * redo\r\n     */\r\n    Editor.prototype.redo = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        this.history.redo();\r\n        this.context.triggerEvent('change', this.$editable.html());\r\n    };\r\n    /**\r\n     * before command\r\n     */\r\n    Editor.prototype.beforeCommand = function () {\r\n        this.context.triggerEvent('before.command', this.$editable.html());\r\n        // keep focus on editable before command execution\r\n        this.focus();\r\n    };\r\n    /**\r\n     * after command\r\n     * @param {Boolean} isPreventTrigger\r\n     */\r\n    Editor.prototype.afterCommand = function (isPreventTrigger) {\r\n        this.history.recordUndo();\r\n        if (!isPreventTrigger) {\r\n            this.context.triggerEvent('change', this.$editable.html());\r\n        }\r\n    };\r\n    /**\r\n     * handle tab key\r\n     */\r\n    Editor.prototype.tab = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.table.tab(rng);\r\n        }\r\n        else {\r\n            if (this.options.tabSize === 0) {\r\n                return false;\r\n            }\r\n            if (!this.isLimited(this.options.tabSize)) {\r\n                this.beforeCommand();\r\n                this.typing.insertTab(rng, this.options.tabSize);\r\n                this.afterCommand();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * handle shift+tab key\r\n     */\r\n    Editor.prototype.untab = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.table.tab(rng, true);\r\n        }\r\n        else {\r\n            if (this.options.tabSize === 0) {\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * run given function between beforeCommand and afterCommand\r\n     */\r\n    Editor.prototype.wrapCommand = function (fn) {\r\n        var _this = this;\r\n        return function () {\r\n            _this.beforeCommand();\r\n            fn.apply(_this, arguments);\r\n            _this.afterCommand();\r\n        };\r\n    };\r\n    /**\r\n     * insert image\r\n     *\r\n     * @param {String} src\r\n     * @param {String|Function} param\r\n     * @return {Promise}\r\n     */\r\n    Editor.prototype.insertImage = function (src, param) {\r\n        var _this = this;\r\n        return createImage(src, param).then(function ($image) {\r\n            _this.beforeCommand();\r\n            if (typeof param === 'function') {\r\n                param($image);\r\n            }\r\n            else {\r\n                if (typeof param === 'string') {\r\n                    $image.attr('data-filename', param);\r\n                }\r\n                $image.css('width', Math.min(_this.$editable.width(), $image.width()));\r\n            }\r\n            $image.show();\r\n            range.create(_this.editable).insertNode($image[0]);\r\n            range.createFromNodeAfter($image[0]).select();\r\n            _this.afterCommand();\r\n        }).fail(function (e) {\r\n            _this.context.triggerEvent('image.upload.error', e);\r\n        });\r\n    };\r\n    /**\r\n     * insertImages\r\n     * @param {File[]} files\r\n     */\r\n    Editor.prototype.insertImages = function (files) {\r\n        var _this = this;\r\n        $$1.each(files, function (idx, file) {\r\n            var filename = file.name;\r\n            if (_this.options.maximumImageFileSize && _this.options.maximumImageFileSize < file.size) {\r\n                _this.context.triggerEvent('image.upload.error', _this.lang.image.maximumFileSizeError);\r\n            }\r\n            else {\r\n                readFileAsDataURL(file).then(function (dataURL) {\r\n                    return _this.insertImage(dataURL, filename);\r\n                }).fail(function () {\r\n                    _this.context.triggerEvent('image.upload.error');\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * insertImagesOrCallback\r\n     * @param {File[]} files\r\n     */\r\n    Editor.prototype.insertImagesOrCallback = function (files) {\r\n        var callbacks = this.options.callbacks;\r\n        // If onImageUpload this.options setted\r\n        if (callbacks.onImageUpload) {\r\n            this.context.triggerEvent('image.upload', files);\r\n            // else insert Image as dataURL\r\n        }\r\n        else {\r\n            this.insertImages(files);\r\n        }\r\n    };\r\n    /**\r\n     * return selected plain text\r\n     * @return {String} text\r\n     */\r\n    Editor.prototype.getSelectedText = function () {\r\n        var rng = this.createRange();\r\n        // if range on anchor, expand range with anchor\r\n        if (rng.isOnAnchor()) {\r\n            rng = range.createFromNode(dom.ancestor(rng.sc, dom.isAnchor));\r\n        }\r\n        return rng.toString();\r\n    };\r\n    Editor.prototype.onFormatBlock = function (tagName, $target) {\r\n        // [workaround] for MSIE, IE need `<`\r\n        tagName = env.isMSIE ? '<' + tagName + '>' : tagName;\r\n        document.execCommand('FormatBlock', false, tagName);\r\n        // support custom class\r\n        if ($target && $target.length) {\r\n            var className = $target[0].className || '';\r\n            if (className) {\r\n                var currentRange = this.createRange();\r\n                var $parent = $$1([currentRange.sc, currentRange.ec]).closest(tagName);\r\n                $parent.addClass(className);\r\n            }\r\n        }\r\n    };\r\n    Editor.prototype.formatPara = function () {\r\n        this.formatBlock('P');\r\n    };\r\n    Editor.prototype.fontStyling = function (target, value) {\r\n        var rng = this.createRange();\r\n        if (rng) {\r\n            var spans = this.style.styleNodes(rng);\r\n            $$1(spans).css(target, value);\r\n            // [workaround] added styled bogus span for style\r\n            //  - also bogus character needed for cursor position\r\n            if (rng.isCollapsed()) {\r\n                var firstSpan = lists.head(spans);\r\n                if (firstSpan && !dom.nodeLength(firstSpan)) {\r\n                    firstSpan.innerHTML = dom.ZERO_WIDTH_NBSP_CHAR;\r\n                    range.createFromNodeAfter(firstSpan.firstChild).select();\r\n                    this.$editable.data(KEY_BOGUS, firstSpan);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * unlink\r\n     *\r\n     * @type command\r\n     */\r\n    Editor.prototype.unlink = function () {\r\n        var rng = this.createRange();\r\n        if (rng.isOnAnchor()) {\r\n            var anchor = dom.ancestor(rng.sc, dom.isAnchor);\r\n            rng = range.createFromNode(anchor);\r\n            rng.select();\r\n            this.beforeCommand();\r\n            document.execCommand('unlink');\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    /**\r\n     * returns link info\r\n     *\r\n     * @return {Object}\r\n     * @return {WrappedRange} return.range\r\n     * @return {String} return.text\r\n     * @return {Boolean} [return.isNewWindow=true]\r\n     * @return {String} [return.url=\"\"]\r\n     */\r\n    Editor.prototype.getLinkInfo = function () {\r\n        var rng = this.createRange().expand(dom.isAnchor);\r\n        // Get the first anchor on range(for edit).\r\n        var $anchor = $$1(lists.head(rng.nodes(dom.isAnchor)));\r\n        var linkInfo = {\r\n            range: rng,\r\n            text: rng.toString(),\r\n            url: $anchor.length ? $anchor.attr('href') : ''\r\n        };\r\n        // Define isNewWindow when anchor exists.\r\n        if ($anchor.length) {\r\n            linkInfo.isNewWindow = $anchor.attr('target') === '_blank';\r\n        }\r\n        return linkInfo;\r\n    };\r\n    Editor.prototype.addRow = function (position) {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.addRow(rng, position);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.addCol = function (position) {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.addCol(rng, position);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteRow = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteRow(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteCol = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteCol(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    Editor.prototype.deleteTable = function () {\r\n        var rng = this.createRange(this.$editable);\r\n        if (rng.isCollapsed() && rng.isOnCell()) {\r\n            this.beforeCommand();\r\n            this.table.deleteTable(rng);\r\n            this.afterCommand();\r\n        }\r\n    };\r\n    /**\r\n     * @param {Position} pos\r\n     * @param {jQuery} $target - target element\r\n     * @param {Boolean} [bKeepRatio] - keep ratio\r\n     */\r\n    Editor.prototype.resizeTo = function (pos, $target, bKeepRatio) {\r\n        var imageSize;\r\n        if (bKeepRatio) {\r\n            var newRatio = pos.y / pos.x;\r\n            var ratio = $target.data('ratio');\r\n            imageSize = {\r\n                width: ratio > newRatio ? pos.x : pos.y / ratio,\r\n                height: ratio > newRatio ? pos.x * ratio : pos.y\r\n            };\r\n        }\r\n        else {\r\n            imageSize = {\r\n                width: pos.x,\r\n                height: pos.y\r\n            };\r\n        }\r\n        $target.css(imageSize);\r\n    };\r\n    /**\r\n     * returns whether editable area has focus or not.\r\n     */\r\n    Editor.prototype.hasFocus = function () {\r\n        return this.$editable.is(':focus');\r\n    };\r\n    /**\r\n     * set focus\r\n     */\r\n    Editor.prototype.focus = function () {\r\n        // [workaround] Screen will move when page is scolled in IE.\r\n        //  - do focus when not focused\r\n        if (!this.hasFocus()) {\r\n            this.$editable.focus();\r\n        }\r\n    };\r\n    /**\r\n     * returns whether contents is empty or not.\r\n     * @return {Boolean}\r\n     */\r\n    Editor.prototype.isEmpty = function () {\r\n        return dom.isEmpty(this.$editable[0]) || dom.emptyPara === this.$editable.html();\r\n    };\r\n    /**\r\n     * Removes all contents and restores the editable instance to an _emptyPara_.\r\n     */\r\n    Editor.prototype.empty = function () {\r\n        this.context.invoke('code', dom.emptyPara);\r\n    };\r\n    return Editor;\r\n}());\r\n\r\nvar Clipboard = /** @class */ (function () {\r\n    function Clipboard(context) {\r\n        this.context = context;\r\n        this.$editable = context.layoutInfo.editable;\r\n    }\r\n    Clipboard.prototype.initialize = function () {\r\n        this.$editable.on('paste', this.pasteByEvent.bind(this));\r\n    };\r\n    /**\r\n     * paste by clipboard event\r\n     *\r\n     * @param {Event} event\r\n     */\r\n    Clipboard.prototype.pasteByEvent = function (event) {\r\n        var clipboardData = event.originalEvent.clipboardData;\r\n        if (clipboardData && clipboardData.items && clipboardData.items.length) {\r\n            var item = lists.head(clipboardData.items);\r\n            if (item.kind === 'file' && item.type.indexOf('image/') !== -1) {\r\n                this.context.invoke('editor.insertImagesOrCallback', [item.getAsFile()]);\r\n            }\r\n            this.context.invoke('editor.afterCommand');\r\n        }\r\n    };\r\n    return Clipboard;\r\n}());\r\n\r\nvar Dropzone = /** @class */ (function () {\r\n    function Dropzone(context) {\r\n        this.context = context;\r\n        this.$eventListener = $$1(document);\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        this.documentEventHandlers = {};\r\n        this.$dropzone = $$1([\r\n            '<div class=\"note-dropzone\">',\r\n            '  <div class=\"note-dropzone-message\"/>',\r\n            '</div>'\r\n        ].join('')).prependTo(this.$editor);\r\n    }\r\n    /**\r\n     * attach Drag and Drop Events\r\n     */\r\n    Dropzone.prototype.initialize = function () {\r\n        if (this.options.disableDragAndDrop) {\r\n            // prevent default drop event\r\n            this.documentEventHandlers.onDrop = function (e) {\r\n                e.preventDefault();\r\n            };\r\n            // do not consider outside of dropzone\r\n            this.$eventListener = this.$dropzone;\r\n            this.$eventListener.on('drop', this.documentEventHandlers.onDrop);\r\n        }\r\n        else {\r\n            this.attachDragAndDropEvent();\r\n        }\r\n    };\r\n    /**\r\n     * attach Drag and Drop Events\r\n     */\r\n    Dropzone.prototype.attachDragAndDropEvent = function () {\r\n        var _this = this;\r\n        var collection = $$1();\r\n        var $dropzoneMessage = this.$dropzone.find('.note-dropzone-message');\r\n        this.documentEventHandlers.onDragenter = function (e) {\r\n            var isCodeview = _this.context.invoke('codeview.isActivated');\r\n            var hasEditorSize = _this.$editor.width() > 0 && _this.$editor.height() > 0;\r\n            if (!isCodeview && !collection.length && hasEditorSize) {\r\n                _this.$editor.addClass('dragover');\r\n                _this.$dropzone.width(_this.$editor.width());\r\n                _this.$dropzone.height(_this.$editor.height());\r\n                $dropzoneMessage.text(_this.lang.image.dragImageHere);\r\n            }\r\n            collection = collection.add(e.target);\r\n        };\r\n        this.documentEventHandlers.onDragleave = function (e) {\r\n            collection = collection.not(e.target);\r\n            if (!collection.length) {\r\n                _this.$editor.removeClass('dragover');\r\n            }\r\n        };\r\n        this.documentEventHandlers.onDrop = function () {\r\n            collection = $$1();\r\n            _this.$editor.removeClass('dragover');\r\n        };\r\n        // show dropzone on dragenter when dragging a object to document\r\n        // -but only if the editor is visible, i.e. has a positive width and height\r\n        this.$eventListener.on('dragenter', this.documentEventHandlers.onDragenter)\r\n            .on('dragleave', this.documentEventHandlers.onDragleave)\r\n            .on('drop', this.documentEventHandlers.onDrop);\r\n        // change dropzone's message on hover.\r\n        this.$dropzone.on('dragenter', function () {\r\n            _this.$dropzone.addClass('hover');\r\n            $dropzoneMessage.text(_this.lang.image.dropImage);\r\n        }).on('dragleave', function () {\r\n            _this.$dropzone.removeClass('hover');\r\n            $dropzoneMessage.text(_this.lang.image.dragImageHere);\r\n        });\r\n        // attach dropImage\r\n        this.$dropzone.on('drop', function (event) {\r\n            var dataTransfer = event.originalEvent.dataTransfer;\r\n            // stop the browser from opening the dropped content\r\n            event.preventDefault();\r\n            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\r\n                _this.$editable.focus();\r\n                _this.context.invoke('editor.insertImagesOrCallback', dataTransfer.files);\r\n            }\r\n            else {\r\n                $$1.each(dataTransfer.types, function (idx, type) {\r\n                    var content = dataTransfer.getData(type);\r\n                    if (type.toLowerCase().indexOf('text') > -1) {\r\n                        _this.context.invoke('editor.pasteHTML', content);\r\n                    }\r\n                    else {\r\n                        $$1(content).each(function (idx, item) {\r\n                            _this.context.invoke('editor.insertNode', item);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }).on('dragover', false); // prevent default dragover event\r\n    };\r\n    Dropzone.prototype.destroy = function () {\r\n        var _this = this;\r\n        Object.keys(this.documentEventHandlers).forEach(function (key) {\r\n            _this.$eventListener.off(key.substr(2).toLowerCase(), _this.documentEventHandlers[key]);\r\n        });\r\n        this.documentEventHandlers = {};\r\n    };\r\n    return Dropzone;\r\n}());\r\n\r\nvar CodeMirror;\r\nif (env.hasCodeMirror) {\r\n    if (env.isSupportAmd) {\r\n        require(['codemirror'], function (cm) {\r\n            CodeMirror = cm;\r\n        });\r\n    }\r\n    else {\r\n        CodeMirror = window.CodeMirror;\r\n    }\r\n}\r\n/**\r\n * @class Codeview\r\n */\r\nvar CodeView = /** @class */ (function () {\r\n    function CodeView(context) {\r\n        this.context = context;\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.$codable = context.layoutInfo.codable;\r\n        this.options = context.options;\r\n    }\r\n    CodeView.prototype.sync = function () {\r\n        var isCodeview = this.isActivated();\r\n        if (isCodeview && env.hasCodeMirror) {\r\n            this.$codable.data('cmEditor').save();\r\n        }\r\n    };\r\n    /**\r\n     * @return {Boolean}\r\n     */\r\n    CodeView.prototype.isActivated = function () {\r\n        return this.$editor.hasClass('codeview');\r\n    };\r\n    /**\r\n     * toggle codeview\r\n     */\r\n    CodeView.prototype.toggle = function () {\r\n        if (this.isActivated()) {\r\n            this.deactivate();\r\n        }\r\n        else {\r\n            this.activate();\r\n        }\r\n        this.context.triggerEvent('codeview.toggled');\r\n    };\r\n    /**\r\n     * activate code view\r\n     */\r\n    CodeView.prototype.activate = function () {\r\n        var _this = this;\r\n        this.$codable.val(dom.html(this.$editable, this.options.prettifyHtml));\r\n        this.$codable.height(this.$editable.height());\r\n        this.context.invoke('toolbar.updateCodeview', true);\r\n        this.$editor.addClass('codeview');\r\n        this.$codable.focus();\r\n        // activate CodeMirror as codable\r\n        if (env.hasCodeMirror) {\r\n            var cmEditor_1 = CodeMirror.fromTextArea(this.$codable[0], this.options.codemirror);\r\n            // CodeMirror TernServer\r\n            if (this.options.codemirror.tern) {\r\n                var server_1 = new CodeMirror.TernServer(this.options.codemirror.tern);\r\n                cmEditor_1.ternServer = server_1;\r\n                cmEditor_1.on('cursorActivity', function (cm) {\r\n                    server_1.updateArgHints(cm);\r\n                });\r\n            }\r\n            cmEditor_1.on('blur', function (event) {\r\n                _this.context.triggerEvent('blur.codeview', cmEditor_1.getValue(), event);\r\n            });\r\n            // CodeMirror hasn't Padding.\r\n            cmEditor_1.setSize(null, this.$editable.outerHeight());\r\n            this.$codable.data('cmEditor', cmEditor_1);\r\n        }\r\n        else {\r\n            this.$codable.on('blur', function (event) {\r\n                _this.context.triggerEvent('blur.codeview', _this.$codable.val(), event);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * deactivate code view\r\n     */\r\n    CodeView.prototype.deactivate = function () {\r\n        // deactivate CodeMirror as codable\r\n        if (env.hasCodeMirror) {\r\n            var cmEditor = this.$codable.data('cmEditor');\r\n            this.$codable.val(cmEditor.getValue());\r\n            cmEditor.toTextArea();\r\n        }\r\n        var value = dom.value(this.$codable, this.options.prettifyHtml) || dom.emptyPara;\r\n        var isChange = this.$editable.html() !== value;\r\n        this.$editable.html(value);\r\n        this.$editable.height(this.options.height ? this.$codable.height() : 'auto');\r\n        this.$editor.removeClass('codeview');\r\n        if (isChange) {\r\n            this.context.triggerEvent('change', this.$editable.html(), this.$editable);\r\n        }\r\n        this.$editable.focus();\r\n        this.context.invoke('toolbar.updateCodeview', false);\r\n    };\r\n    CodeView.prototype.destroy = function () {\r\n        if (this.isActivated()) {\r\n            this.deactivate();\r\n        }\r\n    };\r\n    return CodeView;\r\n}());\r\n\r\nvar EDITABLE_PADDING = 24;\r\nvar Statusbar = /** @class */ (function () {\r\n    function Statusbar(context) {\r\n        this.$document = $$1(document);\r\n        this.$statusbar = context.layoutInfo.statusbar;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.options = context.options;\r\n    }\r\n    Statusbar.prototype.initialize = function () {\r\n        var _this = this;\r\n        if (this.options.airMode || this.options.disableResizeEditor) {\r\n            this.destroy();\r\n            return;\r\n        }\r\n        this.$statusbar.on('mousedown', function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            var editableTop = _this.$editable.offset().top - _this.$document.scrollTop();\r\n            var onMouseMove = function (event) {\r\n                var height = event.clientY - (editableTop + EDITABLE_PADDING);\r\n                height = (_this.options.minheight > 0) ? Math.max(height, _this.options.minheight) : height;\r\n                height = (_this.options.maxHeight > 0) ? Math.min(height, _this.options.maxHeight) : height;\r\n                _this.$editable.height(height);\r\n            };\r\n            _this.$document.on('mousemove', onMouseMove).one('mouseup', function () {\r\n                _this.$document.off('mousemove', onMouseMove);\r\n            });\r\n        });\r\n    };\r\n    Statusbar.prototype.destroy = function () {\r\n        this.$statusbar.off();\r\n    };\r\n    return Statusbar;\r\n}());\r\n\r\nvar Fullscreen = /** @class */ (function () {\r\n    function Fullscreen(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$toolbar = context.layoutInfo.toolbar;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.$codable = context.layoutInfo.codable;\r\n        this.$window = $$1(window);\r\n        this.$scrollbar = $$1('html, body');\r\n        this.onResize = function () {\r\n            _this.resizeTo({\r\n                h: _this.$window.height() - _this.$toolbar.outerHeight()\r\n            });\r\n        };\r\n    }\r\n    Fullscreen.prototype.resizeTo = function (size) {\r\n        this.$editable.css('height', size.h);\r\n        this.$codable.css('height', size.h);\r\n        if (this.$codable.data('cmeditor')) {\r\n            this.$codable.data('cmeditor').setsize(null, size.h);\r\n        }\r\n    };\r\n    /**\r\n     * toggle fullscreen\r\n     */\r\n    Fullscreen.prototype.toggle = function () {\r\n        this.$editor.toggleClass('fullscreen');\r\n        if (this.isFullscreen()) {\r\n            this.$editable.data('orgHeight', this.$editable.css('height'));\r\n            this.$window.on('resize', this.onResize).trigger('resize');\r\n            this.$scrollbar.css('overflow', 'hidden');\r\n        }\r\n        else {\r\n            this.$window.off('resize', this.onResize);\r\n            this.resizeTo({ h: this.$editable.data('orgHeight') });\r\n            this.$scrollbar.css('overflow', 'visible');\r\n        }\r\n        this.context.invoke('toolbar.updateFullscreen', this.isFullscreen());\r\n    };\r\n    Fullscreen.prototype.isFullscreen = function () {\r\n        return this.$editor.hasClass('fullscreen');\r\n    };\r\n    return Fullscreen;\r\n}());\r\n\r\nvar Handle = /** @class */ (function () {\r\n    function Handle(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.$document = $$1(document);\r\n        this.$editingArea = context.layoutInfo.editingArea;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        this.events = {\r\n            'summernote.mousedown': function (we, e) {\r\n                if (_this.update(e.target)) {\r\n                    e.preventDefault();\r\n                }\r\n            },\r\n            'summernote.keyup summernote.scroll summernote.change summernote.dialog.shown': function () {\r\n                _this.update();\r\n            },\r\n            'summernote.disable': function () {\r\n                _this.hide();\r\n            },\r\n            'summernote.codeview.toggled': function () {\r\n                _this.update();\r\n            }\r\n        };\r\n    }\r\n    Handle.prototype.initialize = function () {\r\n        var _this = this;\r\n        this.$handle = $$1([\r\n            '<div class=\"note-handle\">',\r\n            '<div class=\"note-control-selection\">',\r\n            '<div class=\"note-control-selection-bg\"></div>',\r\n            '<div class=\"note-control-holder note-control-nw\"></div>',\r\n            '<div class=\"note-control-holder note-control-ne\"></div>',\r\n            '<div class=\"note-control-holder note-control-sw\"></div>',\r\n            '<div class=\"',\r\n            (this.options.disableResizeImage ? 'note-control-holder' : 'note-control-sizing'),\r\n            ' note-control-se\"></div>',\r\n            (this.options.disableResizeImage ? '' : '<div class=\"note-control-selection-info\"></div>'),\r\n            '</div>',\r\n            '</div>'\r\n        ].join('')).prependTo(this.$editingArea);\r\n        this.$handle.on('mousedown', function (event) {\r\n            if (dom.isControlSizing(event.target)) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                var $target_1 = _this.$handle.find('.note-control-selection').data('target');\r\n                var posStart_1 = $target_1.offset();\r\n                var scrollTop_1 = _this.$document.scrollTop();\r\n                var onMouseMove_1 = function (event) {\r\n                    _this.context.invoke('editor.resizeTo', {\r\n                        x: event.clientX - posStart_1.left,\r\n                        y: event.clientY - (posStart_1.top - scrollTop_1)\r\n                    }, $target_1, !event.shiftKey);\r\n                    _this.update($target_1[0]);\r\n                };\r\n                _this.$document\r\n                    .on('mousemove', onMouseMove_1)\r\n                    .one('mouseup', function (e) {\r\n                    e.preventDefault();\r\n                    _this.$document.off('mousemove', onMouseMove_1);\r\n                    _this.context.invoke('editor.afterCommand');\r\n                });\r\n                if (!$target_1.data('ratio')) {\r\n                    $target_1.data('ratio', $target_1.height() / $target_1.width());\r\n                }\r\n            }\r\n        });\r\n        // Listen for scrolling on the handle overlay.\r\n        this.$handle.on('wheel', function (e) {\r\n            e.preventDefault();\r\n            _this.update();\r\n        });\r\n    };\r\n    Handle.prototype.destroy = function () {\r\n        this.$handle.remove();\r\n    };\r\n    Handle.prototype.update = function (target) {\r\n        if (this.context.isDisabled()) {\r\n            return false;\r\n        }\r\n        var isImage = dom.isImg(target);\r\n        var $selection = this.$handle.find('.note-control-selection');\r\n        this.context.invoke('imagePopover.update', target);\r\n        if (isImage) {\r\n            var $image = $$1(target);\r\n            var position = $image.position();\r\n            var pos = {\r\n                left: position.left + parseInt($image.css('marginLeft'), 10),\r\n                top: position.top + parseInt($image.css('marginTop'), 10)\r\n            };\r\n            // exclude margin\r\n            var imageSize = {\r\n                w: $image.outerWidth(false),\r\n                h: $image.outerHeight(false)\r\n            };\r\n            $selection.css({\r\n                display: 'block',\r\n                left: pos.left,\r\n                top: pos.top,\r\n                width: imageSize.w,\r\n                height: imageSize.h\r\n            }).data('target', $image); // save current image element.\r\n            var origImageObj = new Image();\r\n            origImageObj.src = $image.attr('src');\r\n            var sizingText = imageSize.w + 'x' + imageSize.h + ' (' + this.lang.image.original + ': ' + origImageObj.width + 'x' + origImageObj.height + ')';\r\n            $selection.find('.note-control-selection-info').text(sizingText);\r\n            this.context.invoke('editor.saveTarget', target);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n        return isImage;\r\n    };\r\n    /**\r\n     * hide\r\n     *\r\n     * @param {jQuery} $handle\r\n     */\r\n    Handle.prototype.hide = function () {\r\n        this.context.invoke('editor.clearTarget');\r\n        this.$handle.children().hide();\r\n    };\r\n    return Handle;\r\n}());\r\n\r\nvar defaultScheme = 'http://';\r\nvar linkPattern = /^([A-Za-z][A-Za-z0-9+-.]*\\:[\\/\\/]?|mailto:[A-Z0-9._%+-]+@)?(www\\.)?(.+)$/i;\r\nvar AutoLink = /** @class */ (function () {\r\n    function AutoLink(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.events = {\r\n            'summernote.keyup': function (we, e) {\r\n                if (!e.isDefaultPrevented()) {\r\n                    _this.handleKeyup(e);\r\n                }\r\n            },\r\n            'summernote.keydown': function (we, e) {\r\n                _this.handleKeydown(e);\r\n            }\r\n        };\r\n    }\r\n    AutoLink.prototype.initialize = function () {\r\n        this.lastWordRange = null;\r\n    };\r\n    AutoLink.prototype.destroy = function () {\r\n        this.lastWordRange = null;\r\n    };\r\n    AutoLink.prototype.replace = function () {\r\n        if (!this.lastWordRange) {\r\n            return;\r\n        }\r\n        var keyword = this.lastWordRange.toString();\r\n        var match = keyword.match(linkPattern);\r\n        if (match && (match[1] || match[2])) {\r\n            var link = match[1] ? keyword : defaultScheme + keyword;\r\n            var node = $$1('<a />').html(keyword).attr('href', link)[0];\r\n            this.lastWordRange.insertNode(node);\r\n            this.lastWordRange = null;\r\n            this.context.invoke('editor.focus');\r\n        }\r\n    };\r\n    AutoLink.prototype.handleKeydown = function (e) {\r\n        if (lists.contains([key.code.ENTER, key.code.SPACE], e.keyCode)) {\r\n            var wordRange = this.context.invoke('editor.createRange').getWordRange();\r\n            this.lastWordRange = wordRange;\r\n        }\r\n    };\r\n    AutoLink.prototype.handleKeyup = function (e) {\r\n        if (lists.contains([key.code.ENTER, key.code.SPACE], e.keyCode)) {\r\n            this.replace();\r\n        }\r\n    };\r\n    return AutoLink;\r\n}());\r\n\r\n/**\r\n * textarea auto sync.\r\n */\r\nvar AutoSync = /** @class */ (function () {\r\n    function AutoSync(context) {\r\n        var _this = this;\r\n        this.$note = context.layoutInfo.note;\r\n        this.events = {\r\n            'summernote.change': function () {\r\n                _this.$note.val(context.invoke('code'));\r\n            }\r\n        };\r\n    }\r\n    AutoSync.prototype.shouldInitialize = function () {\r\n        return dom.isTextarea(this.$note[0]);\r\n    };\r\n    return AutoSync;\r\n}());\r\n\r\nvar Placeholder = /** @class */ (function () {\r\n    function Placeholder(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.$editingArea = context.layoutInfo.editingArea;\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.init summernote.change': function () {\r\n                _this.update();\r\n            },\r\n            'summernote.codeview.toggled': function () {\r\n                _this.update();\r\n            }\r\n        };\r\n    }\r\n    Placeholder.prototype.shouldInitialize = function () {\r\n        return !!this.options.placeholder;\r\n    };\r\n    Placeholder.prototype.initialize = function () {\r\n        var _this = this;\r\n        this.$placeholder = $$1('<div class=\"note-placeholder\">');\r\n        this.$placeholder.on('click', function () {\r\n            _this.context.invoke('focus');\r\n        }).text(this.options.placeholder).prependTo(this.$editingArea);\r\n        this.update();\r\n    };\r\n    Placeholder.prototype.destroy = function () {\r\n        this.$placeholder.remove();\r\n    };\r\n    Placeholder.prototype.update = function () {\r\n        var isShow = !this.context.invoke('codeview.isActivated') && this.context.invoke('editor.isEmpty');\r\n        this.$placeholder.toggle(isShow);\r\n    };\r\n    return Placeholder;\r\n}());\r\n\r\nvar Buttons = /** @class */ (function () {\r\n    function Buttons(context) {\r\n        this.ui = $$1.summernote.ui;\r\n        this.context = context;\r\n        this.$toolbar = context.layoutInfo.toolbar;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        this.invertedKeyMap = func.invertObject(this.options.keyMap[env.isMac ? 'mac' : 'pc']);\r\n    }\r\n    Buttons.prototype.representShortcut = function (editorMethod) {\r\n        var shortcut = this.invertedKeyMap[editorMethod];\r\n        if (!this.options.shortcuts || !shortcut) {\r\n            return '';\r\n        }\r\n        if (env.isMac) {\r\n            shortcut = shortcut.replace('CMD', '⌘').replace('SHIFT', '⇧');\r\n        }\r\n        shortcut = shortcut.replace('BACKSLASH', '\\\\')\r\n            .replace('SLASH', '/')\r\n            .replace('LEFTBRACKET', '[')\r\n            .replace('RIGHTBRACKET', ']');\r\n        return ' (' + shortcut + ')';\r\n    };\r\n    Buttons.prototype.button = function (o) {\r\n        if (!this.options.tooltip && o.tooltip) {\r\n            delete o.tooltip;\r\n        }\r\n        o.container = this.options.container;\r\n        return this.ui.button(o);\r\n    };\r\n    Buttons.prototype.initialize = function () {\r\n        this.addToolbarButtons();\r\n        this.addImagePopoverButtons();\r\n        this.addLinkPopoverButtons();\r\n        this.addTablePopoverButtons();\r\n        this.fontInstalledMap = {};\r\n    };\r\n    Buttons.prototype.destroy = function () {\r\n        delete this.fontInstalledMap;\r\n    };\r\n    Buttons.prototype.isFontInstalled = function (name) {\r\n        if (!this.fontInstalledMap.hasOwnProperty(name)) {\r\n            this.fontInstalledMap[name] = env.isFontInstalled(name) ||\r\n                lists.contains(this.options.fontNamesIgnoreCheck, name);\r\n        }\r\n        return this.fontInstalledMap[name];\r\n    };\r\n    Buttons.prototype.isFontDeservedToAdd = function (name) {\r\n        var genericFamilies = ['sans-serif', 'serif', 'monospace', 'cursive', 'fantasy'];\r\n        name = name.toLowerCase();\r\n        return ((name !== '') && this.isFontInstalled(name) && ($$1.inArray(name, genericFamilies) === -1));\r\n    };\r\n    Buttons.prototype.addToolbarButtons = function () {\r\n        var _this = this;\r\n        this.context.memo('button.style', function () {\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.magic), _this.options),\r\n                    tooltip: _this.lang.style.style,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdown({\r\n                    className: 'dropdown-style',\r\n                    items: _this.options.styleTags,\r\n                    template: function (item) {\r\n                        if (typeof item === 'string') {\r\n                            item = { tag: item, title: (_this.lang.style.hasOwnProperty(item) ? _this.lang.style[item] : item) };\r\n                        }\r\n                        var tag = item.tag;\r\n                        var title = item.title;\r\n                        var style = item.style ? ' style=\"' + item.style + '\" ' : '';\r\n                        var className = item.className ? ' class=\"' + item.className + '\"' : '';\r\n                        return '<' + tag + style + className + '>' + title + '</' + tag + '>';\r\n                    },\r\n                    click: _this.context.createInvokeHandler('editor.formatBlock')\r\n                })\r\n            ]).render();\r\n        });\r\n        var _loop_1 = function (styleIdx, styleLen) {\r\n            var item = this_1.options.styleTags[styleIdx];\r\n            this_1.context.memo('button.style.' + item, function () {\r\n                return _this.button({\r\n                    className: 'note-btn-style-' + item,\r\n                    contents: '<div data-value=\"' + item + '\">' + item.toUpperCase() + '</div>',\r\n                    tooltip: item.toUpperCase(),\r\n                    click: _this.context.createInvokeHandler('editor.formatBlock')\r\n                }).render();\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var styleIdx = 0, styleLen = this.options.styleTags.length; styleIdx < styleLen; styleIdx++) {\r\n            _loop_1(styleIdx, styleLen);\r\n        }\r\n        this.context.memo('button.bold', function () {\r\n            return _this.button({\r\n                className: 'note-btn-bold',\r\n                contents: _this.ui.icon(_this.options.icons.bold),\r\n                tooltip: _this.lang.font.bold + _this.representShortcut('bold'),\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.bold')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.italic', function () {\r\n            return _this.button({\r\n                className: 'note-btn-italic',\r\n                contents: _this.ui.icon(_this.options.icons.italic),\r\n                tooltip: _this.lang.font.italic + _this.representShortcut('italic'),\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.italic')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.underline', function () {\r\n            return _this.button({\r\n                className: 'note-btn-underline',\r\n                contents: _this.ui.icon(_this.options.icons.underline),\r\n                tooltip: _this.lang.font.underline + _this.representShortcut('underline'),\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.underline')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.clear', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.eraser),\r\n                tooltip: _this.lang.font.clear + _this.representShortcut('removeFormat'),\r\n                click: _this.context.createInvokeHandler('editor.removeFormat')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.strikethrough', function () {\r\n            return _this.button({\r\n                className: 'note-btn-strikethrough',\r\n                contents: _this.ui.icon(_this.options.icons.strikethrough),\r\n                tooltip: _this.lang.font.strikethrough + _this.representShortcut('strikethrough'),\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.strikethrough')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.superscript', function () {\r\n            return _this.button({\r\n                className: 'note-btn-superscript',\r\n                contents: _this.ui.icon(_this.options.icons.superscript),\r\n                tooltip: _this.lang.font.superscript,\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.superscript')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.subscript', function () {\r\n            return _this.button({\r\n                className: 'note-btn-subscript',\r\n                contents: _this.ui.icon(_this.options.icons.subscript),\r\n                tooltip: _this.lang.font.subscript,\r\n                click: _this.context.createInvokeHandlerAndUpdateState('editor.subscript')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.fontname', function () {\r\n            var styleInfo = _this.context.invoke('editor.currentStyle');\r\n            // Add 'default' fonts into the fontnames array if not exist\r\n            $$1.each(styleInfo['font-family'].split(','), function (idx, fontname) {\r\n                fontname = fontname.trim().replace(/['\"]+/g, '');\r\n                if (_this.isFontDeservedToAdd(fontname)) {\r\n                    if ($$1.inArray(fontname, _this.options.fontNames) === -1) {\r\n                        _this.options.fontNames.push(fontname);\r\n                    }\r\n                }\r\n            });\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents('<span class=\"note-current-fontname\"/>', _this.options),\r\n                    tooltip: _this.lang.font.name,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdownCheck({\r\n                    className: 'dropdown-fontname',\r\n                    checkClassName: _this.options.icons.menuCheck,\r\n                    items: _this.options.fontNames.filter(_this.isFontInstalled.bind(_this)),\r\n                    template: function (item) {\r\n                        return '<span style=\"font-family: \\'' + item + '\\'\">' + item + '</span>';\r\n                    },\r\n                    click: _this.context.createInvokeHandlerAndUpdateState('editor.fontName')\r\n                })\r\n            ]).render();\r\n        });\r\n        this.context.memo('button.fontsize', function () {\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents('<span class=\"note-current-fontsize\"/>', _this.options),\r\n                    tooltip: _this.lang.font.size,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdownCheck({\r\n                    className: 'dropdown-fontsize',\r\n                    checkClassName: _this.options.icons.menuCheck,\r\n                    items: _this.options.fontSizes,\r\n                    click: _this.context.createInvokeHandlerAndUpdateState('editor.fontSize')\r\n                })\r\n            ]).render();\r\n        });\r\n        this.context.memo('button.color', function () {\r\n            return _this.ui.buttonGroup({\r\n                className: 'note-color',\r\n                children: [\r\n                    _this.button({\r\n                        className: 'note-current-color-button',\r\n                        contents: _this.ui.icon(_this.options.icons.font + ' note-recent-color'),\r\n                        tooltip: _this.lang.color.recent,\r\n                        click: function (e) {\r\n                            var $button = $$1(e.currentTarget);\r\n                            _this.context.invoke('editor.color', {\r\n                                backColor: $button.attr('data-backColor'),\r\n                                foreColor: $button.attr('data-foreColor')\r\n                            });\r\n                        },\r\n                        callback: function ($button) {\r\n                            var $recentColor = $button.find('.note-recent-color');\r\n                            $recentColor.css('background-color', '#FFFF00');\r\n                            $button.attr('data-backColor', '#FFFF00');\r\n                        }\r\n                    }),\r\n                    _this.button({\r\n                        className: 'dropdown-toggle',\r\n                        contents: _this.ui.dropdownButtonContents('', _this.options),\r\n                        tooltip: _this.lang.color.more,\r\n                        data: {\r\n                            toggle: 'dropdown'\r\n                        }\r\n                    }),\r\n                    _this.ui.dropdown({\r\n                        items: [\r\n                            '<div class=\"note-palette\">',\r\n                            '  <div class=\"note-palette-title\">' + _this.lang.color.background + '</div>',\r\n                            '  <div>',\r\n                            '    <button type=\"button\" class=\"note-color-reset btn btn-light\" data-event=\"backColor\" data-value=\"inherit\">',\r\n                            _this.lang.color.transparent,\r\n                            '    </button>',\r\n                            '  </div>',\r\n                            '  <div class=\"note-holder\" data-event=\"backColor\"/>',\r\n                            '</div>',\r\n                            '<div class=\"note-palette\">',\r\n                            '  <div class=\"note-palette-title\">' + _this.lang.color.foreground + '</div>',\r\n                            '  <div>',\r\n                            '    <button type=\"button\" class=\"note-color-reset btn btn-light\" data-event=\"removeFormat\" data-value=\"foreColor\">',\r\n                            _this.lang.color.resetToDefault,\r\n                            '    </button>',\r\n                            '  </div>',\r\n                            '  <div class=\"note-holder\" data-event=\"foreColor\"/>',\r\n                            '</div>'\r\n                        ].join(''),\r\n                        callback: function ($dropdown) {\r\n                            $dropdown.find('.note-holder').each(function (idx, item) {\r\n                                var $holder = $$1(item);\r\n                                $holder.append(_this.ui.palette({\r\n                                    colors: _this.options.colors,\r\n                                    eventName: $holder.data('event'),\r\n                                    container: _this.options.container,\r\n                                    tooltip: _this.options.tooltip\r\n                                }).render());\r\n                            });\r\n                        },\r\n                        click: function (event) {\r\n                            var $button = $$1(event.target);\r\n                            var eventName = $button.data('event');\r\n                            var value = $button.data('value');\r\n                            if (eventName && value) {\r\n                                var key = eventName === 'backColor' ? 'background-color' : 'color';\r\n                                var $color = $button.closest('.note-color').find('.note-recent-color');\r\n                                var $currentButton = $button.closest('.note-color').find('.note-current-color-button');\r\n                                $color.css(key, value);\r\n                                $currentButton.attr('data-' + eventName, value);\r\n                                _this.context.invoke('editor.' + eventName, value);\r\n                            }\r\n                        }\r\n                    })\r\n                ]\r\n            }).render();\r\n        });\r\n        this.context.memo('button.ul', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.unorderedlist),\r\n                tooltip: _this.lang.lists.unordered + _this.representShortcut('insertUnorderedList'),\r\n                click: _this.context.createInvokeHandler('editor.insertUnorderedList')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.ol', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.orderedlist),\r\n                tooltip: _this.lang.lists.ordered + _this.representShortcut('insertOrderedList'),\r\n                click: _this.context.createInvokeHandler('editor.insertOrderedList')\r\n            }).render();\r\n        });\r\n        var justifyLeft = this.button({\r\n            contents: this.ui.icon(this.options.icons.alignLeft),\r\n            tooltip: this.lang.paragraph.left + this.representShortcut('justifyLeft'),\r\n            click: this.context.createInvokeHandler('editor.justifyLeft')\r\n        });\r\n        var justifyCenter = this.button({\r\n            contents: this.ui.icon(this.options.icons.alignCenter),\r\n            tooltip: this.lang.paragraph.center + this.representShortcut('justifyCenter'),\r\n            click: this.context.createInvokeHandler('editor.justifyCenter')\r\n        });\r\n        var justifyRight = this.button({\r\n            contents: this.ui.icon(this.options.icons.alignRight),\r\n            tooltip: this.lang.paragraph.right + this.representShortcut('justifyRight'),\r\n            click: this.context.createInvokeHandler('editor.justifyRight')\r\n        });\r\n        var justifyFull = this.button({\r\n            contents: this.ui.icon(this.options.icons.alignJustify),\r\n            tooltip: this.lang.paragraph.justify + this.representShortcut('justifyFull'),\r\n            click: this.context.createInvokeHandler('editor.justifyFull')\r\n        });\r\n        var outdent = this.button({\r\n            contents: this.ui.icon(this.options.icons.outdent),\r\n            tooltip: this.lang.paragraph.outdent + this.representShortcut('outdent'),\r\n            click: this.context.createInvokeHandler('editor.outdent')\r\n        });\r\n        var indent = this.button({\r\n            contents: this.ui.icon(this.options.icons.indent),\r\n            tooltip: this.lang.paragraph.indent + this.representShortcut('indent'),\r\n            click: this.context.createInvokeHandler('editor.indent')\r\n        });\r\n        this.context.memo('button.justifyLeft', func.invoke(justifyLeft, 'render'));\r\n        this.context.memo('button.justifyCenter', func.invoke(justifyCenter, 'render'));\r\n        this.context.memo('button.justifyRight', func.invoke(justifyRight, 'render'));\r\n        this.context.memo('button.justifyFull', func.invoke(justifyFull, 'render'));\r\n        this.context.memo('button.outdent', func.invoke(outdent, 'render'));\r\n        this.context.memo('button.indent', func.invoke(indent, 'render'));\r\n        this.context.memo('button.paragraph', function () {\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.alignLeft), _this.options),\r\n                    tooltip: _this.lang.paragraph.paragraph,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdown([\r\n                    _this.ui.buttonGroup({\r\n                        className: 'note-align',\r\n                        children: [justifyLeft, justifyCenter, justifyRight, justifyFull]\r\n                    }),\r\n                    _this.ui.buttonGroup({\r\n                        className: 'note-list',\r\n                        children: [outdent, indent]\r\n                    })\r\n                ])\r\n            ]).render();\r\n        });\r\n        this.context.memo('button.height', function () {\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.textHeight), _this.options),\r\n                    tooltip: _this.lang.font.height,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdownCheck({\r\n                    items: _this.options.lineHeights,\r\n                    checkClassName: _this.options.icons.menuCheck,\r\n                    className: 'dropdown-line-height',\r\n                    click: _this.context.createInvokeHandler('editor.lineHeight')\r\n                })\r\n            ]).render();\r\n        });\r\n        this.context.memo('button.table', function () {\r\n            return _this.ui.buttonGroup([\r\n                _this.button({\r\n                    className: 'dropdown-toggle',\r\n                    contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.table), _this.options),\r\n                    tooltip: _this.lang.table.table,\r\n                    data: {\r\n                        toggle: 'dropdown'\r\n                    }\r\n                }),\r\n                _this.ui.dropdown({\r\n                    className: 'note-table',\r\n                    items: [\r\n                        '<div class=\"note-dimension-picker\">',\r\n                        '  <div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"/>',\r\n                        '  <div class=\"note-dimension-picker-highlighted\"/>',\r\n                        '  <div class=\"note-dimension-picker-unhighlighted\"/>',\r\n                        '</div>',\r\n                        '<div class=\"note-dimension-display\">1 x 1</div>'\r\n                    ].join('')\r\n                })\r\n            ], {\r\n                callback: function ($node) {\r\n                    var $catcher = $node.find('.note-dimension-picker-mousecatcher');\r\n                    $catcher.css({\r\n                        width: _this.options.insertTableMaxSize.col + 'em',\r\n                        height: _this.options.insertTableMaxSize.row + 'em'\r\n                    }).mousedown(_this.context.createInvokeHandler('editor.insertTable'))\r\n                        .on('mousemove', _this.tableMoveHandler.bind(_this));\r\n                }\r\n            }).render();\r\n        });\r\n        this.context.memo('button.link', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.link),\r\n                tooltip: _this.lang.link.link + _this.representShortcut('linkDialog.show'),\r\n                click: _this.context.createInvokeHandler('linkDialog.show')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.picture', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.picture),\r\n                tooltip: _this.lang.image.image,\r\n                click: _this.context.createInvokeHandler('imageDialog.show')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.video', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.video),\r\n                tooltip: _this.lang.video.video,\r\n                click: _this.context.createInvokeHandler('videoDialog.show')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.hr', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.minus),\r\n                tooltip: _this.lang.hr.insert + _this.representShortcut('insertHorizontalRule'),\r\n                click: _this.context.createInvokeHandler('editor.insertHorizontalRule')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.fullscreen', function () {\r\n            return _this.button({\r\n                className: 'btn-fullscreen',\r\n                contents: _this.ui.icon(_this.options.icons.arrowsAlt),\r\n                tooltip: _this.options.fullscreen,\r\n                click: _this.context.createInvokeHandler('fullscreen.toggle')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.codeview', function () {\r\n            return _this.button({\r\n                className: 'btn-codeview',\r\n                contents: _this.ui.icon(_this.options.icons.code),\r\n                tooltip: _this.options.codeview,\r\n                click: _this.context.createInvokeHandler('codeview.toggle')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.redo', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.redo),\r\n                tooltip: _this.lang.history.redo + _this.representShortcut('redo'),\r\n                click: _this.context.createInvokeHandler('editor.redo')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.undo', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.undo),\r\n                tooltip: _this.lang.history.undo + _this.representShortcut('undo'),\r\n                click: _this.context.createInvokeHandler('editor.undo')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.help', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.question),\r\n                tooltip: _this.options.help,\r\n                click: _this.context.createInvokeHandler('helpDialog.show')\r\n            }).render();\r\n        });\r\n    };\r\n    /**\r\n     * image : [\r\n     *   ['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']],\r\n     *   ['float', ['floatLeft', 'floatRight', 'floatNone' ]],\r\n     *   ['remove', ['removeMedia']]\r\n     * ],\r\n     */\r\n    Buttons.prototype.addImagePopoverButtons = function () {\r\n        var _this = this;\r\n        // Image Size Buttons\r\n        this.context.memo('button.imageSize100', function () {\r\n            return _this.button({\r\n                contents: '<span class=\"note-fontsize-10\">100%</span>',\r\n                tooltip: _this.lang.image.resizeFull,\r\n                click: _this.context.createInvokeHandler('editor.resize', '1')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.imageSize50', function () {\r\n            return _this.button({\r\n                contents: '<span class=\"note-fontsize-10\">50%</span>',\r\n                tooltip: _this.lang.image.resizeHalf,\r\n                click: _this.context.createInvokeHandler('editor.resize', '0.5')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.imageSize25', function () {\r\n            return _this.button({\r\n                contents: '<span class=\"note-fontsize-10\">25%</span>',\r\n                tooltip: _this.lang.image.resizeQuarter,\r\n                click: _this.context.createInvokeHandler('editor.resize', '0.25')\r\n            }).render();\r\n        });\r\n        // Float Buttons\r\n        this.context.memo('button.floatLeft', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.alignLeft),\r\n                tooltip: _this.lang.image.floatLeft,\r\n                click: _this.context.createInvokeHandler('editor.floatMe', 'left')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.floatRight', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.alignRight),\r\n                tooltip: _this.lang.image.floatRight,\r\n                click: _this.context.createInvokeHandler('editor.floatMe', 'right')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.floatNone', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.alignJustify),\r\n                tooltip: _this.lang.image.floatNone,\r\n                click: _this.context.createInvokeHandler('editor.floatMe', 'none')\r\n            }).render();\r\n        });\r\n        // Remove Buttons\r\n        this.context.memo('button.removeMedia', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.trash),\r\n                tooltip: _this.lang.image.remove,\r\n                click: _this.context.createInvokeHandler('editor.removeMedia')\r\n            }).render();\r\n        });\r\n    };\r\n    Buttons.prototype.addLinkPopoverButtons = function () {\r\n        var _this = this;\r\n        this.context.memo('button.linkDialogShow', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.link),\r\n                tooltip: _this.lang.link.edit,\r\n                click: _this.context.createInvokeHandler('linkDialog.show')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.unlink', function () {\r\n            return _this.button({\r\n                contents: _this.ui.icon(_this.options.icons.unlink),\r\n                tooltip: _this.lang.link.unlink,\r\n                click: _this.context.createInvokeHandler('editor.unlink')\r\n            }).render();\r\n        });\r\n    };\r\n    /**\r\n     * table : [\r\n     *  ['add', ['addRowDown', 'addRowUp', 'addColLeft', 'addColRight']],\r\n     *  ['delete', ['deleteRow', 'deleteCol', 'deleteTable']]\r\n     * ],\r\n     */\r\n    Buttons.prototype.addTablePopoverButtons = function () {\r\n        var _this = this;\r\n        this.context.memo('button.addRowUp', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.rowAbove),\r\n                tooltip: _this.lang.table.addRowAbove,\r\n                click: _this.context.createInvokeHandler('editor.addRow', 'top')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.addRowDown', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.rowBelow),\r\n                tooltip: _this.lang.table.addRowBelow,\r\n                click: _this.context.createInvokeHandler('editor.addRow', 'bottom')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.addColLeft', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.colBefore),\r\n                tooltip: _this.lang.table.addColLeft,\r\n                click: _this.context.createInvokeHandler('editor.addCol', 'left')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.addColRight', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.colAfter),\r\n                tooltip: _this.lang.table.addColRight,\r\n                click: _this.context.createInvokeHandler('editor.addCol', 'right')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.deleteRow', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.rowRemove),\r\n                tooltip: _this.lang.table.delRow,\r\n                click: _this.context.createInvokeHandler('editor.deleteRow')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.deleteCol', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.colRemove),\r\n                tooltip: _this.lang.table.delCol,\r\n                click: _this.context.createInvokeHandler('editor.deleteCol')\r\n            }).render();\r\n        });\r\n        this.context.memo('button.deleteTable', function () {\r\n            return _this.button({\r\n                className: 'btn-md',\r\n                contents: _this.ui.icon(_this.options.icons.trash),\r\n                tooltip: _this.lang.table.delTable,\r\n                click: _this.context.createInvokeHandler('editor.deleteTable')\r\n            }).render();\r\n        });\r\n    };\r\n    Buttons.prototype.build = function ($container, groups) {\r\n        for (var groupIdx = 0, groupLen = groups.length; groupIdx < groupLen; groupIdx++) {\r\n            var group = groups[groupIdx];\r\n            var groupName = $$1.isArray(group) ? group[0] : group;\r\n            var buttons = $$1.isArray(group) ? ((group.length === 1) ? [group[0]] : group[1]) : [group];\r\n            var $group = this.ui.buttonGroup({\r\n                className: 'note-' + groupName\r\n            }).render();\r\n            for (var idx = 0, len = buttons.length; idx < len; idx++) {\r\n                var btn = this.context.memo('button.' + buttons[idx]);\r\n                if (btn) {\r\n                    $group.append(typeof btn === 'function' ? btn(this.context) : btn);\r\n                }\r\n            }\r\n            $group.appendTo($container);\r\n        }\r\n    };\r\n    /**\r\n     * @param {jQuery} [$container]\r\n     */\r\n    Buttons.prototype.updateCurrentStyle = function ($container) {\r\n        var _this = this;\r\n        var $cont = $container || this.$toolbar;\r\n        var styleInfo = this.context.invoke('editor.currentStyle');\r\n        this.updateBtnStates($cont, {\r\n            '.note-btn-bold': function () {\r\n                return styleInfo['font-bold'] === 'bold';\r\n            },\r\n            '.note-btn-italic': function () {\r\n                return styleInfo['font-italic'] === 'italic';\r\n            },\r\n            '.note-btn-underline': function () {\r\n                return styleInfo['font-underline'] === 'underline';\r\n            },\r\n            '.note-btn-subscript': function () {\r\n                return styleInfo['font-subscript'] === 'subscript';\r\n            },\r\n            '.note-btn-superscript': function () {\r\n                return styleInfo['font-superscript'] === 'superscript';\r\n            },\r\n            '.note-btn-strikethrough': function () {\r\n                return styleInfo['font-strikethrough'] === 'strikethrough';\r\n            }\r\n        });\r\n        if (styleInfo['font-family']) {\r\n            var fontNames = styleInfo['font-family'].split(',').map(function (name) {\r\n                return name.replace(/[\\'\\\"]/g, '')\r\n                    .replace(/\\s+$/, '')\r\n                    .replace(/^\\s+/, '');\r\n            });\r\n            var fontName_1 = lists.find(fontNames, this.isFontInstalled.bind(this));\r\n            $cont.find('.dropdown-fontname a').each(function (idx, item) {\r\n                var $item = $$1(item);\r\n                // always compare string to avoid creating another func.\r\n                var isChecked = ($item.data('value') + '') === (fontName_1 + '');\r\n                $item.toggleClass('checked', isChecked);\r\n            });\r\n            $cont.find('.note-current-fontname').text(fontName_1).css('font-family', fontName_1);\r\n        }\r\n        if (styleInfo['font-size']) {\r\n            var fontSize_1 = styleInfo['font-size'];\r\n            $cont.find('.dropdown-fontsize a').each(function (idx, item) {\r\n                var $item = $$1(item);\r\n                // always compare with string to avoid creating another func.\r\n                var isChecked = ($item.data('value') + '') === (fontSize_1 + '');\r\n                $item.toggleClass('checked', isChecked);\r\n            });\r\n            $cont.find('.note-current-fontsize').text(fontSize_1);\r\n        }\r\n        if (styleInfo['line-height']) {\r\n            var lineHeight_1 = styleInfo['line-height'];\r\n            $cont.find('.dropdown-line-height li a').each(function (idx, item) {\r\n                // always compare with string to avoid creating another func.\r\n                var isChecked = ($$1(item).data('value') + '') === (lineHeight_1 + '');\r\n                _this.className = isChecked ? 'checked' : '';\r\n            });\r\n        }\r\n    };\r\n    Buttons.prototype.updateBtnStates = function ($container, infos) {\r\n        var _this = this;\r\n        $$1.each(infos, function (selector, pred) {\r\n            _this.ui.toggleBtnActive($container.find(selector), pred());\r\n        });\r\n    };\r\n    Buttons.prototype.tableMoveHandler = function (event) {\r\n        var PX_PER_EM = 18;\r\n        var $picker = $$1(event.target.parentNode); // target is mousecatcher\r\n        var $dimensionDisplay = $picker.next();\r\n        var $catcher = $picker.find('.note-dimension-picker-mousecatcher');\r\n        var $highlighted = $picker.find('.note-dimension-picker-highlighted');\r\n        var $unhighlighted = $picker.find('.note-dimension-picker-unhighlighted');\r\n        var posOffset;\r\n        // HTML5 with jQuery - e.offsetX is undefined in Firefox\r\n        if (event.offsetX === undefined) {\r\n            var posCatcher = $$1(event.target).offset();\r\n            posOffset = {\r\n                x: event.pageX - posCatcher.left,\r\n                y: event.pageY - posCatcher.top\r\n            };\r\n        }\r\n        else {\r\n            posOffset = {\r\n                x: event.offsetX,\r\n                y: event.offsetY\r\n            };\r\n        }\r\n        var dim = {\r\n            c: Math.ceil(posOffset.x / PX_PER_EM) || 1,\r\n            r: Math.ceil(posOffset.y / PX_PER_EM) || 1\r\n        };\r\n        $highlighted.css({ width: dim.c + 'em', height: dim.r + 'em' });\r\n        $catcher.data('value', dim.c + 'x' + dim.r);\r\n        if (dim.c > 3 && dim.c < this.options.insertTableMaxSize.col) {\r\n            $unhighlighted.css({ width: dim.c + 1 + 'em' });\r\n        }\r\n        if (dim.r > 3 && dim.r < this.options.insertTableMaxSize.row) {\r\n            $unhighlighted.css({ height: dim.r + 1 + 'em' });\r\n        }\r\n        $dimensionDisplay.html(dim.c + ' x ' + dim.r);\r\n    };\r\n    return Buttons;\r\n}());\r\n\r\nvar Toolbar = /** @class */ (function () {\r\n    function Toolbar(context) {\r\n        this.context = context;\r\n        this.$window = $$1(window);\r\n        this.$document = $$1(document);\r\n        this.ui = $$1.summernote.ui;\r\n        this.$note = context.layoutInfo.note;\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.$toolbar = context.layoutInfo.toolbar;\r\n        this.options = context.options;\r\n        this.followScroll = this.followScroll.bind(this);\r\n    }\r\n    Toolbar.prototype.shouldInitialize = function () {\r\n        return !this.options.airMode;\r\n    };\r\n    Toolbar.prototype.initialize = function () {\r\n        var _this = this;\r\n        this.options.toolbar = this.options.toolbar || [];\r\n        if (!this.options.toolbar.length) {\r\n            this.$toolbar.hide();\r\n        }\r\n        else {\r\n            this.context.invoke('buttons.build', this.$toolbar, this.options.toolbar);\r\n        }\r\n        if (this.options.toolbarContainer) {\r\n            this.$toolbar.appendTo(this.options.toolbarContainer);\r\n        }\r\n        this.changeContainer(false);\r\n        this.$note.on('summernote.keyup summernote.mouseup summernote.change', function () {\r\n            _this.context.invoke('buttons.updateCurrentStyle');\r\n        });\r\n        this.context.invoke('buttons.updateCurrentStyle');\r\n        if (this.options.followingToolbar) {\r\n            this.$window.on('scroll resize', this.followScroll);\r\n        }\r\n    };\r\n    Toolbar.prototype.destroy = function () {\r\n        this.$toolbar.children().remove();\r\n        if (this.options.followingToolbar) {\r\n            this.$window.off('scroll resize', this.followScroll);\r\n        }\r\n    };\r\n    Toolbar.prototype.followScroll = function () {\r\n        if (this.$editor.hasClass('fullscreen')) {\r\n            return false;\r\n        }\r\n        var $toolbarWrapper = this.$toolbar.parent('.note-toolbar-wrapper');\r\n        var editorHeight = this.$editor.outerHeight();\r\n        var editorWidth = this.$editor.width();\r\n        var toolbarHeight = this.$toolbar.height();\r\n        $toolbarWrapper.css({\r\n            height: toolbarHeight\r\n        });\r\n        // check if the web app is currently using another static bar\r\n        var otherBarHeight = 0;\r\n        if (this.options.otherStaticBar) {\r\n            otherBarHeight = $$1(this.options.otherStaticBar).outerHeight();\r\n        }\r\n        var currentOffset = this.$document.scrollTop();\r\n        var editorOffsetTop = this.$editor.offset().top;\r\n        var editorOffsetBottom = editorOffsetTop + editorHeight;\r\n        var activateOffset = editorOffsetTop - otherBarHeight;\r\n        var deactivateOffsetBottom = editorOffsetBottom - otherBarHeight - toolbarHeight;\r\n        if ((currentOffset > activateOffset) && (currentOffset < deactivateOffsetBottom)) {\r\n            this.$toolbar.css({\r\n                position: 'fixed',\r\n                top: otherBarHeight,\r\n                width: editorWidth\r\n            });\r\n        }\r\n        else {\r\n            this.$toolbar.css({\r\n                position: 'relative',\r\n                top: 0,\r\n                width: '100%'\r\n            });\r\n        }\r\n    };\r\n    Toolbar.prototype.changeContainer = function (isFullscreen) {\r\n        if (isFullscreen) {\r\n            this.$toolbar.prependTo(this.$editor);\r\n        }\r\n        else {\r\n            if (this.options.toolbarContainer) {\r\n                this.$toolbar.appendTo(this.options.toolbarContainer);\r\n            }\r\n        }\r\n    };\r\n    Toolbar.prototype.updateFullscreen = function (isFullscreen) {\r\n        this.ui.toggleBtnActive(this.$toolbar.find('.btn-fullscreen'), isFullscreen);\r\n        this.changeContainer(isFullscreen);\r\n    };\r\n    Toolbar.prototype.updateCodeview = function (isCodeview) {\r\n        this.ui.toggleBtnActive(this.$toolbar.find('.btn-codeview'), isCodeview);\r\n        if (isCodeview) {\r\n            this.deactivate();\r\n        }\r\n        else {\r\n            this.activate();\r\n        }\r\n    };\r\n    Toolbar.prototype.activate = function (isIncludeCodeview) {\r\n        var $btn = this.$toolbar.find('button');\r\n        if (!isIncludeCodeview) {\r\n            $btn = $btn.not('.btn-codeview');\r\n        }\r\n        this.ui.toggleBtn($btn, true);\r\n    };\r\n    Toolbar.prototype.deactivate = function (isIncludeCodeview) {\r\n        var $btn = this.$toolbar.find('button');\r\n        if (!isIncludeCodeview) {\r\n            $btn = $btn.not('.btn-codeview');\r\n        }\r\n        this.ui.toggleBtn($btn, false);\r\n    };\r\n    return Toolbar;\r\n}());\r\n\r\nvar LinkDialog = /** @class */ (function () {\r\n    function LinkDialog(context) {\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.$body = $$1(document.body);\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n        context.memo('help.linkDialog.show', this.options.langInfo.help['linkDialog.show']);\r\n    }\r\n    LinkDialog.prototype.initialize = function () {\r\n        var $container = this.options.dialogsInBody ? this.$body : this.$editor;\r\n        var body = [\r\n            '<div class=\"form-group note-form-group\">',\r\n            \"<label class=\\\"note-form-label\\\">\" + this.lang.link.textToDisplay + \"</label>\",\r\n            '<input class=\"note-link-text form-control note-form-control  note-input\" type=\"text\" />',\r\n            '</div>',\r\n            '<div class=\"form-group note-form-group\">',\r\n            \"<label class=\\\"note-form-label\\\">\" + this.lang.link.url + \"</label>\",\r\n            '<input class=\"note-link-url form-control note-form-control note-input\" type=\"text\" value=\"http://\" />',\r\n            '</div>',\r\n            !this.options.disableLinkTarget\r\n                ? $$1('<div/>').append(this.ui.checkbox({\r\n                    id: 'sn-checkbox-open-in-new-window',\r\n                    text: this.lang.link.openInNewWindow,\r\n                    checked: true\r\n                }).render()).html()\r\n                : ''\r\n        ].join('');\r\n        var buttonClass = 'btn btn-primary note-btn note-btn-primary note-link-btn';\r\n        var footer = \"<button type=\\\"submit\\\" href=\\\"#\\\" class=\\\"\" + buttonClass + \"\\\" disabled>\" + this.lang.link.insert + \"</button>\";\r\n        this.$dialog = this.ui.dialog({\r\n            className: 'link-dialog',\r\n            title: this.lang.link.insert,\r\n            fade: this.options.dialogsFade,\r\n            body: body,\r\n            footer: footer\r\n        }).render().appendTo($container);\r\n    };\r\n    LinkDialog.prototype.destroy = function () {\r\n        this.ui.hideDialog(this.$dialog);\r\n        this.$dialog.remove();\r\n    };\r\n    LinkDialog.prototype.bindEnterKey = function ($input, $btn) {\r\n        $input.on('keypress', function (event) {\r\n            if (event.keyCode === key.code.ENTER) {\r\n                event.preventDefault();\r\n                $btn.trigger('click');\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * toggle update button\r\n     */\r\n    LinkDialog.prototype.toggleLinkBtn = function ($linkBtn, $linkText, $linkUrl) {\r\n        this.ui.toggleBtn($linkBtn, $linkText.val() && $linkUrl.val());\r\n    };\r\n    /**\r\n     * Show link dialog and set event handlers on dialog controls.\r\n     *\r\n     * @param {Object} linkInfo\r\n     * @return {Promise}\r\n     */\r\n    LinkDialog.prototype.showLinkDialog = function (linkInfo) {\r\n        var _this = this;\r\n        return $$1.Deferred(function (deferred) {\r\n            var $linkText = _this.$dialog.find('.note-link-text');\r\n            var $linkUrl = _this.$dialog.find('.note-link-url');\r\n            var $linkBtn = _this.$dialog.find('.note-link-btn');\r\n            var $openInNewWindow = _this.$dialog.find('input[type=checkbox]');\r\n            _this.ui.onDialogShown(_this.$dialog, function () {\r\n                _this.context.triggerEvent('dialog.shown');\r\n                // if no url was given, copy text to url\r\n                if (!linkInfo.url) {\r\n                    linkInfo.url = linkInfo.text;\r\n                }\r\n                $linkText.val(linkInfo.text);\r\n                var handleLinkTextUpdate = function () {\r\n                    _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl);\r\n                    // if linktext was modified by keyup,\r\n                    // stop cloning text from linkUrl\r\n                    linkInfo.text = $linkText.val();\r\n                };\r\n                $linkText.on('input', handleLinkTextUpdate).on('paste', function () {\r\n                    setTimeout(handleLinkTextUpdate, 0);\r\n                });\r\n                var handleLinkUrlUpdate = function () {\r\n                    _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl);\r\n                    // display same link on `Text to display` input\r\n                    // when create a new link\r\n                    if (!linkInfo.text) {\r\n                        $linkText.val($linkUrl.val());\r\n                    }\r\n                };\r\n                $linkUrl.on('input', handleLinkUrlUpdate).on('paste', function () {\r\n                    setTimeout(handleLinkUrlUpdate, 0);\r\n                }).val(linkInfo.url);\r\n                if (!env.isSupportTouch) {\r\n                    $linkUrl.trigger('focus');\r\n                }\r\n                _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl);\r\n                _this.bindEnterKey($linkUrl, $linkBtn);\r\n                _this.bindEnterKey($linkText, $linkBtn);\r\n                var isChecked = linkInfo.isNewWindow !== undefined\r\n                    ? linkInfo.isNewWindow : _this.context.options.linkTargetBlank;\r\n                $openInNewWindow.prop('checked', isChecked);\r\n                $linkBtn.one('click', function (event) {\r\n                    event.preventDefault();\r\n                    deferred.resolve({\r\n                        range: linkInfo.range,\r\n                        url: $linkUrl.val(),\r\n                        text: $linkText.val(),\r\n                        isNewWindow: $openInNewWindow.is(':checked')\r\n                    });\r\n                    _this.ui.hideDialog(_this.$dialog);\r\n                });\r\n            });\r\n            _this.ui.onDialogHidden(_this.$dialog, function () {\r\n                // detach events\r\n                $linkText.off('input paste keypress');\r\n                $linkUrl.off('input paste keypress');\r\n                $linkBtn.off('click');\r\n                if (deferred.state() === 'pending') {\r\n                    deferred.reject();\r\n                }\r\n            });\r\n            _this.ui.showDialog(_this.$dialog);\r\n        }).promise();\r\n    };\r\n    /**\r\n     * @param {Object} layoutInfo\r\n     */\r\n    LinkDialog.prototype.show = function () {\r\n        var _this = this;\r\n        var linkInfo = this.context.invoke('editor.getLinkInfo');\r\n        this.context.invoke('editor.saveRange');\r\n        this.showLinkDialog(linkInfo).then(function (linkInfo) {\r\n            _this.context.invoke('editor.restoreRange');\r\n            _this.context.invoke('editor.createLink', linkInfo);\r\n        }).fail(function () {\r\n            _this.context.invoke('editor.restoreRange');\r\n        });\r\n    };\r\n    return LinkDialog;\r\n}());\r\n\r\nvar LinkPopover = /** @class */ (function () {\r\n    function LinkPopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.keyup summernote.mouseup summernote.change summernote.scroll': function () {\r\n                _this.update();\r\n            },\r\n            'summernote.disable summernote.dialog.shown': function () {\r\n                _this.hide();\r\n            }\r\n        };\r\n    }\r\n    LinkPopover.prototype.shouldInitialize = function () {\r\n        return !lists.isEmpty(this.options.popover.link);\r\n    };\r\n    LinkPopover.prototype.initialize = function () {\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-link-popover',\r\n            callback: function ($node) {\r\n                var $content = $node.find('.popover-content,.note-popover-content');\r\n                $content.prepend('<span><a target=\"_blank\"></a>&nbsp;</span>');\r\n            }\r\n        }).render().appendTo(this.options.container);\r\n        var $content = this.$popover.find('.popover-content,.note-popover-content');\r\n        this.context.invoke('buttons.build', $content, this.options.popover.link);\r\n    };\r\n    LinkPopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    LinkPopover.prototype.update = function () {\r\n        // Prevent focusing on editable when invoke('code') is executed\r\n        if (!this.context.invoke('editor.hasFocus')) {\r\n            this.hide();\r\n            return;\r\n        }\r\n        var rng = this.context.invoke('editor.createRange');\r\n        if (rng.isCollapsed() && rng.isOnAnchor()) {\r\n            var anchor = dom.ancestor(rng.sc, dom.isAnchor);\r\n            var href = $$1(anchor).attr('href');\r\n            this.$popover.find('a').attr('href', href).html(href);\r\n            var pos = dom.posFromPlaceholder(anchor);\r\n            this.$popover.css({\r\n                display: 'block',\r\n                left: pos.left,\r\n                top: pos.top\r\n            });\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    LinkPopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return LinkPopover;\r\n}());\r\n\r\nvar ImageDialog = /** @class */ (function () {\r\n    function ImageDialog(context) {\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.$body = $$1(document.body);\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n    }\r\n    ImageDialog.prototype.initialize = function () {\r\n        var $container = this.options.dialogsInBody ? this.$body : this.$editor;\r\n        var imageLimitation = '';\r\n        if (this.options.maximumImageFileSize) {\r\n            var unit = Math.floor(Math.log(this.options.maximumImageFileSize) / Math.log(1024));\r\n            var readableSize = (this.options.maximumImageFileSize / Math.pow(1024, unit)).toFixed(2) * 1 +\r\n                ' ' + ' KMGTP'[unit] + 'B';\r\n            imageLimitation = \"<small>\" + (this.lang.image.maximumFileSize + ' : ' + readableSize) + \"</small>\";\r\n        }\r\n        var body = [\r\n            '<div class=\"form-group note-form-group note-group-select-from-files\">',\r\n            '<label class=\"note-form-label\">' + this.lang.image.selectFromFiles + '</label>',\r\n            '<input class=\"note-image-input note-form-control note-input\" ',\r\n            ' type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />',\r\n            imageLimitation,\r\n            '</div>',\r\n            '<div class=\"form-group note-group-image-url\" style=\"overflow:auto;\">',\r\n            '<label class=\"note-form-label\">' + this.lang.image.url + '</label>',\r\n            '<input class=\"note-image-url form-control note-form-control note-input ',\r\n            ' col-md-12\" type=\"text\" />',\r\n            '</div>'\r\n        ].join('');\r\n        var buttonClass = 'btn btn-primary note-btn note-btn-primary note-image-btn';\r\n        var footer = \"<button type=\\\"submit\\\" href=\\\"#\\\" class=\\\"\" + buttonClass + \"\\\" disabled>\" + this.lang.image.insert + \"</button>\";\r\n        this.$dialog = this.ui.dialog({\r\n            title: this.lang.image.insert,\r\n            fade: this.options.dialogsFade,\r\n            body: body,\r\n            footer: footer\r\n        }).render().appendTo($container);\r\n    };\r\n    ImageDialog.prototype.destroy = function () {\r\n        this.ui.hideDialog(this.$dialog);\r\n        this.$dialog.remove();\r\n    };\r\n    ImageDialog.prototype.bindEnterKey = function ($input, $btn) {\r\n        $input.on('keypress', function (event) {\r\n            if (event.keyCode === key.code.ENTER) {\r\n                event.preventDefault();\r\n                $btn.trigger('click');\r\n            }\r\n        });\r\n    };\r\n    ImageDialog.prototype.show = function () {\r\n        var _this = this;\r\n        this.context.invoke('editor.saveRange');\r\n        this.showImageDialog().then(function (data) {\r\n            // [workaround] hide dialog before restore range for IE range focus\r\n            _this.ui.hideDialog(_this.$dialog);\r\n            _this.context.invoke('editor.restoreRange');\r\n            if (typeof data === 'string') {\r\n                _this.context.invoke('editor.insertImage', data);\r\n            }\r\n            else {\r\n                _this.context.invoke('editor.insertImagesOrCallback', data);\r\n            }\r\n        }).fail(function () {\r\n            _this.context.invoke('editor.restoreRange');\r\n        });\r\n    };\r\n    /**\r\n     * show image dialog\r\n     *\r\n     * @param {jQuery} $dialog\r\n     * @return {Promise}\r\n     */\r\n    ImageDialog.prototype.showImageDialog = function () {\r\n        var _this = this;\r\n        return $$1.Deferred(function (deferred) {\r\n            var $imageInput = _this.$dialog.find('.note-image-input');\r\n            var $imageUrl = _this.$dialog.find('.note-image-url');\r\n            var $imageBtn = _this.$dialog.find('.note-image-btn');\r\n            _this.ui.onDialogShown(_this.$dialog, function () {\r\n                _this.context.triggerEvent('dialog.shown');\r\n                // Cloning imageInput to clear element.\r\n                $imageInput.replaceWith($imageInput.clone().on('change', function (event) {\r\n                    deferred.resolve(event.target.files || event.target.value);\r\n                }).val(''));\r\n                $imageBtn.click(function (event) {\r\n                    event.preventDefault();\r\n                    deferred.resolve($imageUrl.val());\r\n                });\r\n                $imageUrl.on('keyup paste', function () {\r\n                    var url = $imageUrl.val();\r\n                    _this.ui.toggleBtn($imageBtn, url);\r\n                }).val('');\r\n                if (!env.isSupportTouch) {\r\n                    $imageUrl.trigger('focus');\r\n                }\r\n                _this.bindEnterKey($imageUrl, $imageBtn);\r\n            });\r\n            _this.ui.onDialogHidden(_this.$dialog, function () {\r\n                $imageInput.off('change');\r\n                $imageUrl.off('keyup paste keypress');\r\n                $imageBtn.off('click');\r\n                if (deferred.state() === 'pending') {\r\n                    deferred.reject();\r\n                }\r\n            });\r\n            _this.ui.showDialog(_this.$dialog);\r\n        });\r\n    };\r\n    return ImageDialog;\r\n}());\r\n\r\n/**\r\n * Image popover module\r\n *  mouse events that show/hide popover will be handled by Handle.js.\r\n *  Handle.js will receive the events and invoke 'imagePopover.update'.\r\n */\r\nvar ImagePopover = /** @class */ (function () {\r\n    function ImagePopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.editable = context.layoutInfo.editable[0];\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.disable': function () {\r\n                _this.hide();\r\n            }\r\n        };\r\n    }\r\n    ImagePopover.prototype.shouldInitialize = function () {\r\n        return !lists.isEmpty(this.options.popover.image);\r\n    };\r\n    ImagePopover.prototype.initialize = function () {\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-image-popover'\r\n        }).render().appendTo(this.options.container);\r\n        var $content = this.$popover.find('.popover-content,.note-popover-content');\r\n        this.context.invoke('buttons.build', $content, this.options.popover.image);\r\n    };\r\n    ImagePopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    ImagePopover.prototype.update = function (target) {\r\n        if (dom.isImg(target)) {\r\n            var pos = dom.posFromPlaceholder(target);\r\n            var posEditor = dom.posFromPlaceholder(this.editable);\r\n            this.$popover.css({\r\n                display: 'block',\r\n                left: this.options.popatmouse ? event.pageX - 20 : pos.left,\r\n                top: this.options.popatmouse ? event.pageY : Math.min(pos.top, posEditor.top)\r\n            });\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    ImagePopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return ImagePopover;\r\n}());\r\n\r\nvar TablePopover = /** @class */ (function () {\r\n    function TablePopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.mousedown': function (we, e) {\r\n                _this.update(e.target);\r\n            },\r\n            'summernote.keyup summernote.scroll summernote.change': function () {\r\n                _this.update();\r\n            },\r\n            'summernote.disable': function () {\r\n                _this.hide();\r\n            }\r\n        };\r\n    }\r\n    TablePopover.prototype.shouldInitialize = function () {\r\n        return !lists.isEmpty(this.options.popover.table);\r\n    };\r\n    TablePopover.prototype.initialize = function () {\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-table-popover'\r\n        }).render().appendTo(this.options.container);\r\n        var $content = this.$popover.find('.popover-content,.note-popover-content');\r\n        this.context.invoke('buttons.build', $content, this.options.popover.table);\r\n        // [workaround] Disable Firefox's default table editor\r\n        if (env.isFF) {\r\n            document.execCommand('enableInlineTableEditing', false, false);\r\n        }\r\n    };\r\n    TablePopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    TablePopover.prototype.update = function (target) {\r\n        if (this.context.isDisabled()) {\r\n            return false;\r\n        }\r\n        var isCell = dom.isCell(target);\r\n        if (isCell) {\r\n            var pos = dom.posFromPlaceholder(target);\r\n            this.$popover.css({\r\n                display: 'block',\r\n                left: pos.left,\r\n                top: pos.top\r\n            });\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n        return isCell;\r\n    };\r\n    TablePopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return TablePopover;\r\n}());\r\n\r\nvar VideoDialog = /** @class */ (function () {\r\n    function VideoDialog(context) {\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.$body = $$1(document.body);\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n    }\r\n    VideoDialog.prototype.initialize = function () {\r\n        var $container = this.options.dialogsInBody ? this.$body : this.$editor;\r\n        var body = [\r\n            '<div class=\"form-group note-form-group row-fluid\">',\r\n            \"<label class=\\\"note-form-label\\\">\" + this.lang.video.url + \" <small class=\\\"text-muted\\\">\" + this.lang.video.providers + \"</small></label>\",\r\n            '<input class=\"note-video-url form-control note-form-control note-input\" type=\"text\" />',\r\n            '</div>'\r\n        ].join('');\r\n        var buttonClass = 'btn btn-primary note-btn note-btn-primary note-video-btn';\r\n        var footer = \"<button type=\\\"submit\\\" href=\\\"#\\\" class=\\\"\" + buttonClass + \"\\\" disabled>\" + this.lang.video.insert + \"</button>\";\r\n        this.$dialog = this.ui.dialog({\r\n            title: this.lang.video.insert,\r\n            fade: this.options.dialogsFade,\r\n            body: body,\r\n            footer: footer\r\n        }).render().appendTo($container);\r\n    };\r\n    VideoDialog.prototype.destroy = function () {\r\n        this.ui.hideDialog(this.$dialog);\r\n        this.$dialog.remove();\r\n    };\r\n    VideoDialog.prototype.bindEnterKey = function ($input, $btn) {\r\n        $input.on('keypress', function (event) {\r\n            if (event.keyCode === key.code.ENTER) {\r\n                event.preventDefault();\r\n                $btn.trigger('click');\r\n            }\r\n        });\r\n    };\r\n    VideoDialog.prototype.createVideoNode = function (url) {\r\n        // video url patterns(youtube, instagram, vimeo, dailymotion, youku, mp4, ogg, webm)\r\n        var ytRegExp = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n        var ytMatch = url.match(ytRegExp);\r\n        var igRegExp = /(?:www\\.|\\/\\/)instagram\\.com\\/p\\/(.[a-zA-Z0-9_-]*)/;\r\n        var igMatch = url.match(igRegExp);\r\n        var vRegExp = /\\/\\/vine\\.co\\/v\\/([a-zA-Z0-9]+)/;\r\n        var vMatch = url.match(vRegExp);\r\n        var vimRegExp = /\\/\\/(player\\.)?vimeo\\.com\\/([a-z]*\\/)*(\\d+)[?]?.*/;\r\n        var vimMatch = url.match(vimRegExp);\r\n        var dmRegExp = /.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n        var dmMatch = url.match(dmRegExp);\r\n        var youkuRegExp = /\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/;\r\n        var youkuMatch = url.match(youkuRegExp);\r\n        var qqRegExp = /\\/\\/v\\.qq\\.com.*?vid=(.+)/;\r\n        var qqMatch = url.match(qqRegExp);\r\n        var qqRegExp2 = /\\/\\/v\\.qq\\.com\\/x?\\/?(page|cover).*?\\/([^\\/]+)\\.html\\??.*/;\r\n        var qqMatch2 = url.match(qqRegExp2);\r\n        var mp4RegExp = /^.+.(mp4|m4v)$/;\r\n        var mp4Match = url.match(mp4RegExp);\r\n        var oggRegExp = /^.+.(ogg|ogv)$/;\r\n        var oggMatch = url.match(oggRegExp);\r\n        var webmRegExp = /^.+.(webm)$/;\r\n        var webmMatch = url.match(webmRegExp);\r\n        var $video;\r\n        if (ytMatch && ytMatch[1].length === 11) {\r\n            var youtubeId = ytMatch[1];\r\n            $video = $$1('<iframe>')\r\n                .attr('frameborder', 0)\r\n                .attr('src', '//www.youtube.com/embed/' + youtubeId)\r\n                .attr('width', '640').attr('height', '360');\r\n        }\r\n        else if (igMatch && igMatch[0].length) {\r\n            $video = $$1('<iframe>')\r\n                .attr('frameborder', 0)\r\n                .attr('src', 'https://instagram.com/p/' + igMatch[1] + '/embed/')\r\n                .attr('width', '612').attr('height', '710')\r\n                .attr('scrolling', 'no')\r\n                .attr('allowtransparency', 'true');\r\n        }\r\n        else if (vMatch && vMatch[0].length) {\r\n            $video = $$1('<iframe>')\r\n                .attr('frameborder', 0)\r\n                .attr('src', vMatch[0] + '/embed/simple')\r\n                .attr('width', '600').attr('height', '600')\r\n                .attr('class', 'vine-embed');\r\n        }\r\n        else if (vimMatch && vimMatch[3].length) {\r\n            $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>')\r\n                .attr('frameborder', 0)\r\n                .attr('src', '//player.vimeo.com/video/' + vimMatch[3])\r\n                .attr('width', '640').attr('height', '360');\r\n        }\r\n        else if (dmMatch && dmMatch[2].length) {\r\n            $video = $$1('<iframe>')\r\n                .attr('frameborder', 0)\r\n                .attr('src', '//www.dailymotion.com/embed/video/' + dmMatch[2])\r\n                .attr('width', '640').attr('height', '360');\r\n        }\r\n        else if (youkuMatch && youkuMatch[1].length) {\r\n            $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>')\r\n                .attr('frameborder', 0)\r\n                .attr('height', '498')\r\n                .attr('width', '510')\r\n                .attr('src', '//player.youku.com/embed/' + youkuMatch[1]);\r\n        }\r\n        else if ((qqMatch && qqMatch[1].length) || (qqMatch2 && qqMatch2[2].length)) {\r\n            var vid = ((qqMatch && qqMatch[1].length) ? qqMatch[1] : qqMatch2[2]);\r\n            $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>')\r\n                .attr('frameborder', 0)\r\n                .attr('height', '310')\r\n                .attr('width', '500')\r\n                .attr('src', 'http://v.qq.com/iframe/player.html?vid=' + vid + '&amp;auto=0');\r\n        }\r\n        else if (mp4Match || oggMatch || webmMatch) {\r\n            $video = $$1('<video controls>')\r\n                .attr('src', url)\r\n                .attr('width', '640').attr('height', '360');\r\n        }\r\n        else {\r\n            // this is not a known video link. Now what, Cat? Now what?\r\n            return false;\r\n        }\r\n        $video.addClass('note-video-clip');\r\n        return $video[0];\r\n    };\r\n    VideoDialog.prototype.show = function () {\r\n        var _this = this;\r\n        var text = this.context.invoke('editor.getSelectedText');\r\n        this.context.invoke('editor.saveRange');\r\n        this.showVideoDialog(text).then(function (url) {\r\n            // [workaround] hide dialog before restore range for IE range focus\r\n            _this.ui.hideDialog(_this.$dialog);\r\n            _this.context.invoke('editor.restoreRange');\r\n            // build node\r\n            var $node = _this.createVideoNode(url);\r\n            if ($node) {\r\n                // insert video node\r\n                _this.context.invoke('editor.insertNode', $node);\r\n            }\r\n        }).fail(function () {\r\n            _this.context.invoke('editor.restoreRange');\r\n        });\r\n    };\r\n    /**\r\n     * show image dialog\r\n     *\r\n     * @param {jQuery} $dialog\r\n     * @return {Promise}\r\n     */\r\n    VideoDialog.prototype.showVideoDialog = function (text) {\r\n        var _this = this;\r\n        return $$1.Deferred(function (deferred) {\r\n            var $videoUrl = _this.$dialog.find('.note-video-url');\r\n            var $videoBtn = _this.$dialog.find('.note-video-btn');\r\n            _this.ui.onDialogShown(_this.$dialog, function () {\r\n                _this.context.triggerEvent('dialog.shown');\r\n                $videoUrl.val(text).on('input', function () {\r\n                    _this.ui.toggleBtn($videoBtn, $videoUrl.val());\r\n                });\r\n                if (!env.isSupportTouch) {\r\n                    $videoUrl.trigger('focus');\r\n                }\r\n                $videoBtn.click(function (event) {\r\n                    event.preventDefault();\r\n                    deferred.resolve($videoUrl.val());\r\n                });\r\n                _this.bindEnterKey($videoUrl, $videoBtn);\r\n            });\r\n            _this.ui.onDialogHidden(_this.$dialog, function () {\r\n                $videoUrl.off('input');\r\n                $videoBtn.off('click');\r\n                if (deferred.state() === 'pending') {\r\n                    deferred.reject();\r\n                }\r\n            });\r\n            _this.ui.showDialog(_this.$dialog);\r\n        });\r\n    };\r\n    return VideoDialog;\r\n}());\r\n\r\nvar HelpDialog = /** @class */ (function () {\r\n    function HelpDialog(context) {\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.$body = $$1(document.body);\r\n        this.$editor = context.layoutInfo.editor;\r\n        this.options = context.options;\r\n        this.lang = this.options.langInfo;\r\n    }\r\n    HelpDialog.prototype.initialize = function () {\r\n        var $container = this.options.dialogsInBody ? this.$body : this.$editor;\r\n        var body = [\r\n            '<p class=\"text-center\">',\r\n            '<a href=\"http://summernote.org/\" target=\"_blank\">Summernote 0.8.9</a> · ',\r\n            '<a href=\"https://github.com/summernote/summernote\" target=\"_blank\">Project</a> · ',\r\n            '<a href=\"https://github.com/summernote/summernote/issues\" target=\"_blank\">Issues</a>',\r\n            '</p>'\r\n        ].join('');\r\n        this.$dialog = this.ui.dialog({\r\n            title: this.lang.options.help,\r\n            fade: this.options.dialogsFade,\r\n            body: this.createShortcutList(),\r\n            footer: body,\r\n            callback: function ($node) {\r\n                $node.find('.modal-body,.note-modal-body').css({\r\n                    'max-height': 300,\r\n                    'overflow': 'scroll'\r\n                });\r\n            }\r\n        }).render().appendTo($container);\r\n    };\r\n    HelpDialog.prototype.destroy = function () {\r\n        this.ui.hideDialog(this.$dialog);\r\n        this.$dialog.remove();\r\n    };\r\n    HelpDialog.prototype.createShortcutList = function () {\r\n        var _this = this;\r\n        var keyMap = this.options.keyMap[env.isMac ? 'mac' : 'pc'];\r\n        return Object.keys(keyMap).map(function (key) {\r\n            var command = keyMap[key];\r\n            var $row = $$1('<div><div class=\"help-list-item\"/></div>');\r\n            $row.append($$1('<label><kbd>' + key + '</kdb></label>').css({\r\n                'width': 180,\r\n                'margin-right': 10\r\n            })).append($$1('<span/>').html(_this.context.memo('help.' + command) || command));\r\n            return $row.html();\r\n        }).join('');\r\n    };\r\n    /**\r\n     * show help dialog\r\n     *\r\n     * @return {Promise}\r\n     */\r\n    HelpDialog.prototype.showHelpDialog = function () {\r\n        var _this = this;\r\n        return $$1.Deferred(function (deferred) {\r\n            _this.ui.onDialogShown(_this.$dialog, function () {\r\n                _this.context.triggerEvent('dialog.shown');\r\n                deferred.resolve();\r\n            });\r\n            _this.ui.showDialog(_this.$dialog);\r\n        }).promise();\r\n    };\r\n    HelpDialog.prototype.show = function () {\r\n        var _this = this;\r\n        this.context.invoke('editor.saveRange');\r\n        this.showHelpDialog().then(function () {\r\n            _this.context.invoke('editor.restoreRange');\r\n        });\r\n    };\r\n    return HelpDialog;\r\n}());\r\n\r\nvar AIR_MODE_POPOVER_X_OFFSET = 20;\r\nvar AirPopover = /** @class */ (function () {\r\n    function AirPopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.options = context.options;\r\n        this.events = {\r\n            'summernote.keyup summernote.mouseup summernote.scroll': function () {\r\n                _this.update();\r\n            },\r\n            'summernote.disable summernote.change summernote.dialog.shown': function () {\r\n                _this.hide();\r\n            },\r\n            'summernote.focusout': function (we, e) {\r\n                // [workaround] Firefox doesn't support relatedTarget on focusout\r\n                //  - Ignore hide action on focus out in FF.\r\n                if (env.isFF) {\r\n                    return;\r\n                }\r\n                if (!e.relatedTarget || !dom.ancestor(e.relatedTarget, func.eq(_this.$popover[0]))) {\r\n                    _this.hide();\r\n                }\r\n            }\r\n        };\r\n    }\r\n    AirPopover.prototype.shouldInitialize = function () {\r\n        return this.options.airMode && !lists.isEmpty(this.options.popover.air);\r\n    };\r\n    AirPopover.prototype.initialize = function () {\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-air-popover'\r\n        }).render().appendTo(this.options.container);\r\n        var $content = this.$popover.find('.popover-content');\r\n        this.context.invoke('buttons.build', $content, this.options.popover.air);\r\n    };\r\n    AirPopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    AirPopover.prototype.update = function () {\r\n        var styleInfo = this.context.invoke('editor.currentStyle');\r\n        if (styleInfo.range && !styleInfo.range.isCollapsed()) {\r\n            var rect = lists.last(styleInfo.range.getClientRects());\r\n            if (rect) {\r\n                var bnd = func.rect2bnd(rect);\r\n                this.$popover.css({\r\n                    display: 'block',\r\n                    left: Math.max(bnd.left + bnd.width / 2, 0) - AIR_MODE_POPOVER_X_OFFSET,\r\n                    top: bnd.top + bnd.height\r\n                });\r\n                this.context.invoke('buttons.updateCurrentStyle', this.$popover);\r\n            }\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    AirPopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return AirPopover;\r\n}());\r\n\r\nvar POPOVER_DIST = 5;\r\nvar HintPopover = /** @class */ (function () {\r\n    function HintPopover(context) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.ui = $$1.summernote.ui;\r\n        this.$editable = context.layoutInfo.editable;\r\n        this.options = context.options;\r\n        this.hint = this.options.hint || [];\r\n        this.direction = this.options.hintDirection || 'bottom';\r\n        this.hints = $$1.isArray(this.hint) ? this.hint : [this.hint];\r\n        this.events = {\r\n            'summernote.keyup': function (we, e) {\r\n                if (!e.isDefaultPrevented()) {\r\n                    _this.handleKeyup(e);\r\n                }\r\n            },\r\n            'summernote.keydown': function (we, e) {\r\n                _this.handleKeydown(e);\r\n            },\r\n            'summernote.disable summernote.dialog.shown': function () {\r\n                _this.hide();\r\n            }\r\n        };\r\n    }\r\n    HintPopover.prototype.shouldInitialize = function () {\r\n        return this.hints.length > 0;\r\n    };\r\n    HintPopover.prototype.initialize = function () {\r\n        var _this = this;\r\n        this.lastWordRange = null;\r\n        this.$popover = this.ui.popover({\r\n            className: 'note-hint-popover',\r\n            hideArrow: true,\r\n            direction: ''\r\n        }).render().appendTo(this.options.container);\r\n        this.$popover.hide();\r\n        this.$content = this.$popover.find('.popover-content,.note-popover-content');\r\n        this.$content.on('click', '.note-hint-item', function () {\r\n            _this.$content.find('.active').removeClass('active');\r\n            $$1(_this).addClass('active');\r\n            _this.replace();\r\n        });\r\n    };\r\n    HintPopover.prototype.destroy = function () {\r\n        this.$popover.remove();\r\n    };\r\n    HintPopover.prototype.selectItem = function ($item) {\r\n        this.$content.find('.active').removeClass('active');\r\n        $item.addClass('active');\r\n        this.$content[0].scrollTop = $item[0].offsetTop - (this.$content.innerHeight() / 2);\r\n    };\r\n    HintPopover.prototype.moveDown = function () {\r\n        var $current = this.$content.find('.note-hint-item.active');\r\n        var $next = $current.next();\r\n        if ($next.length) {\r\n            this.selectItem($next);\r\n        }\r\n        else {\r\n            var $nextGroup = $current.parent().next();\r\n            if (!$nextGroup.length) {\r\n                $nextGroup = this.$content.find('.note-hint-group').first();\r\n            }\r\n            this.selectItem($nextGroup.find('.note-hint-item').first());\r\n        }\r\n    };\r\n    HintPopover.prototype.moveUp = function () {\r\n        var $current = this.$content.find('.note-hint-item.active');\r\n        var $prev = $current.prev();\r\n        if ($prev.length) {\r\n            this.selectItem($prev);\r\n        }\r\n        else {\r\n            var $prevGroup = $current.parent().prev();\r\n            if (!$prevGroup.length) {\r\n                $prevGroup = this.$content.find('.note-hint-group').last();\r\n            }\r\n            this.selectItem($prevGroup.find('.note-hint-item').last());\r\n        }\r\n    };\r\n    HintPopover.prototype.replace = function () {\r\n        var $item = this.$content.find('.note-hint-item.active');\r\n        if ($item.length) {\r\n            var node = this.nodeFromItem($item);\r\n            // XXX: consider to move codes to editor for recording redo/undo.\r\n            this.lastWordRange.insertNode(node);\r\n            range.createFromNode(node).collapse().select();\r\n            this.lastWordRange = null;\r\n            this.hide();\r\n            this.context.triggerEvent('change', this.$editable.html(), this.$editable[0]);\r\n            this.context.invoke('editor.focus');\r\n        }\r\n    };\r\n    HintPopover.prototype.nodeFromItem = function ($item) {\r\n        var hint = this.hints[$item.data('index')];\r\n        var item = $item.data('item');\r\n        var node = hint.content ? hint.content(item) : item;\r\n        if (typeof node === 'string') {\r\n            node = dom.createText(node);\r\n        }\r\n        return node;\r\n    };\r\n    HintPopover.prototype.createItemTemplates = function (hintIdx, items) {\r\n        var hint = this.hints[hintIdx];\r\n        return items.map(function (item, idx) {\r\n            var $item = $$1('<div class=\"note-hint-item\"/>');\r\n            $item.append(hint.template ? hint.template(item) : item + '');\r\n            $item.data({\r\n                'index': hintIdx,\r\n                'item': item\r\n            });\r\n            return $item;\r\n        });\r\n    };\r\n    HintPopover.prototype.handleKeydown = function (e) {\r\n        if (!this.$popover.is(':visible')) {\r\n            return;\r\n        }\r\n        if (e.keyCode === key.code.ENTER) {\r\n            e.preventDefault();\r\n            this.replace();\r\n        }\r\n        else if (e.keyCode === key.code.UP) {\r\n            e.preventDefault();\r\n            this.moveUp();\r\n        }\r\n        else if (e.keyCode === key.code.DOWN) {\r\n            e.preventDefault();\r\n            this.moveDown();\r\n        }\r\n    };\r\n    HintPopover.prototype.searchKeyword = function (index, keyword, callback) {\r\n        var hint = this.hints[index];\r\n        if (hint && hint.match.test(keyword) && hint.search) {\r\n            var matches = hint.match.exec(keyword);\r\n            hint.search(matches[1], callback);\r\n        }\r\n        else {\r\n            callback();\r\n        }\r\n    };\r\n    HintPopover.prototype.createGroup = function (idx, keyword) {\r\n        var _this = this;\r\n        var $group = $$1('<div class=\"note-hint-group note-hint-group-' + idx + '\"/>');\r\n        this.searchKeyword(idx, keyword, function (items) {\r\n            items = items || [];\r\n            if (items.length) {\r\n                $group.html(_this.createItemTemplates(idx, items));\r\n                _this.show();\r\n            }\r\n        });\r\n        return $group;\r\n    };\r\n    HintPopover.prototype.handleKeyup = function (e) {\r\n        var _this = this;\r\n        if (!lists.contains([key.code.ENTER, key.code.UP, key.code.DOWN], e.keyCode)) {\r\n            var wordRange = this.context.invoke('editor.createRange').getWordRange();\r\n            var keyword_1 = wordRange.toString();\r\n            if (this.hints.length && keyword_1) {\r\n                this.$content.empty();\r\n                var bnd = func.rect2bnd(lists.last(wordRange.getClientRects()));\r\n                if (bnd) {\r\n                    this.$popover.hide();\r\n                    this.lastWordRange = wordRange;\r\n                    this.hints.forEach(function (hint, idx) {\r\n                        if (hint.match.test(keyword_1)) {\r\n                            _this.createGroup(idx, keyword_1).appendTo(_this.$content);\r\n                        }\r\n                    });\r\n                    // select first .note-hint-item\r\n                    this.$content.find('.note-hint-item:first').addClass('active');\r\n                    // set position for popover after group is created\r\n                    if (this.direction === 'top') {\r\n                        this.$popover.css({\r\n                            left: bnd.left,\r\n                            top: bnd.top - this.$popover.outerHeight() - POPOVER_DIST\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.$popover.css({\r\n                            left: bnd.left,\r\n                            top: bnd.top + bnd.height + POPOVER_DIST\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.hide();\r\n            }\r\n        }\r\n    };\r\n    HintPopover.prototype.show = function () {\r\n        this.$popover.show();\r\n    };\r\n    HintPopover.prototype.hide = function () {\r\n        this.$popover.hide();\r\n    };\r\n    return HintPopover;\r\n}());\r\n\r\nvar Context = /** @class */ (function () {\r\n    /**\r\n     * @param {jQuery} $note\r\n     * @param {Object} options\r\n     */\r\n    function Context($note, options) {\r\n        this.ui = $$1.summernote.ui;\r\n        this.$note = $note;\r\n        this.memos = {};\r\n        this.modules = {};\r\n        this.layoutInfo = {};\r\n        this.options = options;\r\n        this.initialize();\r\n    }\r\n    /**\r\n     * create layout and initialize modules and other resources\r\n     */\r\n    Context.prototype.initialize = function () {\r\n        this.layoutInfo = this.ui.createLayout(this.$note, this.options);\r\n        this._initialize();\r\n        this.$note.hide();\r\n        return this;\r\n    };\r\n    /**\r\n     * destroy modules and other resources and remove layout\r\n     */\r\n    Context.prototype.destroy = function () {\r\n        this._destroy();\r\n        this.$note.removeData('summernote');\r\n        this.ui.removeLayout(this.$note, this.layoutInfo);\r\n    };\r\n    /**\r\n     * destory modules and other resources and initialize it again\r\n     */\r\n    Context.prototype.reset = function () {\r\n        var disabled = this.isDisabled();\r\n        this.code(dom.emptyPara);\r\n        this._destroy();\r\n        this._initialize();\r\n        if (disabled) {\r\n            this.disable();\r\n        }\r\n    };\r\n    Context.prototype._initialize = function () {\r\n        var _this = this;\r\n        // add optional buttons\r\n        var buttons = $$1.extend({}, this.options.buttons);\r\n        Object.keys(buttons).forEach(function (key) {\r\n            _this.memo('button.' + key, buttons[key]);\r\n        });\r\n        var modules = $$1.extend({}, this.options.modules, $$1.summernote.plugins || {});\r\n        // add and initialize modules\r\n        Object.keys(modules).forEach(function (key) {\r\n            _this.module(key, modules[key], true);\r\n        });\r\n        Object.keys(this.modules).forEach(function (key) {\r\n            _this.initializeModule(key);\r\n        });\r\n    };\r\n    Context.prototype._destroy = function () {\r\n        var _this = this;\r\n        // destroy modules with reversed order\r\n        Object.keys(this.modules).reverse().forEach(function (key) {\r\n            _this.removeModule(key);\r\n        });\r\n        Object.keys(this.memos).forEach(function (key) {\r\n            _this.removeMemo(key);\r\n        });\r\n        // trigger custom onDestroy callback\r\n        this.triggerEvent('destroy', this);\r\n    };\r\n    Context.prototype.code = function (html) {\r\n        var isActivated = this.invoke('codeview.isActivated');\r\n        if (html === undefined) {\r\n            this.invoke('codeview.sync');\r\n            return isActivated ? this.layoutInfo.codable.val() : this.layoutInfo.editable.html();\r\n        }\r\n        else {\r\n            if (isActivated) {\r\n                this.layoutInfo.codable.val(html);\r\n            }\r\n            else {\r\n                this.layoutInfo.editable.html(html);\r\n            }\r\n            this.$note.val(html);\r\n            this.triggerEvent('change', html);\r\n        }\r\n    };\r\n    Context.prototype.isDisabled = function () {\r\n        return this.layoutInfo.editable.attr('contenteditable') === 'false';\r\n    };\r\n    Context.prototype.enable = function () {\r\n        this.layoutInfo.editable.attr('contenteditable', true);\r\n        this.invoke('toolbar.activate', true);\r\n        this.triggerEvent('disable', false);\r\n    };\r\n    Context.prototype.disable = function () {\r\n        // close codeview if codeview is opend\r\n        if (this.invoke('codeview.isActivated')) {\r\n            this.invoke('codeview.deactivate');\r\n        }\r\n        this.layoutInfo.editable.attr('contenteditable', false);\r\n        this.invoke('toolbar.deactivate', true);\r\n        this.triggerEvent('disable', true);\r\n    };\r\n    Context.prototype.triggerEvent = function () {\r\n        var namespace = lists.head(arguments);\r\n        var args = lists.tail(lists.from(arguments));\r\n        var callback = this.options.callbacks[func.namespaceToCamel(namespace, 'on')];\r\n        if (callback) {\r\n            callback.apply(this.$note[0], args);\r\n        }\r\n        this.$note.trigger('summernote.' + namespace, args);\r\n    };\r\n    Context.prototype.initializeModule = function (key) {\r\n        var module = this.modules[key];\r\n        module.shouldInitialize = module.shouldInitialize || func.ok;\r\n        if (!module.shouldInitialize()) {\r\n            return;\r\n        }\r\n        // initialize module\r\n        if (module.initialize) {\r\n            module.initialize();\r\n        }\r\n        // attach events\r\n        if (module.events) {\r\n            dom.attachEvents(this.$note, module.events);\r\n        }\r\n    };\r\n    Context.prototype.module = function (key, ModuleClass, withoutIntialize) {\r\n        if (arguments.length === 1) {\r\n            return this.modules[key];\r\n        }\r\n        this.modules[key] = new ModuleClass(this);\r\n        if (!withoutIntialize) {\r\n            this.initializeModule(key);\r\n        }\r\n    };\r\n    Context.prototype.removeModule = function (key) {\r\n        var module = this.modules[key];\r\n        if (module.shouldInitialize()) {\r\n            if (module.events) {\r\n                dom.detachEvents(this.$note, module.events);\r\n            }\r\n            if (module.destroy) {\r\n                module.destroy();\r\n            }\r\n        }\r\n        delete this.modules[key];\r\n    };\r\n    Context.prototype.memo = function (key, obj) {\r\n        if (arguments.length === 1) {\r\n            return this.memos[key];\r\n        }\r\n        this.memos[key] = obj;\r\n    };\r\n    Context.prototype.removeMemo = function (key) {\r\n        if (this.memos[key] && this.memos[key].destroy) {\r\n            this.memos[key].destroy();\r\n        }\r\n        delete this.memos[key];\r\n    };\r\n    /**\r\n     * Some buttons need to change their visual style immediately once they get pressed\r\n     */\r\n    Context.prototype.createInvokeHandlerAndUpdateState = function (namespace, value) {\r\n        var _this = this;\r\n        return function (event) {\r\n            _this.createInvokeHandler(namespace, value)(event);\r\n            _this.invoke('buttons.updateCurrentStyle');\r\n        };\r\n    };\r\n    Context.prototype.createInvokeHandler = function (namespace, value) {\r\n        var _this = this;\r\n        return function (event) {\r\n            event.preventDefault();\r\n            var $target = $$1(event.target);\r\n            _this.invoke(namespace, value || $target.closest('[data-value]').data('value'), $target);\r\n        };\r\n    };\r\n    Context.prototype.invoke = function () {\r\n        var namespace = lists.head(arguments);\r\n        var args = lists.tail(lists.from(arguments));\r\n        var splits = namespace.split('.');\r\n        var hasSeparator = splits.length > 1;\r\n        var moduleName = hasSeparator && lists.head(splits);\r\n        var methodName = hasSeparator ? lists.last(splits) : lists.head(splits);\r\n        var module = this.modules[moduleName || 'editor'];\r\n        if (!moduleName && this[methodName]) {\r\n            return this[methodName].apply(this, args);\r\n        }\r\n        else if (module && module[methodName] && module.shouldInitialize()) {\r\n            return module[methodName].apply(module, args);\r\n        }\r\n    };\r\n    return Context;\r\n}());\r\n\r\n$$1.fn.extend({\r\n    /**\r\n     * Summernote API\r\n     *\r\n     * @param {Object|String}\r\n     * @return {this}\r\n     */\r\n    summernote: function () {\r\n        var type = $$1.type(lists.head(arguments));\r\n        var isExternalAPICalled = type === 'string';\r\n        var hasInitOptions = type === 'object';\r\n        var options = $$1.extend({}, $$1.summernote.options, hasInitOptions ? lists.head(arguments) : {});\r\n        // Update options\r\n        options.langInfo = $$1.extend(true, {}, $$1.summernote.lang['en-US'], $$1.summernote.lang[options.lang]);\r\n        options.icons = $$1.extend(true, {}, $$1.summernote.options.icons, options.icons);\r\n        options.tooltip = options.tooltip === 'auto' ? !env.isSupportTouch : options.tooltip;\r\n        this.each(function (idx, note) {\r\n            var $note = $$1(note);\r\n            if (!$note.data('summernote')) {\r\n                var context = new Context($note, options);\r\n                $note.data('summernote', context);\r\n                $note.data('summernote').triggerEvent('init', context.layoutInfo);\r\n            }\r\n        });\r\n        var $note = this.first();\r\n        if ($note.length) {\r\n            var context = $note.data('summernote');\r\n            if (isExternalAPICalled) {\r\n                return context.invoke.apply(context, lists.from(arguments));\r\n            }\r\n            else if (options.focus) {\r\n                context.invoke('editor.focus');\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n});\r\n\r\n$$1.summernote = $$1.extend($$1.summernote, {\r\n    version: '0.8.9',\r\n    ui: ui,\r\n    plugins: {},\r\n    options: {\r\n        modules: {\r\n            'editor': Editor,\r\n            'clipboard': Clipboard,\r\n            'dropzone': Dropzone,\r\n            'codeview': CodeView,\r\n            'statusbar': Statusbar,\r\n            'fullscreen': Fullscreen,\r\n            'handle': Handle,\r\n            // FIXME: HintPopover must be front of autolink\r\n            //  - Script error about range when Enter key is pressed on hint popover\r\n            'hintPopover': HintPopover,\r\n            'autoLink': AutoLink,\r\n            'autoSync': AutoSync,\r\n            'placeholder': Placeholder,\r\n            'buttons': Buttons,\r\n            'toolbar': Toolbar,\r\n            'linkDialog': LinkDialog,\r\n            'linkPopover': LinkPopover,\r\n            'imageDialog': ImageDialog,\r\n            'imagePopover': ImagePopover,\r\n            'tablePopover': TablePopover,\r\n            'videoDialog': VideoDialog,\r\n            'helpDialog': HelpDialog,\r\n            'airPopover': AirPopover\r\n        },\r\n        buttons: {},\r\n        lang: 'en-US',\r\n        followingToolbar: true,\r\n        otherStaticBar: '',\r\n        // toolbar\r\n        toolbar: [\r\n            ['style', ['style']],\r\n            ['font', ['bold', 'underline', 'clear']],\r\n            ['fontname', ['fontname']],\r\n            ['fontsize', ['fontsize']],\r\n            ['color', ['color']],\r\n            ['para', ['ul', 'ol', 'paragraph']],\r\n            ['table', ['table']],\r\n            ['insert', ['link', 'picture', 'video']],\r\n            ['view', ['fullscreen', 'codeview', 'help']]\r\n        ],\r\n        // popover\r\n        popatmouse: true,\r\n        popover: {\r\n            image: [\r\n                ['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']],\r\n                ['float', ['floatLeft', 'floatRight', 'floatNone']],\r\n                ['remove', ['removeMedia']]\r\n            ],\r\n            link: [\r\n                ['link', ['linkDialogShow', 'unlink']]\r\n            ],\r\n            table: [\r\n                ['add', ['addRowDown', 'addRowUp', 'addColLeft', 'addColRight']],\r\n                ['delete', ['deleteRow', 'deleteCol', 'deleteTable']]\r\n            ],\r\n            air: [\r\n                ['color', ['color']],\r\n                ['font', ['bold', 'underline', 'clear']],\r\n                ['para', ['ul', 'paragraph']],\r\n                ['table', ['table']],\r\n                ['insert', ['link', 'picture']]\r\n            ]\r\n        },\r\n        // air mode: inline editor\r\n        airMode: false,\r\n        width: null,\r\n        height: null,\r\n        focus: false,\r\n        tabSize: 4,\r\n        styleWithSpan: true,\r\n        shortcuts: true,\r\n        textareaAutoSync: true,\r\n        hintDirection: 'bottom',\r\n        tooltip: 'auto',\r\n        container: 'body',\r\n        maxTextLength: 0,\r\n        styleTags: ['p', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\r\n        fontNames: [\r\n            'Arial', 'Arial Black', 'Comic Sans MS', 'Courier New',\r\n            'Helvetica Neue', 'Helvetica', 'Impact', 'Lucida Grande',\r\n            'Tahoma', 'Times New Roman', 'Verdana'\r\n        ],\r\n        fontSizes: ['8', '9', '10', '11', '12', '14', '18', '24', '36'],\r\n        // pallete colors(n x n)\r\n        colors: [\r\n            ['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F7F7', '#FFFFFF'],\r\n            ['#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF'],\r\n            ['#F7C6CE', '#FFE7CE', '#FFEFC6', '#D6EFD6', '#CEDEE7', '#CEE7F7', '#D6D6E7', '#E7D6DE'],\r\n            ['#E79C9C', '#FFC69C', '#FFE79C', '#B5D6A5', '#A5C6CE', '#9CC6EF', '#B5A5D6', '#D6A5BD'],\r\n            ['#E76363', '#F7AD6B', '#FFD663', '#94BD7B', '#73A5AD', '#6BADDE', '#8C7BC6', '#C67BA5'],\r\n            ['#CE0000', '#E79439', '#EFC631', '#6BA54A', '#4A7B8C', '#3984C6', '#634AA5', '#A54A7B'],\r\n            ['#9C0000', '#B56308', '#BD9400', '#397B21', '#104A5A', '#085294', '#311873', '#731842'],\r\n            ['#630000', '#7B3900', '#846300', '#295218', '#083139', '#003163', '#21104A', '#4A1031']\r\n        ],\r\n        lineHeights: ['1.0', '1.2', '1.4', '1.5', '1.6', '1.8', '2.0', '3.0'],\r\n        tableClassName: 'table table-bordered',\r\n        insertTableMaxSize: {\r\n            col: 10,\r\n            row: 10\r\n        },\r\n        dialogsInBody: false,\r\n        dialogsFade: false,\r\n        maximumImageFileSize: null,\r\n        callbacks: {\r\n            onInit: null,\r\n            onFocus: null,\r\n            onBlur: null,\r\n            onBlurCodeview: null,\r\n            onEnter: null,\r\n            onKeyup: null,\r\n            onKeydown: null,\r\n            onSubmit: null,\r\n            onImageUpload: null,\r\n            onImageUploadError: null\r\n        },\r\n        codemirror: {\r\n            mode: 'text/html',\r\n            htmlMode: true,\r\n            lineNumbers: true\r\n        },\r\n        keyMap: {\r\n            pc: {\r\n                'ENTER': 'insertParagraph',\r\n                'CTRL+Z': 'undo',\r\n                'CTRL+Y': 'redo',\r\n                'TAB': 'tab',\r\n                'SHIFT+TAB': 'untab',\r\n                'CTRL+B': 'bold',\r\n                'CTRL+I': 'italic',\r\n                'CTRL+U': 'underline',\r\n                'CTRL+SHIFT+S': 'strikethrough',\r\n                'CTRL+BACKSLASH': 'removeFormat',\r\n                'CTRL+SHIFT+L': 'justifyLeft',\r\n                'CTRL+SHIFT+E': 'justifyCenter',\r\n                'CTRL+SHIFT+R': 'justifyRight',\r\n                'CTRL+SHIFT+J': 'justifyFull',\r\n                'CTRL+SHIFT+NUM7': 'insertUnorderedList',\r\n                'CTRL+SHIFT+NUM8': 'insertOrderedList',\r\n                'CTRL+LEFTBRACKET': 'outdent',\r\n                'CTRL+RIGHTBRACKET': 'indent',\r\n                'CTRL+NUM0': 'formatPara',\r\n                'CTRL+NUM1': 'formatH1',\r\n                'CTRL+NUM2': 'formatH2',\r\n                'CTRL+NUM3': 'formatH3',\r\n                'CTRL+NUM4': 'formatH4',\r\n                'CTRL+NUM5': 'formatH5',\r\n                'CTRL+NUM6': 'formatH6',\r\n                'CTRL+ENTER': 'insertHorizontalRule',\r\n                'CTRL+K': 'linkDialog.show'\r\n            },\r\n            mac: {\r\n                'ENTER': 'insertParagraph',\r\n                'CMD+Z': 'undo',\r\n                'CMD+SHIFT+Z': 'redo',\r\n                'TAB': 'tab',\r\n                'SHIFT+TAB': 'untab',\r\n                'CMD+B': 'bold',\r\n                'CMD+I': 'italic',\r\n                'CMD+U': 'underline',\r\n                'CMD+SHIFT+S': 'strikethrough',\r\n                'CMD+BACKSLASH': 'removeFormat',\r\n                'CMD+SHIFT+L': 'justifyLeft',\r\n                'CMD+SHIFT+E': 'justifyCenter',\r\n                'CMD+SHIFT+R': 'justifyRight',\r\n                'CMD+SHIFT+J': 'justifyFull',\r\n                'CMD+SHIFT+NUM7': 'insertUnorderedList',\r\n                'CMD+SHIFT+NUM8': 'insertOrderedList',\r\n                'CMD+LEFTBRACKET': 'outdent',\r\n                'CMD+RIGHTBRACKET': 'indent',\r\n                'CMD+NUM0': 'formatPara',\r\n                'CMD+NUM1': 'formatH1',\r\n                'CMD+NUM2': 'formatH2',\r\n                'CMD+NUM3': 'formatH3',\r\n                'CMD+NUM4': 'formatH4',\r\n                'CMD+NUM5': 'formatH5',\r\n                'CMD+NUM6': 'formatH6',\r\n                'CMD+ENTER': 'insertHorizontalRule',\r\n                'CMD+K': 'linkDialog.show'\r\n            }\r\n        },\r\n        icons: {\r\n            'align': 'note-icon-align',\r\n            'alignCenter': 'note-icon-align-center',\r\n            'alignJustify': 'note-icon-align-justify',\r\n            'alignLeft': 'note-icon-align-left',\r\n            'alignRight': 'note-icon-align-right',\r\n            'rowBelow': 'note-icon-row-below',\r\n            'colBefore': 'note-icon-col-before',\r\n            'colAfter': 'note-icon-col-after',\r\n            'rowAbove': 'note-icon-row-above',\r\n            'rowRemove': 'note-icon-row-remove',\r\n            'colRemove': 'note-icon-col-remove',\r\n            'indent': 'note-icon-align-indent',\r\n            'outdent': 'note-icon-align-outdent',\r\n            'arrowsAlt': 'note-icon-arrows-alt',\r\n            'bold': 'note-icon-bold',\r\n            'caret': 'note-icon-caret',\r\n            'circle': 'note-icon-circle',\r\n            'close': 'note-icon-close',\r\n            'code': 'note-icon-code',\r\n            'eraser': 'note-icon-eraser',\r\n            'font': 'note-icon-font',\r\n            'frame': 'note-icon-frame',\r\n            'italic': 'note-icon-italic',\r\n            'link': 'note-icon-link',\r\n            'unlink': 'note-icon-chain-broken',\r\n            'magic': 'note-icon-magic',\r\n            'menuCheck': 'note-icon-menu-check',\r\n            'minus': 'note-icon-minus',\r\n            'orderedlist': 'note-icon-orderedlist',\r\n            'pencil': 'note-icon-pencil',\r\n            'picture': 'note-icon-picture',\r\n            'question': 'note-icon-question',\r\n            'redo': 'note-icon-redo',\r\n            'square': 'note-icon-square',\r\n            'strikethrough': 'note-icon-strikethrough',\r\n            'subscript': 'note-icon-subscript',\r\n            'superscript': 'note-icon-superscript',\r\n            'table': 'note-icon-table',\r\n            'textHeight': 'note-icon-text-height',\r\n            'trash': 'note-icon-trash',\r\n            'underline': 'note-icon-underline',\r\n            'undo': 'note-icon-undo',\r\n            'unorderedlist': 'note-icon-unorderedlist',\r\n            'video': 'note-icon-video'\r\n        }\r\n    }\r\n});\r\n\r\n})));\r\n//# sourceMappingURL=summernote-lite.js.map\r\n","/*\r\n * bootstrap-tagsinput v0.8.0\r\n * \r\n */\r\n\r\n(function ($) {\r\n  \"use strict\";\r\n\r\n  var defaultOptions = {\r\n    tagClass: function(item) {\r\n      return 'badge badge-info';\r\n    },\r\n    focusClass: 'focus',\r\n    itemValue: function(item) {\r\n      return item ? item.toString() : item;\r\n    },\r\n    itemText: function(item) {\r\n      return this.itemValue(item);\r\n    },\r\n    itemTitle: function(item) {\r\n      return null;\r\n    },\r\n    freeInput: true,\r\n    addOnBlur: true,\r\n    maxTags: undefined,\r\n    maxChars: undefined,\r\n    confirmKeys: [13, 44],\r\n    delimiter: ',',\r\n    delimiterRegex: null,\r\n    cancelConfirmKeysOnEmpty: false,\r\n    onTagExists: function(item, $tag) {\r\n      $tag.hide().fadeIn();\r\n    },\r\n    trimValue: false,\r\n    allowDuplicates: false,\r\n    triggerChange: true\r\n  };\r\n\r\n  /**\r\n   * Constructor function\r\n   */\r\n  function TagsInput(element, options) {\r\n    this.isInit = true;\r\n    this.itemsArray = [];\r\n\r\n    this.$element = $(element);\r\n    this.$element.hide();\r\n\r\n    this.isSelect = (element.tagName === 'SELECT');\r\n    this.multiple = (this.isSelect && element.hasAttribute('multiple'));\r\n    this.objectItems = options && options.itemValue;\r\n    this.placeholderText = element.hasAttribute('placeholder') ? this.$element.attr('placeholder') : '';\r\n    this.inputSize = Math.max(1, this.placeholderText.length);\r\n\r\n    this.$container = $('<div class=\"bootstrap-tagsinput\"></div>');\r\n    this.$input = $('<input type=\"text\" placeholder=\"' + this.placeholderText + '\"/>').appendTo(this.$container);\r\n\r\n    this.$element.before(this.$container);\r\n\r\n    this.build(options);\r\n    this.isInit = false;\r\n  }\r\n\r\n  TagsInput.prototype = {\r\n    constructor: TagsInput,\r\n\r\n    /**\r\n     * Adds the given item as a new tag. Pass true to dontPushVal to prevent\r\n     * updating the elements val()\r\n     */\r\n    add: function(item, dontPushVal, options) {\r\n      var self = this;\r\n\r\n      if (self.options.maxTags && self.itemsArray.length >= self.options.maxTags)\r\n        return;\r\n\r\n      // Ignore falsey values, except false\r\n      if (item !== false && !item)\r\n        return;\r\n\r\n      // Trim value\r\n      if (typeof item === \"string\" && self.options.trimValue) {\r\n        item = $.trim(item);\r\n      }\r\n\r\n      // Throw an error when trying to add an object while the itemValue option was not set\r\n      if (typeof item === \"object\" && !self.objectItems)\r\n        throw(\"Can't add objects when itemValue option is not set\");\r\n\r\n      // Ignore strings only containg whitespace\r\n      if (item.toString().match(/^\\s*$/))\r\n        return;\r\n\r\n      // If SELECT but not multiple, remove current tag\r\n      if (self.isSelect && !self.multiple && self.itemsArray.length > 0)\r\n        self.remove(self.itemsArray[0]);\r\n\r\n      if (typeof item === \"string\" && this.$element[0].tagName === 'INPUT') {\r\n        var delimiter = (self.options.delimiterRegex) ? self.options.delimiterRegex : self.options.delimiter;\r\n        var items = item.split(delimiter);\r\n        if (items.length > 1) {\r\n          for (var i = 0; i < items.length; i++) {\r\n            this.add(items[i], true);\r\n          }\r\n\r\n          if (!dontPushVal)\r\n            self.pushVal(self.options.triggerChange);\r\n          return;\r\n        }\r\n      }\r\n\r\n      var itemValue = self.options.itemValue(item),\r\n          itemText = self.options.itemText(item),\r\n          tagClass = self.options.tagClass(item),\r\n          itemTitle = self.options.itemTitle(item);\r\n\r\n      // Ignore items allready added\r\n      var existing = $.grep(self.itemsArray, function(item) { return self.options.itemValue(item) === itemValue; } )[0];\r\n      if (existing && !self.options.allowDuplicates) {\r\n        // Invoke onTagExists\r\n        if (self.options.onTagExists) {\r\n          var $existingTag = $(\".badge\", self.$container).filter(function() { return $(this).data(\"item\") === existing; });\r\n          self.options.onTagExists(item, $existingTag);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // if length greater than limit\r\n      if (self.items().toString().length + item.length + 1 > self.options.maxInputLength)\r\n        return;\r\n\r\n      // raise beforeItemAdd arg\r\n      var beforeItemAddEvent = $.Event('beforeItemAdd', { item: item, cancel: false, options: options});\r\n      self.$element.trigger(beforeItemAddEvent);\r\n      if (beforeItemAddEvent.cancel)\r\n        return;\r\n\r\n      // register item in internal array and map\r\n      self.itemsArray.push(item);\r\n\r\n      // add a tag element\r\n\r\n      var $tag = $('<span class=\"badge ' + htmlEncode(tagClass) + (itemTitle !== null ? ('\" title=\"' + itemTitle) : '') + '\">' + htmlEncode(itemText) + '<span data-role=\"remove\"></span></span>');\r\n      $tag.data('item', item);\r\n      self.findInputWrapper().before($tag);\r\n      $tag.after(' ');\r\n\r\n      // Check to see if the tag exists in its raw or uri-encoded form\r\n      var optionExists = (\r\n        $('option[value=\"' + encodeURIComponent(itemValue) + '\"]', self.$element).length ||\r\n        $('option[value=\"' + htmlEncode(itemValue) + '\"]', self.$element).length\r\n      );\r\n\r\n      // add <option /> if item represents a value not present in one of the <select />'s options\r\n      if (self.isSelect && !optionExists) {\r\n        var $option = $('<option selected>' + htmlEncode(itemText) + '</option>');\r\n        $option.data('item', item);\r\n        $option.attr('value', itemValue);\r\n        self.$element.append($option);\r\n      }\r\n\r\n      if (!dontPushVal)\r\n        self.pushVal(self.options.triggerChange);\r\n\r\n      // Add class when reached maxTags\r\n      if (self.options.maxTags === self.itemsArray.length || self.items().toString().length === self.options.maxInputLength)\r\n        self.$container.addClass('bootstrap-tagsinput-max');\r\n\r\n      // If using typeahead, once the tag has been added, clear the typeahead value so it does not stick around in the input.\r\n      if ($('.typeahead, .twitter-typeahead', self.$container).length) {\r\n        self.$input.typeahead('val', '');\r\n      }\r\n\r\n      if (this.isInit) {\r\n        self.$element.trigger($.Event('itemAddedOnInit', { item: item, options: options }));\r\n      } else {\r\n        self.$element.trigger($.Event('itemAdded', { item: item, options: options }));\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Removes the given item. Pass true to dontPushVal to prevent updating the\r\n     * elements val()\r\n     */\r\n    remove: function(item, dontPushVal, options) {\r\n      var self = this;\r\n\r\n      if (self.objectItems) {\r\n        if (typeof item === \"object\")\r\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  self.options.itemValue(item); } );\r\n        else\r\n          item = $.grep(self.itemsArray, function(other) { return self.options.itemValue(other) ==  item; } );\r\n\r\n        item = item[item.length-1];\r\n      }\r\n\r\n      if (item) {\r\n        var beforeItemRemoveEvent = $.Event('beforeItemRemove', { item: item, cancel: false, options: options });\r\n        self.$element.trigger(beforeItemRemoveEvent);\r\n        if (beforeItemRemoveEvent.cancel)\r\n          return;\r\n\r\n        $('.badge', self.$container).filter(function() { return $(this).data('item') === item; }).remove();\r\n        $('option', self.$element).filter(function() { return $(this).data('item') === item; }).remove();\r\n        if($.inArray(item, self.itemsArray) !== -1)\r\n          self.itemsArray.splice($.inArray(item, self.itemsArray), 1);\r\n      }\r\n\r\n      if (!dontPushVal)\r\n        self.pushVal(self.options.triggerChange);\r\n\r\n      // Remove class when reached maxTags\r\n      if (self.options.maxTags > self.itemsArray.length)\r\n        self.$container.removeClass('bootstrap-tagsinput-max');\r\n\r\n      self.$element.trigger($.Event('itemRemoved',  { item: item, options: options }));\r\n    },\r\n\r\n    /**\r\n     * Removes all items\r\n     */\r\n    removeAll: function() {\r\n      var self = this;\r\n\r\n      $('.badge', self.$container).remove();\r\n      $('option', self.$element).remove();\r\n\r\n      while(self.itemsArray.length > 0)\r\n        self.itemsArray.pop();\r\n\r\n      self.pushVal(self.options.triggerChange);\r\n    },\r\n\r\n    /**\r\n     * Refreshes the tags so they match the text/value of their corresponding\r\n     * item.\r\n     */\r\n    refresh: function() {\r\n      var self = this;\r\n      $('.badge', self.$container).each(function() {\r\n        var $tag = $(this),\r\n            item = $tag.data('item'),\r\n            itemValue = self.options.itemValue(item),\r\n            itemText = self.options.itemText(item),\r\n            tagClass = self.options.tagClass(item);\r\n\r\n          // Update tag's class and inner text\r\n          $tag.attr('class', null);\r\n          $tag.addClass('badge ' + htmlEncode(tagClass));\r\n          $tag.contents().filter(function() {\r\n            return this.nodeType == 3;\r\n          })[0].nodeValue = htmlEncode(itemText);\r\n\r\n          if (self.isSelect) {\r\n            var option = $('option', self.$element).filter(function() { return $(this).data('item') === item; });\r\n            option.attr('value', itemValue);\r\n          }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Returns the items added as tags\r\n     */\r\n    items: function() {\r\n      return this.itemsArray;\r\n    },\r\n\r\n    /**\r\n     * Assembly value by retrieving the value of each item, and set it on the\r\n     * element.\r\n     */\r\n    pushVal: function() {\r\n      var self = this,\r\n          val = $.map(self.items(), function(item) {\r\n            return self.options.itemValue(item).toString();\r\n          });\r\n\r\n      self.$element.val(val, true);\r\n\r\n      if (self.options.triggerChange)\r\n        self.$element.trigger('change');\r\n    },\r\n\r\n    /**\r\n     * Initializes the tags input behaviour on the element\r\n     */\r\n    build: function(options) {\r\n      var self = this;\r\n\r\n      self.options = $.extend({}, defaultOptions, options);\r\n      // When itemValue is set, freeInput should always be false\r\n      if (self.objectItems)\r\n        self.options.freeInput = false;\r\n\r\n      makeOptionItemFunction(self.options, 'itemValue');\r\n      makeOptionItemFunction(self.options, 'itemText');\r\n      makeOptionFunction(self.options, 'tagClass');\r\n\r\n      // Typeahead Bootstrap version 2.3.2\r\n      if (self.options.typeahead) {\r\n        var typeahead = self.options.typeahead || {};\r\n\r\n        makeOptionFunction(typeahead, 'source');\r\n\r\n        self.$input.typeahead($.extend({}, typeahead, {\r\n          source: function (query, process) {\r\n            function processItems(items) {\r\n              var texts = [];\r\n\r\n              for (var i = 0; i < items.length; i++) {\r\n                var text = self.options.itemText(items[i]);\r\n                map[text] = items[i];\r\n                texts.push(text);\r\n              }\r\n              process(texts);\r\n            }\r\n\r\n            this.map = {};\r\n            var map = this.map,\r\n                data = typeahead.source(query);\r\n\r\n            if ($.isFunction(data.success)) {\r\n              // support for Angular callbacks\r\n              data.success(processItems);\r\n            } else if ($.isFunction(data.then)) {\r\n              // support for Angular promises\r\n              data.then(processItems);\r\n            } else {\r\n              // support for functions and jquery promises\r\n              $.when(data)\r\n               .then(processItems);\r\n            }\r\n          },\r\n          updater: function (text) {\r\n            self.add(this.map[text]);\r\n            return this.map[text];\r\n          },\r\n          matcher: function (text) {\r\n            return (text.toLowerCase().indexOf(this.query.trim().toLowerCase()) !== -1);\r\n          },\r\n          sorter: function (texts) {\r\n            return texts.sort();\r\n          },\r\n          highlighter: function (text) {\r\n            var regex = new RegExp( '(' + this.query + ')', 'gi' );\r\n            return text.replace( regex, \"<strong>$1</strong>\" );\r\n          }\r\n        }));\r\n      }\r\n\r\n      // typeahead.js\r\n      if (self.options.typeaheadjs) {\r\n        // Determine if main configurations were passed or simply a dataset\r\n        var typeaheadjs = self.options.typeaheadjs;\r\n        if (!$.isArray(typeaheadjs)) {\r\n            typeaheadjs = [null, typeaheadjs];\r\n        }\r\n\r\n        $.fn.typeahead.apply(self.$input, typeaheadjs).on('typeahead:selected', $.proxy(function (obj, datum, name) {\r\n          var index = 0;\r\n          typeaheadjs.some(function(dataset, _index) {\r\n            if (dataset.name === name) {\r\n              index = _index;\r\n              return true;\r\n            }\r\n            return false;\r\n          });\r\n\r\n          // @TODO Dep: https://github.com/corejavascript/typeahead.js/issues/89\r\n          if (typeaheadjs[index].valueKey) {\r\n            self.add(datum[typeaheadjs[index].valueKey]);\r\n          } else {\r\n            self.add(datum);\r\n          }\r\n\r\n          self.$input.typeahead('val', '');\r\n        }, self));\r\n      }\r\n\r\n      self.$container.on('click', $.proxy(function(event) {\r\n        if (! self.$element.attr('disabled')) {\r\n          self.$input.removeAttr('disabled');\r\n        }\r\n        self.$input.focus();\r\n      }, self));\r\n\r\n        if (self.options.addOnBlur && self.options.freeInput) {\r\n          self.$input.on('focusout', $.proxy(function(event) {\r\n              // HACK: only process on focusout when no typeahead opened, to\r\n              //       avoid adding the typeahead text as tag\r\n              if ($('.typeahead, .twitter-typeahead', self.$container).length === 0) {\r\n                self.add(self.$input.val());\r\n                self.$input.val('');\r\n              }\r\n          }, self));\r\n        }\r\n\r\n      // Toggle the 'focus' css class on the container when it has focus\r\n      self.$container.on({\r\n        focusin: function() {\r\n          self.$container.addClass(self.options.focusClass);\r\n        },\r\n        focusout: function() {\r\n          self.$container.removeClass(self.options.focusClass);\r\n        },\r\n      });\r\n\r\n      self.$container.on('keydown', 'input', $.proxy(function(event) {\r\n        var $input = $(event.target),\r\n            $inputWrapper = self.findInputWrapper();\r\n\r\n        if (self.$element.attr('disabled')) {\r\n          self.$input.attr('disabled', 'disabled');\r\n          return;\r\n        }\r\n\r\n        switch (event.which) {\r\n          // BACKSPACE\r\n          case 8:\r\n            if (doGetCaretPosition($input[0]) === 0) {\r\n              var prev = $inputWrapper.prev();\r\n              if (prev.length) {\r\n                self.remove(prev.data('item'));\r\n              }\r\n            }\r\n            break;\r\n\r\n          // DELETE\r\n          case 46:\r\n            if (doGetCaretPosition($input[0]) === 0) {\r\n              var next = $inputWrapper.next();\r\n              if (next.length) {\r\n                self.remove(next.data('item'));\r\n              }\r\n            }\r\n            break;\r\n\r\n          // LEFT ARROW\r\n          case 37:\r\n            // Try to move the input before the previous tag\r\n            var $prevTag = $inputWrapper.prev();\r\n            if ($input.val().length === 0 && $prevTag[0]) {\r\n              $prevTag.before($inputWrapper);\r\n              $input.focus();\r\n            }\r\n            break;\r\n          // RIGHT ARROW\r\n          case 39:\r\n            // Try to move the input after the next tag\r\n            var $nextTag = $inputWrapper.next();\r\n            if ($input.val().length === 0 && $nextTag[0]) {\r\n              $nextTag.after($inputWrapper);\r\n              $input.focus();\r\n            }\r\n            break;\r\n         default:\r\n             // ignore\r\n         }\r\n\r\n        // Reset internal input's size\r\n        var textLength = $input.val().length,\r\n            wordSpace = Math.ceil(textLength / 5),\r\n            size = textLength + wordSpace + 1;\r\n        $input.attr('size', Math.max(this.inputSize, size));\r\n      }, self));\r\n\r\n      self.$container.on('keypress', 'input', $.proxy(function(event) {\r\n         var $input = $(event.target);\r\n\r\n         if (self.$element.attr('disabled')) {\r\n            self.$input.attr('disabled', 'disabled');\r\n            return;\r\n         }\r\n\r\n         var text = $input.val(),\r\n         maxLengthReached = self.options.maxChars && text.length >= self.options.maxChars;\r\n         if (self.options.freeInput && (keyCombinationInList(event, self.options.confirmKeys) || maxLengthReached)) {\r\n            // Only attempt to add a tag if there is data in the field\r\n            if (text.length !== 0) {\r\n               self.add(maxLengthReached ? text.substr(0, self.options.maxChars) : text);\r\n               $input.val('');\r\n            }\r\n\r\n            // If the field is empty, let the event triggered fire as usual\r\n            if (self.options.cancelConfirmKeysOnEmpty === false) {\r\n                event.preventDefault();\r\n            }\r\n         }\r\n\r\n         // Reset internal input's size\r\n         var textLength = $input.val().length,\r\n            wordSpace = Math.ceil(textLength / 5),\r\n            size = textLength + wordSpace + 1;\r\n         $input.attr('size', Math.max(this.inputSize, size));\r\n      }, self));\r\n\r\n      // Remove icon clicked\r\n      self.$container.on('click', '[data-role=remove]', $.proxy(function(event) {\r\n        if (self.$element.attr('disabled')) {\r\n          return;\r\n        }\r\n        self.remove($(event.target).closest('.badge').data('item'));\r\n      }, self));\r\n\r\n      // Only add existing value as tags when using strings as tags\r\n      if (self.options.itemValue === defaultOptions.itemValue) {\r\n        if (self.$element[0].tagName === 'INPUT') {\r\n            self.add(self.$element.val());\r\n        } else {\r\n          $('option', self.$element).each(function() {\r\n            self.add($(this).attr('value'), true);\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Removes all tagsinput behaviour and unregsiter all event handlers\r\n     */\r\n    destroy: function() {\r\n      var self = this;\r\n\r\n      // Unbind events\r\n      self.$container.off('keypress', 'input');\r\n      self.$container.off('click', '[role=remove]');\r\n\r\n      self.$container.remove();\r\n      self.$element.removeData('tagsinput');\r\n      self.$element.show();\r\n    },\r\n\r\n    /**\r\n     * Sets focus on the tagsinput\r\n     */\r\n    focus: function() {\r\n      this.$input.focus();\r\n    },\r\n\r\n    /**\r\n     * Returns the internal input element\r\n     */\r\n    input: function() {\r\n      return this.$input;\r\n    },\r\n\r\n    /**\r\n     * Returns the element which is wrapped around the internal input. This\r\n     * is normally the $container, but typeahead.js moves the $input element.\r\n     */\r\n    findInputWrapper: function() {\r\n      var elt = this.$input[0],\r\n          container = this.$container[0];\r\n      while(elt && elt.parentNode !== container)\r\n        elt = elt.parentNode;\r\n\r\n      return $(elt);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Register JQuery plugin\r\n   */\r\n  $.fn.tagsinput = function(arg1, arg2, arg3) {\r\n    var results = [];\r\n\r\n    this.each(function() {\r\n      var tagsinput = $(this).data('tagsinput');\r\n      // Initialize a new tags input\r\n      if (!tagsinput) {\r\n          tagsinput = new TagsInput(this, arg1);\r\n          $(this).data('tagsinput', tagsinput);\r\n          results.push(tagsinput);\r\n\r\n          if (this.tagName === 'SELECT') {\r\n              $('option', $(this)).attr('selected', 'selected');\r\n          }\r\n\r\n          // Init tags from $(this).val()\r\n          $(this).val($(this).val());\r\n      } else if (!arg1 && !arg2) {\r\n          // tagsinput already exists\r\n          // no function, trying to init\r\n          results.push(tagsinput);\r\n      } else if(tagsinput[arg1] !== undefined) {\r\n          // Invoke function on existing tags input\r\n            if(tagsinput[arg1].length === 3 && arg3 !== undefined){\r\n               var retVal = tagsinput[arg1](arg2, null, arg3);\r\n            }else{\r\n               var retVal = tagsinput[arg1](arg2);\r\n            }\r\n          if (retVal !== undefined)\r\n              results.push(retVal);\r\n      }\r\n    });\r\n\r\n    if ( typeof arg1 == 'string') {\r\n      // Return the results from the invoked function calls\r\n      return results.length > 1 ? results : results[0];\r\n    } else {\r\n      return results;\r\n    }\r\n  };\r\n\r\n  $.fn.tagsinput.Constructor = TagsInput;\r\n\r\n  /**\r\n   * Most options support both a string or number as well as a function as\r\n   * option value. This function makes sure that the option with the given\r\n   * key in the given options is wrapped in a function\r\n   */\r\n  function makeOptionItemFunction(options, key) {\r\n    if (typeof options[key] !== 'function') {\r\n      var propertyName = options[key];\r\n      options[key] = function(item) { return item[propertyName]; };\r\n    }\r\n  }\r\n  function makeOptionFunction(options, key) {\r\n    if (typeof options[key] !== 'function') {\r\n      var value = options[key];\r\n      options[key] = function() { return value; };\r\n    }\r\n  }\r\n  /**\r\n   * HtmlEncodes the given value\r\n   */\r\n  var htmlEncodeContainer = $('<div />');\r\n  function htmlEncode(value) {\r\n    if (value) {\r\n      return htmlEncodeContainer.text(value).html();\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the position of the caret in the given input field\r\n   * http://flightschool.acylt.com/devnotes/caret-position-woes/\r\n   */\r\n  function doGetCaretPosition(oField) {\r\n    var iCaretPos = 0;\r\n    if (document.selection) {\r\n      oField.focus ();\r\n      var oSel = document.selection.createRange();\r\n      oSel.moveStart ('character', -oField.value.length);\r\n      iCaretPos = oSel.text.length;\r\n    } else if (oField.selectionStart || oField.selectionStart == '0') {\r\n      iCaretPos = oField.selectionStart;\r\n    }\r\n    return (iCaretPos);\r\n  }\r\n\r\n  /**\r\n    * Returns boolean indicates whether user has pressed an expected key combination.\r\n    * @param object keyPressEvent: JavaScript event object, refer\r\n    *     http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\r\n    * @param object lookupList: expected key combinations, as in:\r\n    *     [13, {which: 188, shiftKey: true}]\r\n    */\r\n  function keyCombinationInList(keyPressEvent, lookupList) {\r\n      var found = false;\r\n      $.each(lookupList, function (index, keyCombination) {\r\n          if (typeof (keyCombination) === 'number' && keyPressEvent.which === keyCombination) {\r\n              found = true;\r\n              return false;\r\n          }\r\n\r\n          if (keyPressEvent.which === keyCombination.which) {\r\n              var alt = !keyCombination.hasOwnProperty('altKey') || keyPressEvent.altKey === keyCombination.altKey,\r\n                  shift = !keyCombination.hasOwnProperty('shiftKey') || keyPressEvent.shiftKey === keyCombination.shiftKey,\r\n                  ctrl = !keyCombination.hasOwnProperty('ctrlKey') || keyPressEvent.ctrlKey === keyCombination.ctrlKey;\r\n              if (alt && shift && ctrl) {\r\n                  found = true;\r\n                  return false;\r\n              }\r\n          }\r\n      });\r\n\r\n      return found;\r\n  }\r\n\r\n  /**\r\n   * Initialize tagsinput behaviour on inputs and selects which have\r\n   * data-role=tagsinput\r\n   */\r\n  $(function() {\r\n    $(\"input[data-role=tagsinput], select[multiple][data-role=tagsinput]\").tagsinput();\r\n  });\r\n})(window.jQuery);\r\n","/*!\r\n * Datepicker for Bootstrap v1.6.4 (https://github.com/eternicode/bootstrap-datepicker)\r\n *\r\n * Copyright 2012 Stefan Petre\r\n * Improvements by Andrew Rowls\r\n * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)\r\n */\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(a){return function(){return this[a].apply(this,arguments)}}function g(a){return a&&!isNaN(a.getTime())}function h(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp(\"^\"+c.toLowerCase()+\"([A-Z])\");c=new RegExp(\"^\"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function i(b){var c={};if(q[b]||(b=b.split(\"-\")[0],q[b])){var d=q[b];return a.each(p,function(a,b){b in d&&(c[b]=d[b])}),c}}var j=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new j;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),k=function(b,c){a(b).data(\"datepicker\",this),this._process_options(c),this.dates=new j,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=a(b),this.isInput=this.element.is(\"input\"),this.inputField=this.isInput?this.element:this.element.find(\"input\"),this.component=this.element.hasClass(\"date\")?this.element.find(\".add-on, .input-group-addon, .btn\"):!1,this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is(\"div\"),this.picker=a(r.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(\".prev\").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(\".next\").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass(\"datepicker-inline\").appendTo(this.element):this.picker.addClass(\"datepicker-dropdown dropdown-menu\"),this.o.rtl&&this.picker.addClass(\"datepicker-rtl\"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find(\"thead .datepicker-title, tfoot .today, tfoot .clear\").attr(\"colspan\",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};k.prototype={constructor:k,_resolveViewName:function(a,c){return 0===a||\"days\"===a||\"month\"===a?0:1===a||\"months\"===a||\"year\"===a?1:2===a||\"years\"===a||\"decade\"===a?2:3===a||\"decades\"===a||\"century\"===a?3:4===a||\"centuries\"===a||\"millennium\"===a?4:c===b?!1:c},_check_template:function(c){try{if(c===b||\"\"===c)return!1;if((c.match(/[<>]/g)||[]).length<=0)return!0;var d=a(c);return d.length>0}catch(e){return!1}},_process_options:function(b){this._o=a.extend({},this._o,b);var e=this.o=a.extend({},this._o),f=e.language;q[f]||(f=f.split(\"-\")[0],q[f]||(f=o.language)),e.language=f,e.startView=this._resolveViewName(e.startView,0),e.minViewMode=this._resolveViewName(e.minViewMode,0),e.maxViewMode=this._resolveViewName(e.maxViewMode,4),e.startView=Math.min(e.startView,e.maxViewMode),e.startView=Math.max(e.startView,e.minViewMode),e.multidate!==!0&&(e.multidate=Number(e.multidate)||!1,e.multidate!==!1&&(e.multidate=Math.max(0,e.multidate))),e.multidateSeparator=String(e.multidateSeparator),e.weekStart%=7,e.weekEnd=(e.weekStart+6)%7;var g=r.parseFormat(e.format);e.startDate!==-(1/0)&&(e.startDate?e.startDate instanceof Date?e.startDate=this._local_to_utc(this._zero_time(e.startDate)):e.startDate=r.parseDate(e.startDate,g,e.language,e.assumeNearbyYear):e.startDate=-(1/0)),e.endDate!==1/0&&(e.endDate?e.endDate instanceof Date?e.endDate=this._local_to_utc(this._zero_time(e.endDate)):e.endDate=r.parseDate(e.endDate,g,e.language,e.assumeNearbyYear):e.endDate=1/0),e.daysOfWeekDisabled=e.daysOfWeekDisabled||[],a.isArray(e.daysOfWeekDisabled)||(e.daysOfWeekDisabled=e.daysOfWeekDisabled.split(/[,\\s]*/)),e.daysOfWeekDisabled=a.map(e.daysOfWeekDisabled,function(a){return parseInt(a,10)}),e.daysOfWeekHighlighted=e.daysOfWeekHighlighted||[],a.isArray(e.daysOfWeekHighlighted)||(e.daysOfWeekHighlighted=e.daysOfWeekHighlighted.split(/[,\\s]*/)),e.daysOfWeekHighlighted=a.map(e.daysOfWeekHighlighted,function(a){return parseInt(a,10)}),e.datesDisabled=e.datesDisabled||[],a.isArray(e.datesDisabled)||(e.datesDisabled=[e.datesDisabled]),e.datesDisabled=a.map(e.datesDisabled,function(a){return r.parseDate(a,g,e.language,e.assumeNearbyYear)});var h=String(e.orientation).toLowerCase().split(/\\s+/g),i=e.orientation.toLowerCase();if(h=a.grep(h,function(a){return/^auto|left|right|top|bottom$/.test(a)}),e.orientation={x:\"auto\",y:\"auto\"},i&&\"auto\"!==i)if(1===h.length)switch(h[0]){case\"top\":case\"bottom\":e.orientation.y=h[0];break;case\"left\":case\"right\":e.orientation.x=h[0]}else i=a.grep(h,function(a){return/^left|right$/.test(a)}),e.orientation.x=i[0]||\"auto\",i=a.grep(h,function(a){return/^top|bottom$/.test(a)}),e.orientation.y=i[0]||\"auto\";else;if(e.defaultViewDate){var j=e.defaultViewDate.year||(new Date).getFullYear(),k=e.defaultViewDate.month||0,l=e.defaultViewDate.day||1;e.defaultViewDate=c(j,k,l)}else e.defaultViewDate=d()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};this.o.showOnFocus===!0&&(b.focus=a.proxy(this.show,this)),this.isInput?this._events=[[this.element,b]]:this.component&&this.hasInput?this._events=[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:this._events=[[this.element,{click:a.proxy(this.show,this),keydown:a.proxy(this.keydown,this)}]],this._events.push([this.element,\"*\",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{\"changeYear changeMonth\":a.proxy(function(a){this.update(a.date)},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):\"string\"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return r.formatDate(c,b,this.o.language)},this)})},show:function(){return this.inputField.prop(\"disabled\")||this.inputField.prop(\"readonly\")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger(\"show\"),(window.navigator.msMaxTouchPoints||\"ontouchstart\"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this)},hide:function(){return this.isInline||!this.picker.is(\":visible\")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger(\"hide\"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&-1!==a.inArray(\"text/plain\",b.originalEvent.clipboardData.types))c=b.originalEvent.clipboardData.getData(\"text/plain\");else{if(!window.clipboardData)return;c=window.clipboardData.getData(\"Text\")}this.setDate(c),this.update(),b.preventDefault()},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return\"undefined\"!=typeof a?new Date(a):null},clearDates:function(){this.inputField&&this.inputField.val(\"\"),this.update(),this._trigger(\"changeDate\"),this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b),this._trigger(\"changeDate\"),this.setValue(),this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger(\"changeDate\"),this.setValue(),this},setDate:f(\"setDates\"),setUTCDate:f(\"setUTCDates\"),remove:f(\"destroy\"),setValue:function(){var a=this.getFormattedDate();return this.inputField.val(a),this},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return r.formatDate(a,c,d)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a){return this._process_options({startDate:a}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){return this._process_options({endDate:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(a){return this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(a){return this._process_options({daysOfWeekHighlighted:a}),this.update(),this},setDatesDisabled:function(a){this._process_options({datesDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=a(this.o.container),f=e.width(),g=\"body\"===this.o.container?a(document).scrollTop():e.scrollTop(),h=e.offset(),i=[];this.element.parents().each(function(){var b=a(this).css(\"z-index\");\"auto\"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+this.o.zIndexOffset,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-h.left,o=k.top-h.top;\"body\"!==this.o.container&&(o+=g),this.picker.removeClass(\"datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left\"),\"auto\"!==this.o.orientation.x?(this.picker.addClass(\"datepicker-orient-\"+this.o.orientation.x),\"right\"===this.o.orientation.x&&(n-=b-m)):k.left<0?(this.picker.addClass(\"datepicker-orient-left\"),n-=k.left-d):n+b>f?(this.picker.addClass(\"datepicker-orient-right\"),n+=m-b):this.picker.addClass(\"datepicker-orient-left\");var p,q=this.o.orientation.y;if(\"auto\"===q&&(p=-g+o-c,q=0>p?\"bottom\":\"top\"),this.picker.addClass(\"datepicker-orient-\"+q),\"top\"===q?o-=c+parseInt(this.picker.css(\"padding-top\")):o+=l,this.o.rtl){var r=f-(n+m);this.picker.css({top:o,right:r,zIndex:j})}else this.picker.css({top:o,left:n,zIndex:j});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;return arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data(\"date\")||this.inputField.val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return r.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),c=a.grep(c,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger(\"changeDate\"),!this.dates.length&&b.length&&this._trigger(\"clearDate\"),this.fill(),this.element.change(),this},fillDow:function(){var b=this.o.weekStart,c=\"<tr>\";for(this.o.calendarWeeks&&(this.picker.find(\".datepicker-days .datepicker-switch\").attr(\"colspan\",function(a,b){return parseInt(b)+1}),c+='<th class=\"cw\">&#160;</th>');b<this.o.weekStart+7;)c+='<th class=\"dow',a.inArray(b,this.o.daysOfWeekDisabled)>-1&&(c+=\" disabled\"),c+='\">'+q[this.o.language].daysMin[b++%7]+\"</th>\";c+=\"</tr>\",this.picker.find(\".datepicker-days thead\").append(c)},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),b=\"\",c=0;12>c;){var d=a&&a.getMonth()===c?\" focused\":\"\";b+='<span class=\"month'+d+'\">'+q[this.o.language].monthsShort[c++]+\"</span>\"}this.picker.find(\".datepicker-months td\").html(b)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push(\"old\"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push(\"new\"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push(\"focused\"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push(\"today\"),-1!==this.dates.contains(b)&&c.push(\"active\"),this.dateWithinRange(b)||c.push(\"disabled\"),this.dateIsDisabled(b)&&c.push(\"disabled\",\"disabled-date\"),-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&c.push(\"highlighted\"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push(\"range\"),-1!==a.inArray(b.valueOf(),this.range)&&c.push(\"selected\"),b.valueOf()===this.range[0]&&c.push(\"range-start\"),b.valueOf()===this.range[this.range.length-1]&&c.push(\"range-end\")),c},_fill_yearsView:function(c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u;for(k=\"\",l=this.picker.find(c),m=parseInt(g/e,10)*e,o=parseInt(h/f,10)*f,p=parseInt(i/f,10)*f,n=a.map(this.dates,function(a){return parseInt(a.getUTCFullYear()/f,10)*f}),l.find(\".datepicker-switch\").text(m+\"-\"+(m+9*f)),q=m-f,r=-1;11>r;r+=1)s=[d],t=null,-1===r?s.push(\"old\"):10===r&&s.push(\"new\"),-1!==a.inArray(q,n)&&s.push(\"active\"),(o>q||q>p)&&s.push(\"disabled\"),q===this.viewDate.getFullYear()&&s.push(\"focused\"),j!==a.noop&&(u=j(new Date(q,0,1)),u===b?u={}:\"boolean\"==typeof u?u={enabled:u}:\"string\"==typeof u&&(u={classes:u}),u.enabled===!1&&s.push(\"disabled\"),u.classes&&(s=s.concat(u.classes.split(/\\s+/))),u.tooltip&&(t=u.tooltip)),k+='<span class=\"'+s.join(\" \")+'\"'+(t?' title=\"'+t+'\"':\"\")+\">\"+q+\"</span>\",q+=f;l.find(\"td\").html(k)},fill:function(){var d,e,f=new Date(this.viewDate),g=f.getUTCFullYear(),h=f.getUTCMonth(),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),j=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),k=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,m=q[this.o.language].today||q.en.today||\"\",n=q[this.o.language].clear||q.en.clear||\"\",o=q[this.o.language].titleFormat||q.en.titleFormat;if(!isNaN(g)&&!isNaN(h)){this.picker.find(\".datepicker-days .datepicker-switch\").text(r.formatDate(f,o,this.o.language)),this.picker.find(\"tfoot .today\").text(m).toggle(this.o.todayBtn!==!1),this.picker.find(\"tfoot .clear\").text(n).toggle(this.o.clearBtn!==!1),this.picker.find(\"thead .datepicker-title\").text(this.o.title).toggle(\"\"!==this.o.title),this.updateNavArrows(),this.fillMonths();var p=c(g,h-1,28),s=r.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(s),p.setUTCDate(s-(p.getUTCDay()-this.o.weekStart+7)%7);var t=new Date(p);p.getUTCFullYear()<100&&t.setUTCFullYear(p.getUTCFullYear()),t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];p.valueOf()<t;){if(p.getUTCDay()===this.o.weekStart&&(v.push(\"<tr>\"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),x=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),y=new Date(Number(y=c(x.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),z=(x-y)/864e5/7+1;v.push('<td class=\"cw\">'+z+\"</td>\")}u=this.getClassNames(p),u.push(\"day\"),this.o.beforeShowDay!==a.noop&&(e=this.o.beforeShowDay(this._utc_to_local(p)),e===b?e={}:\"boolean\"==typeof e?e={enabled:e}:\"string\"==typeof e&&(e={classes:e}),e.enabled===!1&&u.push(\"disabled\"),e.classes&&(u=u.concat(e.classes.split(/\\s+/))),e.tooltip&&(d=e.tooltip)),u=a.isFunction(a.uniqueSort)?a.uniqueSort(u):a.unique(u),v.push('<td class=\"'+u.join(\" \")+'\"'+(d?' title=\"'+d+'\"':\"\")+\">\"+p.getUTCDate()+\"</td>\"),d=null,p.getUTCDay()===this.o.weekEnd&&v.push(\"</tr>\"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(\".datepicker-days tbody\").empty().append(v.join(\"\"));var A=q[this.o.language].monthsTitle||q.en.monthsTitle||\"Months\",B=this.picker.find(\".datepicker-months\").find(\".datepicker-switch\").text(this.o.maxViewMode<2?A:g).end().find(\"span\").removeClass(\"active\");if(a.each(this.dates,function(a,b){b.getUTCFullYear()===g&&B.eq(b.getUTCMonth()).addClass(\"active\")}),(i>g||g>k)&&B.addClass(\"disabled\"),g===i&&B.slice(0,j).addClass(\"disabled\"),g===k&&B.slice(l+1).addClass(\"disabled\"),this.o.beforeShowMonth!==a.noop){var C=this;a.each(B,function(c,d){var e=new Date(g,c,1),f=C.o.beforeShowMonth(e);f===b?f={}:\"boolean\"==typeof f?f={enabled:f}:\"string\"==typeof f&&(f={classes:f}),f.enabled!==!1||a(d).hasClass(\"disabled\")||a(d).addClass(\"disabled\"),f.classes&&a(d).addClass(f.classes),f.tooltip&&a(d).prop(\"title\",f.tooltip)})}this._fill_yearsView(\".datepicker-years\",\"year\",10,1,g,i,k,this.o.beforeShowYear),this._fill_yearsView(\".datepicker-decades\",\"decade\",100,10,g,i,k,this.o.beforeShowDecade),this._fill_yearsView(\".datepicker-centuries\",\"century\",1e3,100,g,i,k,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(\".prev\").css({visibility:\"hidden\"}):this.picker.find(\".prev\").css({visibility:\"visible\"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(\".next\").css({visibility:\"hidden\"}):this.picker.find(\".next\").css({visibility:\"visible\"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(\".prev\").css({visibility:\"hidden\"}):this.picker.find(\".prev\").css({visibility:\"visible\"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(\".next\").css({visibility:\"hidden\"}):this.picker.find(\".next\").css({visibility:\"visible\"})}}},click:function(b){b.preventDefault(),b.stopPropagation();var e,f,g,h,i,j,k;e=a(b.target),e.hasClass(\"datepicker-switch\")&&this.showMode(1);var l=e.closest(\".prev, .next\");l.length>0&&(f=r.modes[this.viewMode].navStep*(l.hasClass(\"prev\")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,f),this._trigger(\"changeMonth\",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,f),1===this.viewMode&&this._trigger(\"changeYear\",this.viewDate)),this.fill()),e.hasClass(\"today\")&&!e.hasClass(\"day\")&&(this.showMode(-2),this._setDate(d(),\"linked\"===this.o.todayBtn?null:\"view\")),e.hasClass(\"clear\")&&this.clearDates(),e.hasClass(\"disabled\")||(e.hasClass(\"day\")&&(g=parseInt(e.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),e.hasClass(\"old\")&&(0===i?(i=11,h-=1,j=!0,k=!0):(i-=1,j=!0)),e.hasClass(\"new\")&&(11===i?(i=0,h+=1,j=!0,k=!0):(i+=1,j=!0)),this._setDate(c(h,i,g)),k&&this._trigger(\"changeYear\",this.viewDate),j&&this._trigger(\"changeMonth\",this.viewDate)),e.hasClass(\"month\")&&(this.viewDate.setUTCDate(1),g=1,i=e.parent().find(\"span\").index(e),h=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(i),this._trigger(\"changeMonth\",this.viewDate),1===this.o.minViewMode?(this._setDate(c(h,i,g)),this.showMode()):this.showMode(-1),this.fill()),(e.hasClass(\"year\")||e.hasClass(\"decade\")||e.hasClass(\"century\"))&&(this.viewDate.setUTCDate(1),g=1,i=0,h=parseInt(e.text(),10)||0,this.viewDate.setUTCFullYear(h),e.hasClass(\"year\")&&(this._trigger(\"changeYear\",this.viewDate),2===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass(\"decade\")&&(this._trigger(\"changeDecade\",this.viewDate),3===this.o.minViewMode&&this._setDate(c(h,i,g))),e.hasClass(\"century\")&&(this._trigger(\"changeCentury\",this.viewDate),4===this.o.minViewMode&&this._setDate(c(h,i,g))),this.showMode(-1),this.fill())),this.picker.is(\":visible\")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),-1!==b?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(b):this.o.multidate===!1?(this.dates.clear(),this.dates.push(a)):this.dates.push(a),\"number\"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&\"date\"!==b||this._toggle_multidate(a&&new Date(a)),b&&\"view\"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),b&&\"view\"===b||this._trigger(\"changeDate\"),this.inputField&&this.inputField.change(),!this.o.autoclose||b&&\"date\"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);return c.setUTCDate(a.getUTCDate()+b),c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!g(a))return this.o.defaultViewDate;if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),h=e.getUTCMonth(),i=Math.abs(b);if(b=b>0?1:-1,1===i)d=-1===b?function(){return e.getUTCMonth()===h}:function(){return e.getUTCMonth()!==c},c=h+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var j=0;i>j;j++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!==e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{if(a=this[c](a,b),!this.dateWithinRange(a))return!1;c=\"moveDay\"}while(this.dateIsDisabled(a));return a},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length>0},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(!this.picker.is(\":visible\"))return void((40===a.keyCode||27===a.keyCode)&&(this.show(),a.stopPropagation()));var b,c,d=!1,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault(),a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;b=37===a.keyCode||38===a.keyCode?-1:1,0===this.viewMode?a.ctrlKey?(c=this.moveAvailableDate(e,b,\"moveYear\"),c&&this._trigger(\"changeYear\",this.viewDate)):a.shiftKey?(c=this.moveAvailableDate(e,b,\"moveMonth\"),c&&this._trigger(\"changeMonth\",this.viewDate)):37===a.keyCode||39===a.keyCode?c=this.moveAvailableDate(e,b,\"moveDay\"):this.weekOfDateIsDisabled(e)||(c=this.moveAvailableDate(e,b,\"moveWeek\")):1===this.viewMode?((38===a.keyCode||40===a.keyCode)&&(b=4*b),c=this.moveAvailableDate(e,b,\"moveMonth\")):2===this.viewMode&&((38===a.keyCode||40===a.keyCode)&&(b=4*b),c=this.moveAvailableDate(e,b,\"moveYear\")),c&&(this.focusDate=this.viewDate=c,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(e),d=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(\":visible\")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}d&&(this.dates.length?this._trigger(\"changeDate\"):this._trigger(\"clearDate\"),this.inputField&&this.inputField.change())},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+a))),this.picker.children(\"div\").hide().filter(\".datepicker-\"+r.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var l=function(b,c){a(b).data(\"datepicker\",this),this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,n.call(a(this.inputs),c).on(\"changeDate\",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data(\"datepicker\")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data(\"datepicker\");if(\"undefined\"!=typeof c){var d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=e-1,g=e+1,h=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d)}),d<this.dates[f])for(;f>=0&&d<this.dates[f];)this.pickers[f--].setUTCDate(d);else if(d>this.dates[g])for(;h>g&&d>this.dates[g];)this.pickers[g++].setUTCDate(d);this.updateDates(),delete this.updating}}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var m=a.fn.datepicker,n=function(c){var d=Array.apply(null,arguments);d.shift();var e;if(this.each(function(){var b=a(this),f=b.data(\"datepicker\"),g=\"object\"==typeof c&&c;if(!f){var j=h(this,\"date\"),m=a.extend({},o,j,g),n=i(m.language),p=a.extend({},o,n,j,g);b.hasClass(\"input-daterange\")||p.inputs?(a.extend(p,{inputs:p.inputs||b.find(\"input\").toArray()}),f=new l(this,p)):f=new k(this,p),b.data(\"datepicker\",f)}\"string\"==typeof c&&\"function\"==typeof f[c]&&(e=f[c].apply(f,d))}),e===b||e instanceof k||e instanceof l)return this;if(this.length>1)throw new Error(\"Using only allowed for the collection of a single element (\"+c+\" function)\");return e};a.fn.datepicker=n;var o=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:\"mm/dd/yyyy\",keyboardNavigation:!0,language:\"en\",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:\",\",orientation:\"auto\",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:\"body\",immediateUpdates:!1,title:\"\",templates:{leftArrow:\"&laquo;\",rightArrow:\"&raquo;\"}},p=a.fn.datepicker.locale_opts=[\"format\",\"rtl\",\"weekStart\"];a.fn.datepicker.Constructor=k;var q=a.fn.datepicker.dates={en:{days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],daysShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],daysMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthsShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],today:\"Today\",clear:\"Clear\",titleFormat:\"MM yyyy\"}},r={modes:[{clsName:\"days\",navFnc:\"Month\",navStep:1},{clsName:\"months\",navFnc:\"FullYear\",navStep:1},{clsName:\"years\",navFnc:\"FullYear\",navStep:10},{clsName:\"decades\",navFnc:\"FullDecade\",navStep:100},{clsName:\"centuries\",navFnc:\"FullCentury\",navStep:1e3}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,r.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\\/:-@\\u5e74\\u6708\\u65e5\\[-`{-~\\t\\n\\r]+/g,parseFormat:function(a){if(\"function\"==typeof a.toValue&&\"function\"==typeof a.toDisplay)return a;var b=a.replace(this.validParts,\"\\x00\").split(\"\\x00\"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error(\"Invalid date format.\");return{separators:b,parts:c}},parseDate:function(e,f,g,h){function i(a,b){return b===!0&&(b=10),100>a&&(a+=2e3,a>(new Date).getFullYear()+b&&(a-=100)),a}function j(){var a=this.slice(0,s[n].length),b=s[n].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!e)return b;if(e instanceof Date)return e;if(\"string\"==typeof f&&(f=r.parseFormat(f)),f.toValue)return f.toValue(e,f,g);var l,m,n,o,p=/([\\-+]\\d+)([dmwy])/,s=e.match(/([\\-+]\\d+)([dmwy])/g),t={d:\"moveDay\",m:\"moveMonth\",w:\"moveWeek\",y:\"moveYear\"},u={yesterday:\"-1d\",today:\"+0d\",tomorrow:\"+1d\"};if(/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(e)){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}if(\"undefined\"!=typeof u[e]&&(e=u[e],s=e.match(/([\\-+]\\d+)([dmwy])/g),/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(e))){for(e=new Date,n=0;n<s.length;n++)l=p.exec(s[n]),m=parseInt(l[1]),o=t[l[2]],e=k.prototype[o](e,m);return c(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}s=e&&e.match(this.nonpunctuation)||[],e=new Date;var v,w,x={},y=[\"yyyy\",\"yy\",\"M\",\"MM\",\"m\",\"mm\",\"d\",\"dd\"],z={yyyy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},yy:function(a,b){return a.setUTCFullYear(h?i(b,h):b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};z.M=z.MM=z.mm=z.m,z.dd=z.d,e=d();var A=f.parts.slice();if(s.length!==A.length&&(A=a(A).filter(function(b,c){return-1!==a.inArray(c,y)}).toArray()),s.length===A.length){var B;for(n=0,B=A.length;B>n;n++){if(v=parseInt(s[n],10),l=A[n],isNaN(v))switch(l){case\"MM\":w=a(q[g].months).filter(j),v=a.inArray(w[0],q[g].months)+1;break;case\"M\":w=a(q[g].monthsShort).filter(j),v=a.inArray(w[0],q[g].monthsShort)+1}x[l]=v}var C,D;for(n=0;n<y.length;n++)D=y[n],D in x&&!isNaN(x[D])&&(C=new Date(e),z[D](C,x[D]),isNaN(C)||(e=C))}return e},formatDate:function(b,c,d){if(!b)return\"\";if(\"string\"==typeof c&&(c=r.parseFormat(c)),\r\nc.toDisplay)return c.toDisplay(b,c,d);var e={d:b.getUTCDate(),D:q[d].daysShort[b.getUTCDay()],DD:q[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:q[d].monthsShort[b.getUTCMonth()],MM:q[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?\"0\":\"\")+e.d,e.mm=(e.m<10?\"0\":\"\")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join(\"\")},headTemplate:'<thead><tr><th colspan=\"7\" class=\"datepicker-title\"></th></tr><tr><th class=\"prev\">&laquo;</th><th colspan=\"5\" class=\"datepicker-switch\"></th><th class=\"next\">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan=\"7\"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr><tr><th colspan=\"7\" class=\"clear\"></th></tr></tfoot>'};r.template='<div class=\"datepicker\"><div class=\"datepicker-days\"><table class=\"table-condensed\">'+r.headTemplate+\"<tbody></tbody>\"+r.footTemplate+'</table></div><div class=\"datepicker-months\"><table class=\"table-condensed\">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class=\"datepicker-years\"><table class=\"table-condensed\">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class=\"datepicker-decades\"><table class=\"table-condensed\">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class=\"datepicker-centuries\"><table class=\"table-condensed\">'+r.headTemplate+r.contTemplate+r.footTemplate+\"</table></div></div>\",a.fn.datepicker.DPGlobal=r,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=m,this},a.fn.datepicker.version=\"1.6.4\",a(document).on(\"focus.datepicker.data-api click.datepicker.data-api\",'[data-provide=\"datepicker\"]',function(b){var c=a(this);c.data(\"datepicker\")||(b.preventDefault(),n.call(c,\"show\"))}),a(function(){n.call(a('[data-provide=\"datepicker-inline\"]'))})});","/*!\r\n * ClockPicker v0.0.7 (http://weareoutman.github.io/clockpicker/)\r\n * Copyright 2014 Wang Shenwei.\r\n * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)\r\n */\r\n!function(){function t(t){return document.createElementNS(p,t)}function i(t){return(10>t?\"0\":\"\")+t}function e(t){var i=++m+\"\";return t?t+i:i}function s(s,r){function p(t,i){var e=u.offset(),s=/^touch/.test(t.type),o=e.left+b,n=e.top+b,p=(s?t.originalEvent.touches[0]:t).pageX-o,h=(s?t.originalEvent.touches[0]:t).pageY-n,k=Math.sqrt(p*p+h*h),v=!1;if(!i||!(g-y>k||k>g+y)){t.preventDefault();var m=setTimeout(function(){c.addClass(\"clockpicker-moving\")},200);l&&u.append(x.canvas),x.setHand(p,h,!i,!0),a.off(d).on(d,function(t){t.preventDefault();var i=/^touch/.test(t.type),e=(i?t.originalEvent.touches[0]:t).pageX-o,s=(i?t.originalEvent.touches[0]:t).pageY-n;(v||e!==p||s!==h)&&(v=!0,x.setHand(e,s,!1,!0))}),a.off(f).on(f,function(t){a.off(f),t.preventDefault();var e=/^touch/.test(t.type),s=(e?t.originalEvent.changedTouches[0]:t).pageX-o,l=(e?t.originalEvent.changedTouches[0]:t).pageY-n;(i||v)&&s===p&&l===h&&x.setHand(s,l),\"hours\"===x.currentView?x.toggleView(\"minutes\",A/2):r.autoclose&&(x.minutesView.addClass(\"clockpicker-dial-out\"),setTimeout(function(){x.done()},A/2)),u.prepend(j),clearTimeout(m),c.removeClass(\"clockpicker-moving\"),a.off(d)})}}var h=n(V),u=h.find(\".clockpicker-plate\"),v=h.find(\".clockpicker-hours\"),m=h.find(\".clockpicker-minutes\"),T=h.find(\".clockpicker-am-pm-block\"),C=\"INPUT\"===s.prop(\"tagName\"),H=C?s:s.find(\"input\"),P=s.find(\".input-group-addon\"),x=this;if(this.id=e(\"cp\"),this.element=s,this.options=r,this.isAppended=!1,this.isShown=!1,this.currentView=\"hours\",this.isInput=C,this.input=H,this.addon=P,this.popover=h,this.plate=u,this.hoursView=v,this.minutesView=m,this.amPmBlock=T,this.spanHours=h.find(\".clockpicker-span-hours\"),this.spanMinutes=h.find(\".clockpicker-span-minutes\"),this.spanAmPm=h.find(\".clockpicker-span-am-pm\"),this.amOrPm=\"PM\",r.twelvehour){{var S=['<div class=\"clockpicker-am-pm-block\">','<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button clockpicker-am-button\">',\"AM</button>\",'<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button clockpicker-pm-button\">',\"PM</button>\",\"</div>\"].join(\"\");n(S)}n('<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button am-button\">AM</button>').on(\"click\",function(){x.amOrPm=\"AM\",n(\".clockpicker-span-am-pm\").empty().append(\"AM\")}).appendTo(this.amPmBlock),n('<button type=\"button\" class=\"btn btn-sm btn-default clockpicker-button pm-button\">PM</button>').on(\"click\",function(){x.amOrPm=\"PM\",n(\".clockpicker-span-am-pm\").empty().append(\"PM\")}).appendTo(this.amPmBlock)}r.autoclose||n('<button type=\"button\" class=\"btn btn-sm btn-default btn-block clockpicker-button\">'+r.donetext+\"</button>\").click(n.proxy(this.done,this)).appendTo(h),\"top\"!==r.placement&&\"bottom\"!==r.placement||\"top\"!==r.align&&\"bottom\"!==r.align||(r.align=\"left\"),\"left\"!==r.placement&&\"right\"!==r.placement||\"left\"!==r.align&&\"right\"!==r.align||(r.align=\"top\"),h.addClass(r.placement),h.addClass(\"clockpicker-align-\"+r.align),this.spanHours.click(n.proxy(this.toggleView,this,\"hours\")),this.spanMinutes.click(n.proxy(this.toggleView,this,\"minutes\")),H.on(\"focus.clockpicker click.clockpicker\",n.proxy(this.show,this)),P.on(\"click.clockpicker\",n.proxy(this.toggle,this));var E,D,I,B,z=n('<div class=\"clockpicker-tick\"></div>');if(r.twelvehour)for(E=1;13>E;E+=1)D=z.clone(),I=E/6*Math.PI,B=g,D.css(\"font-size\",\"120%\"),D.css({left:b+Math.sin(I)*B-y,top:b-Math.cos(I)*B-y}),D.html(0===E?\"00\":E),v.append(D),D.on(k,p);else for(E=0;24>E;E+=1){D=z.clone(),I=E/6*Math.PI;var O=E>0&&13>E;B=O?w:g,D.css({left:b+Math.sin(I)*B-y,top:b-Math.cos(I)*B-y}),O&&D.css(\"font-size\",\"120%\"),D.html(0===E?\"00\":E),v.append(D),D.on(k,p)}for(E=0;60>E;E+=5)D=z.clone(),I=E/30*Math.PI,D.css({left:b+Math.sin(I)*g-y,top:b-Math.cos(I)*g-y}),D.css(\"font-size\",\"120%\"),D.html(i(E)),m.append(D),D.on(k,p);if(u.on(k,function(t){0===n(t.target).closest(\".clockpicker-tick\").length&&p(t,!0)}),l){var j=h.find(\".clockpicker-canvas\"),L=t(\"svg\");L.setAttribute(\"class\",\"clockpicker-svg\"),L.setAttribute(\"width\",M),L.setAttribute(\"height\",M);var U=t(\"g\");U.setAttribute(\"transform\",\"translate(\"+b+\",\"+b+\")\");var W=t(\"circle\");W.setAttribute(\"class\",\"clockpicker-canvas-bearing\"),W.setAttribute(\"cx\",0),W.setAttribute(\"cy\",0),W.setAttribute(\"r\",2);var N=t(\"line\");N.setAttribute(\"x1\",0),N.setAttribute(\"y1\",0);var X=t(\"circle\");X.setAttribute(\"class\",\"clockpicker-canvas-bg\"),X.setAttribute(\"r\",y);var Y=t(\"circle\");Y.setAttribute(\"class\",\"clockpicker-canvas-fg\"),Y.setAttribute(\"r\",3.5),U.appendChild(N),U.appendChild(X),U.appendChild(Y),U.appendChild(W),L.appendChild(U),j.append(L),this.hand=N,this.bg=X,this.fg=Y,this.bearing=W,this.g=U,this.canvas=j}o(this.options.init)}function o(t){t&&\"function\"==typeof t&&t()}var c,n=window.jQuery,r=n(window),a=n(document),p=\"http://www.w3.org/2000/svg\",l=\"SVGAngle\"in window&&function(){var t,i=document.createElement(\"div\");return i.innerHTML=\"<svg/>\",t=(i.firstChild&&i.firstChild.namespaceURI)==p,i.innerHTML=\"\",t}(),h=function(){var t=document.createElement(\"div\").style;return\"transition\"in t||\"WebkitTransition\"in t||\"MozTransition\"in t||\"msTransition\"in t||\"OTransition\"in t}(),u=\"ontouchstart\"in window,k=\"mousedown\"+(u?\" touchstart\":\"\"),d=\"mousemove.clockpicker\"+(u?\" touchmove.clockpicker\":\"\"),f=\"mouseup.clockpicker\"+(u?\" touchend.clockpicker\":\"\"),v=navigator.vibrate?\"vibrate\":navigator.webkitVibrate?\"webkitVibrate\":null,m=0,b=100,g=80,w=54,y=13,M=2*b,A=h?350:1,V=['<div class=\"popover clockpicker-popover\">','<div class=\"arrow\"></div>','<div class=\"popover-title\">','<span class=\"clockpicker-span-hours text-primary\"></span>',\" : \",'<span class=\"clockpicker-span-minutes\"></span>','<span class=\"clockpicker-span-am-pm\"></span>',\"</div>\",'<div class=\"popover-content\">','<div class=\"clockpicker-plate\">','<div class=\"clockpicker-canvas\"></div>','<div class=\"clockpicker-dial clockpicker-hours\"></div>','<div class=\"clockpicker-dial clockpicker-minutes clockpicker-dial-out\"></div>',\"</div>\",'<span class=\"clockpicker-am-pm-block\">',\"</span>\",\"</div>\",\"</div>\"].join(\"\");s.DEFAULTS={\"default\":\"\",fromnow:0,placement:\"bottom\",align:\"left\",donetext:\"完成\",autoclose:!1,twelvehour:!1,vibrate:!0},s.prototype.toggle=function(){this[this.isShown?\"hide\":\"show\"]()},s.prototype.locate=function(){var t=this.element,i=this.popover,e=t.offset(),s=t.outerWidth(),o=t.outerHeight(),c=this.options.placement,n=this.options.align,r={};switch(i.show(),c){case\"bottom\":r.top=e.top+o;break;case\"right\":r.left=e.left+s;break;case\"top\":r.top=e.top-i.outerHeight();break;case\"left\":r.left=e.left-i.outerWidth()}switch(n){case\"left\":r.left=e.left;break;case\"right\":r.left=e.left+s-i.outerWidth();break;case\"top\":r.top=e.top;break;case\"bottom\":r.top=e.top+o-i.outerHeight()}i.css(r)},s.prototype.show=function(){if(!this.isShown){o(this.options.beforeShow);var t=this;this.isAppended||(c=n(document.body).append(this.popover),r.on(\"resize.clockpicker\"+this.id,function(){t.isShown&&t.locate()}),this.isAppended=!0);var e=((this.input.prop(\"value\")||this.options[\"default\"]||\"\")+\"\").split(\":\");if(\"now\"===e[0]){var s=new Date(+new Date+this.options.fromnow);e=[s.getHours(),s.getMinutes()]}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.html(i(this.hours)),this.spanMinutes.html(i(this.minutes)),this.toggleView(\"hours\"),this.locate(),this.isShown=!0,a.on(\"click.clockpicker.\"+this.id+\" focusin.clockpicker.\"+this.id,function(i){var e=n(i.target);0===e.closest(t.popover).length&&0===e.closest(t.addon).length&&0===e.closest(t.input).length&&t.hide()}),a.on(\"keyup.clockpicker.\"+this.id,function(i){27===i.keyCode&&t.hide()}),o(this.options.afterShow)}},s.prototype.hide=function(){o(this.options.beforeHide),this.isShown=!1,a.off(\"click.clockpicker.\"+this.id+\" focusin.clockpicker.\"+this.id),a.off(\"keyup.clockpicker.\"+this.id),this.popover.hide(),o(this.options.afterHide)},s.prototype.toggleView=function(t,i){var e=!1;\"minutes\"===t&&\"visible\"===n(this.hoursView).css(\"visibility\")&&(o(this.options.beforeHourSelect),e=!0);var s=\"hours\"===t,c=s?this.hoursView:this.minutesView,r=s?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass(\"text-primary\",s),this.spanMinutes.toggleClass(\"text-primary\",!s),r.addClass(\"clockpicker-dial-out\"),c.css(\"visibility\",\"visible\").removeClass(\"clockpicker-dial-out\"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){r.css(\"visibility\",\"hidden\")},A),e&&o(this.options.afterHourSelect)},s.prototype.resetClock=function(t){var i=this.currentView,e=this[i],s=\"hours\"===i,o=Math.PI/(s?6:30),c=e*o,n=s&&e>0&&13>e?w:g,r=Math.sin(c)*n,a=-Math.cos(c)*n,p=this;l&&t?(p.canvas.addClass(\"clockpicker-canvas-out\"),setTimeout(function(){p.canvas.removeClass(\"clockpicker-canvas-out\"),p.setHand(r,a)},t)):this.setHand(r,a)},s.prototype.setHand=function(t,e,s,o){var c,r=Math.atan2(t,-e),a=\"hours\"===this.currentView,p=Math.PI/(a||s?6:30),h=Math.sqrt(t*t+e*e),u=this.options,k=a&&(g+w)/2>h,d=k?w:g;if(u.twelvehour&&(d=g),0>r&&(r=2*Math.PI+r),c=Math.round(r/p),r=c*p,u.twelvehour?a?0===c&&(c=12):(s&&(c*=5),60===c&&(c=0)):a?(12===c&&(c=0),c=k?0===c?12:c:0===c?0:c+12):(s&&(c*=5),60===c&&(c=0)),this[this.currentView]!==c&&v&&this.options.vibrate&&(this.vibrateTimer||(navigator[v](10),this.vibrateTimer=setTimeout(n.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=c,this[a?\"spanHours\":\"spanMinutes\"].html(i(c)),!l)return void this[a?\"hoursView\":\"minutesView\"].find(\".clockpicker-tick\").each(function(){var t=n(this);t.toggleClass(\"active\",c===+t.html())});o||!a&&c%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute(\"class\",\"clockpicker-canvas-bg clockpicker-canvas-bg-trans\")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute(\"class\",\"clockpicker-canvas-bg\"));var f=Math.sin(r)*d,m=-Math.cos(r)*d;this.hand.setAttribute(\"x2\",f),this.hand.setAttribute(\"y2\",m),this.bg.setAttribute(\"cx\",f),this.bg.setAttribute(\"cy\",m),this.fg.setAttribute(\"cx\",f),this.fg.setAttribute(\"cy\",m)},s.prototype.done=function(){o(this.options.beforeDone),this.hide();var t=this.input.prop(\"value\"),e=i(this.hours)+\":\"+i(this.minutes);this.options.twelvehour&&(e+=this.amOrPm),this.input.prop(\"value\",e),e!==t&&(this.input.triggerHandler(\"change\"),this.isInput||this.element.trigger(\"change\")),this.options.autoclose&&this.input.trigger(\"blur\"),o(this.options.afterDone)},s.prototype.remove=function(){this.element.removeData(\"clockpicker\"),this.input.off(\"focus.clockpicker click.clockpicker\"),this.addon.off(\"click.clockpicker\"),this.isShown&&this.hide(),this.isAppended&&(r.off(\"resize.clockpicker\"+this.id),this.popover.remove())},n.fn.clockpicker=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=n(this),o=e.data(\"clockpicker\");if(o)\"function\"==typeof o[t]&&o[t].apply(o,i);else{var c=n.extend({},s.DEFAULTS,e.data(),\"object\"==typeof t&&t);e.data(\"clockpicker\",new s(e,c))}})}}();","//////////////////////////////////////////////////////\r\n\r\n///////////////////////////////////////////////////\r\n\r\n\r\n // Example starter JavaScript for disabling form submissions if there are invalid fields\r\n(function () {\r\n    'use strict';\r\n\r\n    window.addEventListener('load', function () {\r\n        var form = document.getElementById('validation');\r\n        form.addEventListener('submit', function (event) {\r\n            if (form.checkValidity() === false) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n            form.classList.add('was-validated');\r\n        }, false);\r\n    }, false);\r\n})();"]}